(self.webpackChunkbeeline_adaptive=self.webpackChunkbeeline_adaptive||[]).push([[4588],{4588:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>dL});var r,i,a=n(58168),o=n(64467),s=n(5544),u=n(80045),c=n(19727),l=n.n(c),d=n(61225),f=n(99178),g=n(65257),m=n(48042),p=n(60436),v=n(57726),h=n.n(v),y={b:"",e:"__",m:"_"},b=function(e,t){var n=h().bind(t),r=function(e,t,n,r){var i=t?y.b+e+y.e+t:y.b+e,a=[i];if(n){var o="".concat(i).concat(y.m);Object.keys(n).forEach(function(e){if(Object.prototype.hasOwnProperty.call(n,e)){var t=n[e];t&&a.push(!0===t?o+e:"".concat(o+e).concat(y.m).concat(t.toString()))}})}return void 0!==r&&(Array.isArray(r)?r:[r]).forEach(function(e){e&&"string"==typeof e&&e.split(" ").forEach(function(e){e!==i&&a.push(e)})}),a};return function(t,i,a){var o;return o="string"==typeof t?"string"==typeof i||Array.isArray(i)?r(e,t,void 0,i):r(e,t,i,a):r(e,void 0,t,i),n.apply(void 0,(0,p.A)(o))}},w=n(39533),M=function(e){var t;return(null==(t=e.dataset)?void 0:t[w.qd])===w.Cc},A=function(){var e=(0,c.useState)(500),t=(0,s.A)(e,2),n=t[0],r=t[1];return(0,c.useEffect)(function(){var e=new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.forEach(function(e){M(e)&&r(500)}),e.addedNodes.forEach(function(e){if(M(e)){var t=Number(getComputedStyle(e).zIndex);r(!t||Number.isNaN(t)?1:t-1)}})})}),t=document.querySelector("body");return t&&e.observe(t,{childList:!0}),function(){e.disconnect()}},[]),n},E=n(60829),O=n(63049),I=n(24181),C=n(88810),N=n(37125),k=n(16996),D=["className","onlyIcon","iconColor","view","children"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _=b("button",{button_onlyIcon:"LG4UX","button_view_tertiary-invert":"wslBw",button_view_tertiary:"WhsVz"}),j={tertiary:"--color-icon-primary-invert",primary:"--color-constant-01","secondary-invert":"--color-icon-primary",secondary:"--color-icon-primary","tertiary-invert":"--color-icon-primary-invert"},x=(0,N.B)(function(e,t){var n=e.className,r=e.onlyIcon,i=e.iconColor,s=e.view,c=void 0===s?"primary":s,d=e.children,f=(0,u.A)(e,D);return l().createElement(k.$,(0,a.A)({},f,"button"!==f.tagName&&f.tagName?{}:{type:"button"},{className:_({onlyIcon:r,view:c},n),onlyIcon:r,ref:t,style:T(T({},f.style),i?(0,o.A)({},j[c],"var(--color-icon-".concat(i,")")):{}),view:"tertiary-invert"===c?"tertiary":c,"data-t-id":"ui-Button"}),d)}),L=n(60258),z=n(90965),P=function(e){return e[e.Unknown=0]="Unknown",e[e.Wifi=1]="Wifi",e[e.M_2G=2]="M_2G",e[e.M_2G_EDGE=3]="M_2G_EDGE",e[e.M_2G_GPRS=4]="M_2G_GPRS",e[e.M_3G=5]="M_3G",e[e.M_3G_HSUPA=6]="M_3G_HSUPA",e[e.M_3G_HSDPA=7]="M_3G_HSDPA",e[e.M_LTE=8]="M_LTE",e[e.M_5G=9]="M_5G",e}({}),R={http:"https",websocket:"wss"},Y={zoneType:"unauthorized",showMessageBeforeInput:!0},U=function(e){return e.LOAD="LOAD",e.ERROR="ERROR",e.OFFLINE="OFFLINE",e.BLOCK="BLOCK",e.UNKNOWN="UNKNOWN",e}({}),B=function(e){return e.HISTORY_LOAD="HISTORY_LOAD",e.CONTENT_LOAD="CONTENT_LOAD",e.VALIDATE_CAPTCHA="VALIDATE_CAPTCHA",e.OFFLINE="OFFLINE",e.REFRESH_TOKEN="REFRESH_TOKEN",e.WEBSOCKET_CONNECTION="WEBSOCKET_CONNECTION",e.UNKNOWN="UNKNOWN",e}({});function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W={isChatOpen:!1,isDateBlockVisible:!1,isMenuOpen:!1,windowBlocked:!1,isHistoryCalled:!1,widgetConfig:{authZoneConfig:{},charsLimit:6e3},errorScreen:{retryCount:0,reason:B.UNKNOWN,type:U.UNKNOWN}},G=(0,L.Z0)({name:"settings",initialState:W,reducers:{setWidgetConfig:function(e,t){var n,r,i=t.payload;null!=(n=i.authZoneConfig)&&n.zoneType&&(0,z.TV)({name:"chat_auth_zone",value:null==(r=i.authZoneConfig)?void 0:r.zoneType}),e.widgetConfig=V(V({},e.widgetConfig),i)},setIsDateBlockVisible:function(e,t){e.isDateBlockVisible=t.payload},setChatOpen:function(e,t){e.isChatOpen=t.payload},setMenuOpen:function(e,t){e.isMenuOpen=t.payload},setWindowBlocked:function(e,t){e.windowBlocked=t.payload},setIsHistoryCalled:function(e,t){e.isHistoryCalled=t.payload},setErrorScreenType:function(e,t){var n=t.payload;e.errorScreen.type!==U.BLOCK&&(e.errorScreen.type=n),(n===U.UNKNOWN||void 0===n)&&(e.errorScreen.reason=B.UNKNOWN)},setErrorReason:function(e,t){var n=t.payload;e.errorScreen.type!==U.BLOCK&&(e.errorScreen.reason=n)},clearErrorScreenData:function(e){e.errorScreen.reason=B.UNKNOWN,e.errorScreen.type=U.UNKNOWN},setErrorRetryCount:function(e,t){var n=t.payload;e.errorScreen.retryCount=n}}}),F=G.actions,Q=F.setChatOpen,Z=F.setWindowBlocked,q=(F.setIsDateBlockVisible,F.setMenuOpen),K=F.setWidgetConfig,J=F.setErrorScreenType,X=F.setErrorReason,$=F.setIsHistoryCalled,ee=F.setErrorRetryCount,et=F.clearErrorScreenData,en=n(80454),er=function(e){return e.settings},ei=function(e){return er(e).isChatOpen},ea=function(e){return er(e).isMenuOpen},eo=function(e){return er(e).isHistoryCalled},es=function(e){return er(e).widgetConfig},eu=function(e){return es(e).apiSettings||en.vs},ec=function(e){return er(e).windowBlocked},el=function(e){return es(e).startButtonsConfig},ed=function(e){var t;return null==(t=el(e))?void 0:t.list},ef=function(e){return es(e).authZoneConfig},eg=function(e){return er(e).errorScreen},em=function(e){return eg(e).type},ep=function(e){return eg(e).reason},ev=function(e){return eg(e).retryCount},eh=function(e){var t,n,r=es(e).attachmentsConfig||en.vs,i=e.content.ShowAttachments&&eu(e).isAttachmentsEnabled;return{image:(null==(t=r.settings)?void 0:t.find(function(e){return"Image"===e.type}))||en.vs,file:(null==(n=r.settings)?void 0:n.find(function(e){return"File"===e.type}))||en.vs,isEnabled:i}},ey=function(e){return e.idle="idle",e.loading="loading",e.failed="failed",e.fulfilled="fulfilled",e}({}),eb=n(10467),ew=n(54756),eM=n.n(ew),eA=n(71083),eE=eA.A.create({headers:{"Content-Type":"application/json"}}),eO={request:"/request/1",UAT:"https://api.beeline.ru/mwuat",auth:"/auth/api/commands",gettokenAuthZone:"/login/gettoken"},eI={captcha:{create:"".concat(eO.auth,"/createCaptcha"),validate:"".concat(eO.auth,"/validateCaptcha"),refresh:"".concat(eO.auth,"/refresh")},chat:{history:function(e){return"/api/".concat(e,"/history")}},request:{constructor:"".concat(eO.request,"/constructor")},tokenAuthZone:{gettoken:"".concat(eO.gettokenAuthZone)},file:{sent:"/file/api/commands/upload",download:"/file/api/queries"},UAT:{auth:"".concat(eO.UAT,"/auth/1/auth")}},eC=function(e){return"/api/".concat(e,"/content")},eN=function(e){return e[e.Unknown=0]="Unknown",e[e.Client=1]="Client",e[e.External=2]="External",e[e.Bot=3]="Bot",e[e.Operator=4]="Operator",e}({}),ek=function(e){return e[e.Unknown=0]="Unknown",e[e.Web=1]="Web",e[e.App=2]="App",e}({}),eD=function(e){return e[e.Unknown=0]="Unknown",e[e.Created=1]="Created",e[e.Started=2]="Started",e[e.Enqueued=3]="Enqueued",e[e.Finished=4]="Finished",e}({}),eS=function(e){return e[e.success=1]="success",e[e.error=2]="error",e}({}),eT=function(e){return e[e.sent=1]="sent",e[e.delivered=2]="delivered",e[e.failed=3]="failed",e[e.refresh=4]="refresh",e[e.download=5]="download",e}({}),e_=function(e){return e[e.Unknown=0]="Unknown",e[e.Text=1]="Text",e[e.File=2]="File",e[e.Contact=3]="Contact",e[e.Geolocation=4]="Geolocation",e[e.WIDGET=5]="WIDGET",e[e.CAPTCHA=6]="CAPTCHA",e[e.Button=9]="Button",e[e.FileDoc=10]="FileDoc",e[e.Img=11]="Img",e[e.Link=12]="Link",e}({}),ej={withCredentials:!0},ex=n(77232),eL=n.n(ex),ez=function(e){return e.Ctn="X-Ctn",e.Auth="X-Auth-Token",e.BisToken="X-Bis-Token",e.Environment="X-Api-Environment",e.AuthScheme="X-Auth-Scheme",e.AccessToken="X-Access-Token",e.Scheme="X-Scheme",e.IsWeb="isWeb",e.IdpIdToken="X-IDP-ID-Token",e.OsVersion="X-Mobile-OsVersion",e.PhoneModel="X-Mobile-PhoneModel",e.ConnectionType="X-Mobile-ConnectionType",e.Platform="X-Platform",e.Source="X-Source",e}({}),eP=function(e){return e.BisToken="BisToken",e.BisIdToken="BisToken",e.IdpIdToken="IdpIdToken",e.Captcha="Captcha",e}({}),eR={BisToken:ez.BisToken,IdpIdToken:ez.IdpIdToken,Captcha:ez.AccessToken},eY="__prev_zone_type_key",eU=function(e){return e.android="android",e.ios="ios",e}({}),eB=function(e){return e.android="Webview2",e.ios="Webview1",e}({}),eH=function(){if(navigator){var e,t=null!=(e=navigator.connection)?e:{},n=t.effectiveType;if("wifi"===t.type)return P.Wifi;if("slow-2g"===n)return P.M_2G_EDGE;if("2g"===n)return P.M_2G;if("3g"===n)return P.M_3G;if("4g"===n)return P.M_LTE}return P.Unknown},eV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toLowerCase();return t.includes(eU.android)?eB.android:t.includes(eU.ios)?eB.ios:e},eW=function(){var e={},t=new(eL())().getResult(),n=t.browser,r=t.device,i=t.os,a=eH();return null!=n&&n.name&&(e[ez.Source]=n.name),i.name&&(e[ez.Platform]=eV(i.name)),i.version&&(e[ez.OsVersion]=i.version),(r&&"tablet"===r.type||"mobile"===r.type)&&(e[ez.PhoneModel]="".concat(r.vendor," ").concat(r.model)),a&&(e[ez.ConnectionType]=null==a?void 0:a.toString()),e},eG=function(e){var t=e.token,n=e.authType,r=void 0===n?eP.Captcha:n,i=e.zoneType,a={};if(t&&r){var o=eP[r];a[eR[o]]=t,a["unauthorized"===(void 0===i?"unauthorized":i)?ez.Scheme:ez.AuthScheme]=o}return a},eF=function(e){var t,n=null!=e?e:null==(t=window)||null==(t=t.location)?void 0:t.origin;return{http:"".concat(R.http,"://").concat(n),ws:"".concat(R.websocket,"://").concat(n,"/api/v1/session?channel=").concat(ek.App)}},eQ=function(e){var t=e.baseUrl,n=e.token,r=e.authType,i=void 0===r?eP.Captcha:r,a=e.zoneType,o=new URL(t),s=eW();if(n&&i){var u=eP[i];o.searchParams.append(eR[u],n),o.searchParams.append("unauthorized"===(void 0===a?"unauthorized":a)?ez.Scheme:ez.AuthScheme,u)}return Object.keys(s).forEach(function(e){o.searchParams.append(e,s[e])}),o.searchParams.append(ez.IsWeb,"true"),o.href},eZ=function(e){var t=null!=e?e:{},n=t.status,r=t.data;return t.response,{status:null!=n?n:400,message:null==r?void 0:r.message}},eq=function(e){return eE.get(e,{responseType:"arraybuffer"}).then(function(e){return new Blob([e.data],{type:e.headers["content-type"]})})},eK=(0,L.zD)("session/getHistory",function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu((0,n.getState)()).apiHistoryVersion||"V5",e.next=5,eE.post(eI.chat.history(r),{},{params:{channel:ek.App}});case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),eJ=(0,L.zD)("content/getContent",function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=eu((0,n.getState)()).apiContentVersion||"V2",e.next=5,eE.get(eC(r),{params:{channel:ek.Web}});case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),eX=(0,L.zD)("captcha/validateCaptcha",function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r,i;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,eE.post(eI.captcha.validate,t,ej);case 4:return i=e.sent.data,e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(eZ(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()),e$=(0,L.zD)("captcha/generateCapthca",function(){var e=(0,eb.A)(eM().mark(function e(t){return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eE.post(eI.captcha.create,t,ej);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e0=(0,L.zD)("file/generateFile",function(){var e=(0,eb.A)(eM().mark(function e(t){return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eE.post(eI.file.sent,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e1=n(54011),e4=function(){return new Date().toISOString()},e2=function(e,t){var n=new Date(e).getTime(),r=new Date(t).getTime();return n===r?0:n>r?1:-1},e5=function(e,t){return -1!==e2(e,t)},e3=function(e,t,n){var r=new Date(e).getDay(),i=new Date(t).getDay(),a=new Date(e).getTime(),o=new Date(n).getTime();return+(r!==i&&a===o)},e6=function(e){return e.OutgoingMessage="OutgoingMessage",e.OperationResult="OperationResult",e.SocketConnectionResult="SocketConnectionResult",e.IncomingMessage="IncomingMessage",e}({}),e9=["id"];function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var te=function(e,t){var n=t.id,r=void 0===n?(0,e1.A)():n,i=t.replyId,a=t.messageType,o=void 0===a?e_.Text:a,s=t.value,u=t.link;return{type:e6.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:o,text:e,replyId:i,value:s,link:u},author:{type:eN.Client}}}},tt=function(e,t){var n=t.id,r=void 0===n?(0,e1.A)():n;return{type:e6.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:e_.Img,filePreviewId:e.imagePreviewId,fileId:e.imageId}}}},tn=function(e,t){var n=t.id,r=void 0===n?(0,e1.A)():n;return{type:e6.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:e_.FileDoc,fileId:e}}}},tr=function(e,t,n){var r,i,a,o,s,u,c,l,d,f;return{messageId:null!=(r=t.id)?r:(0,e1.A)(),messageStatus:null!=(i=t.status)?i:eT.sent,date:e4(),message:{type:null!=(a=t.messageType)?a:e_.Text,content:e,replyId:t.replyId,fileUrl:t.messageType===e_.FileDoc?null==n||null==(o=n.fileInfo)?void 0:o.fileUrl:null==n||null==(s=n.imageUrlGroup)?void 0:s.fileUrl,filePreviewUrl:null==n||null==(u=n.imageUrlGroup)?void 0:u.filePreviewUrl,imageSettings:null==n||null==(c=n.imageUrlGroup)?void 0:c.imageSettings,name:null==n||null==(l=n.fileInfo)?void 0:l.name,size:null==n||null==(d=n.fileInfo)?void 0:d.size,chips:t.chips,value:null==t?void 0:t.value},author:{type:null!=(f=t.author)?f:eN.Client},captcha:t.captcha,onlyClient:t.onlyClient}},ti=function(e,t){var n=t.id,r=(0,u.A)(t,e9),i=null!=n?n:(0,e1.A)(),a=tr(e,e7({id:i},r));return{socketMessage:te(e,e7({id:i},r)),historyMessage:a}},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eD.Created,t=arguments.length>1?arguments[1]:void 0,n=t||e4();return{id:"",channel:ek.Web,createdAt:n,updatedAt:n,status:e,messages:[]}},to=function(e){var t,n=e.type===e6.IncomingMessage,r=n?e.data.timestamp:e4(),i=n?eN.Bot:eN.Client;return{historyMessage:{date:r,messageId:(0,e1.A)(),messageStatus:eT.delivered,message:{type:e_.Text,content:e.data.message.text},author:e.data.author||{type:i}},quickReplies:(null==(t=e.data.message)?void 0:t.quickReplies)||[]}},ts=function(e){return{author:{type:eN.Operator},date:new Date().toISOString(),message:{content:e,type:e_.Text},messageId:"mock-operator-message",messageStatus:eT.delivered}},tu="__captcha-access-token",tc="__captcha-bb-history",tl="__captcha_retry_key",td="__captcha_recreate_key",tf="__captcha_blocked_timeout",tg="__captcha_stage_key",tm="__captcha_target",tp="__captcha_active_message_id",tv="__captcha_queued_messages",th="blocked-message",ty="There is no valid cookie in request",tb=function(e,t){if(e){var n=e.filter(function(e){var n=e.messageStatus,r=e.onlyClient;return n===eT.failed||r&&t});sessionStorage.setItem(tc,JSON.stringify(n))}},tw=n(82284),tM=function(e){return e.list.slice(-1)[0]},tA=function(e){var t=e.message.content;return"object"===(0,tw.A)(t)?t.text:t},tE=function(e){return e===e_.Img||e===e_.FileDoc},tO=function(e){var t=e.message.content;return"object"===(0,tw.A)(t)?{fileUrl:null==t?void 0:t.fileUrl,filePreviewUrl:null==t?void 0:t.filePreviewUrl,size:null==t?void 0:t.size,name:null==t?void 0:t.name}:{fileUrl:"",filePreviewUrl:"",size:void 0,name:""}},tI=function(e){return document.querySelector('[data-message-id="'.concat(e,'"]'))},tC=function(e){"function"==typeof e&&e()};function tN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tk=function e(t,n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tN(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);return[].concat((0,p.A)(Object.keys(t)),(0,p.A)(Object.keys(n))).filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(i){var a;(a=n[i])&&"object"===(0,tw.A)(a)&&!Array.isArray(a)?(t[i]||(Object.assign(r,(0,o.A)({},i,{})),Object.assign(t,(0,o.A)({},i,{}))),r[i]=e(t[i],n[i])):void 0!==n[i]&&Object.assign(r,(0,o.A)({},i,n[i]))}),r};function tD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tS=function(e){return!e||e.status===eD.Finished},tT=function(e){var t=tM(e.history);if(t){for(var n,r=t.messages.map(function(e){return e.messageId}),i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=t.messages).push.apply(n,(0,p.A)(a.filter(function(e){return!r.includes(e.messageId)})))}},t_=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=n.list.length>11?n.list.length-11:0,i=n.list.splice(r);return i.forEach(function(e,r){t.forEach(function(t){var n,a=null==(n=i[r+1])?void 0:n.createdAt,o=!a||e5(a,t.date),s=i[r].messages.find(function(e){return e.messageId===t.messageId});e5(t.date,e.createdAt)&&o&&!s&&i[r+e3(t.date,e.createdAt,a)].messages.push(t)}),i[r].messages.sort(function(e,t){return e2(e.date,t.date)}),n.list.push(i[r])}),n},tj=function(e){for(var t=e.list.slice(-2),n=0;n<t.length;n+=1)for(var r=t[n].messages,i=0;i<r.length;i+=1){var a=r[i];a.message.type===e_.Img&&(a.messageStatus=5)}return e},tx=function(e){var t,n=JSON.parse(null!=(t=sessionStorage.getItem(tc))?t:"[]"),r=tj(e);return n&&(null==n?void 0:n.length)!==0?t_(r,n):r},tL=function(e){var t=tM(e.history);null==t||t.messages.sort(function(e,t){return e2(e.date,t.date)})},tz=function(e,t){if(tS(tM(e.history))){var n=ta(void 0,t);e.history.list.push(n)}},tP=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1,r=t.length;r-n>1&&e;){var i,a,o=Math.floor((n+r)/2),s=t[o],u=null==(a=t[o+1])?void 0:a.createdAt,c=e>=s.createdAt&&!u;if(e>=s.createdAt&&u&&e<u||c)return[s,o];e<(null==s?void 0:s.createdAt)?r=o:n=o}return[(null==t||null==(i=t.slice(-1))?void 0:i[0])||{},t.length-1]},tR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=tP(t,e),i=(0,s.A)(r,2),a=i[0],o=i[1],u=null==a?void 0:a.messages.find(function(e){return e.messageId===n});if(!u){var c=e[o+1];return{message:null==c?void 0:c.messages.find(function(e){return e.messageId===n}),currentSession:c}}return{message:u,currentSession:a}},tY=function(e,t){var n=null==t?void 0:t.messages.find(function(t){return t.messageId===e});return!!n&&((null==n?void 0:n.messageStatus)!==eT.delivered&&(n.messageStatus=eT.failed),!0)},tU=["id","date"],tB={history:{count:0,list:[]},resubmitMessages:[],imgStatus:ey.idle,status:ey.idle,unreadedMessages:[],resendMessageId:null,isNoNAuthCaptchaStage:!1,imgPreview:{isImgPreviewOpen:!1,type:null}},tH=(0,L.Z0)({name:"message",initialState:tB,reducers:{addMessage:function(e,t){var n,r;tz(e,null==(n=t.payload)?void 0:n.date),tT(e,t.payload),tb(null==(r=tM(e.history))?void 0:r.messages,e.isNoNAuthCaptchaStage)},addMessages:function(e,t){var n,r;tz(e,null==(n=t.payload)||null==(n=n[0])?void 0:n.date),tT.apply(void 0,[e].concat((0,p.A)(t.payload))),tb(null==(r=tM(e.history))?void 0:r.messages,e.isNoNAuthCaptchaStage)},updateMessageStatus:function(e,t){var n=tM(e.history),r=null==n?void 0:n.messages.find(function(e){return e.messageId===t.payload.id});r&&(r.messageStatus=t.payload.status),tb(null==n?void 0:n.messages,e.isNoNAuthCaptchaStage)},updateMessage:function(e,t){var n=t.payload,r=n.id,i=n.date,a=(0,u.A)(n,tU),o=tR(e.history.list,i,r),s=o.message,c=o.currentSession;s&&(Object.assign(s,tk(s,a)),i&&tL(e)),tb(null==c?void 0:c.messages,e.isNoNAuthCaptchaStage)},deleteMessage:function(e,t){var n=tR(e.history.list,t.payload.date,t.payload.id).currentSession;n&&(n.messages=n.messages.filter(function(e){return e.messageId!==t.payload.id})),tb(null==n?void 0:n.messages,e.isNoNAuthCaptchaStage)},deleteMessageFromPreview:function(e,t){var n=e.history.list.slice(-1)[0];n&&(n.messages=n.messages.filter(function(e){return e.messageId!==t.payload})),e.imgPreview={isImgPreviewOpen:!1,type:null},tb(null==n?void 0:n.messages,e.isNoNAuthCaptchaStage)},setReplyMessage:function(e,t){if(!t.payload){e.replyMessage=void 0;return}for(var n=0;n<e.history.list.length;n+=1)for(var r=e.history.list[n].messages,i=0;i<r.length;i+=1){var a=r[i];if(a.messageId===t.payload){e.replyMessage=a;return}}e.replyMessage=void 0},checkIfMessageSent:function(e,t){var n=t.payload,r=n.date,i=n.messageId,a=tP(r,e.history.list),o=(0,s.A)(a,2),u=o[0],c=o[1],l=function(){e.resubmitMessages=e.resubmitMessages.filter(function(e){return e.messageId!==i})};if(tY(i,u)){tb(null==u?void 0:u.messages,e.isNoNAuthCaptchaStage),l();return}var d=e.history.list[c-1];if(d&&tY(i,d))return void l();tY(i,e.history.list[c+1])?l():e.resubmitMessages.push(n)},setResendMessageId:function(e,t){e.resendMessageId=t.payload},startSession:function(e,t){e.history.list.push(t.payload)},updateSession:function(e,t){var n=tM(e.history);if(n&&(null==n?void 0:n.status)!==eD.Finished){var r=t.payload.data,i=e4();n.id=r.sessionId,n.status=eD.Started,n.updatedAt=i}},updateSessionList:function(e,t){e.history={list:e.history.list.concat(t.payload),count:e.history.count+t.payload.length}},clearErrors:function(e){e.errors=[]},removeUnreadedMessage:function(e,t){e.unreadedMessages=e.unreadedMessages.filter(function(e){return e.messageId!==t.payload})},addUnreadedMessage:function(e,t){e.unreadedMessages.push(t.payload)},clearUnreadedMessages:function(e){e.unreadedMessages=[]},setIsNoNAuthCaptchaStage:function(e,t){e.isNoNAuthCaptchaStage=t.payload},setContext:function(e,t){e.context=t.payload},setStoreImgPreview:function(e,t){e.imgPreview=t.payload},setStatus:function(e,t){e.status=t.payload},setWelcomeMessage:function(e,t){e.welcomeMessage=t.payload}},extraReducers:function(e){e.addCase(eK.fulfilled,function(e,t){var n=tx(t.payload),r=tM(n);if((!r||r.status===eD.Finished)&&e.welcomeMessage){r||n.list.push(ta(eD.Finished));var i=tM(n),a=ts(e.welcomeMessage);i.messages.push(a),i.updatedAt=a.date}e.history=n,e.status=ey.fulfilled}).addCase(eK.rejected,function(e){e.status=ey.failed}).addCase(e0.pending,function(e){e.imgStatus=ey.loading}).addCase(e0.fulfilled,function(e){e.imgStatus=ey.fulfilled}).addCase(e0.rejected,function(e){e.imgStatus=ey.failed})}}),tV=tH.actions,tW=tV.addMessage,tG=tV.addMessages,tF=tV.updateMessage,tQ=tV.updateMessageStatus,tZ=tV.deleteMessage,tq=tV.setReplyMessage,tK=tV.setContext,tJ=tV.setStoreImgPreview,tX=tV.checkIfMessageSent,t$=(tV.setResendMessageId,tV.setWelcomeMessage),t0=(tV.startSession,tV.updateSession),t1=(tV.updateSessionList,tV.clearErrors,tV.setStatus),t4=tV.removeUnreadedMessage,t2=(tV.deleteMessageFromPreview,tV.addUnreadedMessage),t5=tV.clearUnreadedMessages,t3=tV.setIsNoNAuthCaptchaStage,t6=["messengers","isChatOpen","isMenuOpen","onClick","dispatch","children"],t9=(0,E.G)("start-button",{"start-button":"TxmEY"}),t8=(0,O.E)({icons:[I.HGy,I.maM]}),t7=(0,c.forwardRef)(function(e,t){var n=e.messengers,r=void 0===n?[]:n,i=e.isChatOpen,o=e.isMenuOpen,s=e.onClick,d=e.dispatch,f=(e.children,(0,u.A)(e,t6)),g=function(e){return d(q(e))},m=function(e){return d(Q(e))},p=(0,c.useMemo)(function(){if(r.length<=1)return i?"Закрыть чат":"Открыть чат";var e=o?"Закрыть меню":"Открыть меню";return i?"Закрыть чат":e},[o,r,i]);return l().createElement(C.u,{activeIndex:i||o?1:0,"data-t-id":"ui-OpenChat"},l().createElement(x,(0,a.A)({"aria-label":p,className:t9(null),iconLeft:t8,onClick:function(e){i||o?(m(!1),g(!1),d(tJ({isImgPreviewOpen:!1,type:null}))):r.length>1?g(!0):(g(!1),m(!0)),null==s||s(e)},onlyIcon:!0,ref:t,size:"m",tabIndex:0,view:"tertiary"},f,{"data-t-id":"ui-OpenChat"})))}),ne=(0,d.Ng)(function(e){return{isChatOpen:ei(e),isMenuOpen:ea(e),messengers:es(e).messengers}},null,null,{forwardRef:!0})(t7),nt=n(80851),nn=n(55623),nr=n(82109),ni=["isOpen","className","children"],na=(0,E.G)("popover",{popover:"VZ5gJ",popover_animate_entered:"oRhmt",popover_animate_entering:"TzkWd",popover_animate_exiting:"cT14F",popover_animate_exited:"jsTaj"}),no=(0,c.forwardRef)(function(e,t){var n=e.isOpen,r=e.className,i=e.children,o=(0,u.A)(e,ni),s=(0,c.useRef)(null);return l().createElement(nt.Ay,{in:n,nodeRef:s,timeout:300,unmountOnExit:!0,"data-t-id":"ui-Popover"},function(e){return l().createElement(nn.A,(0,a.A)({className:function(t){return na("",{animate:e},["function"==typeof r?r(t):r])},ref:(0,nr.k)([s,t])},o),i)})}),ns=n(4346),nu=n(44133),nc=n(53282),nl=n(47691),nd=function(e){return e.IS_CHAT_CHAT_ENABLED="IS_CHAT_CHAT_ENABLED",e.IS_CHAT_TELEGRAM_ENABLED="IS_CHAT_TELEGRAM_ENABLED",e.IS_CHAT_VK_ENABLED="IS_CHAT_VK_ENABLED",e.IS_CHAT_WHATSAPP_ENABLED="IS_CHAT_WHATSAPP_ENABLED",e.IS_CHAT_OK_ENABLED="IS_CHAT_OK_ENABLED",e}({}),nf=function(e){return e.ios="ios",e}({}),ng={beeline:"beeline",telegram:"telegram",whatsapp:"whatsapp",odnoklassniki:"odnoklassniki",vkontakte:"vkontakte"},nm={IS_CHAT_TELEGRAM_ENABLED:ng.telegram,IS_CHAT_WHATSAPP_ENABLED:ng.whatsapp,IS_CHAT_CHAT_ENABLED:ng.beeline,IS_CHAT_OK_ENABLED:ng.odnoklassniki,IS_CHAT_VK_ENABLED:ng.vkontakte},np=(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},nd.IS_CHAT_CHAT_ENABLED,{tagName:"button",label:"в чате поддержки",icon:nl.zi,attributes:{title:"Написать в чат","aria-label":"Написать в чат"}}),nd.IS_CHAT_OK_ENABLED,{tagName:"a",icon:nl.WY,label:"в Одноклассники",attributes:{title:"Поддержка в Одноклассниках",href:"https://ok.ru/beeline","aria-label":"Поддержка в Одноклассниках"}}),nd.IS_CHAT_VK_ENABLED,{tagName:"a",icon:nl._d,label:"во ВКонтакте",attributes:{title:"Поддержка во ВКонтакте",href:"https://vk.me/beeline","aria-label":"Поддержка во ВКонтакте"}}),nd.IS_CHAT_TELEGRAM_ENABLED,{tagName:"a",icon:nl.mx,label:"в Telegram",attributes:{title:"Поддержка в Telegram",href:"https://t.me/BeelineRussia_bot","aria-label":"Поддержка в Telegram"}}),nd.IS_CHAT_WHATSAPP_ENABLED,{tagName:"a",icon:nl.yC,label:"в WhatsApp",attributes:{title:"Поддержка в WhatsApp","aria-label":"Поддержка в WhatsApp",href:"https://wa.me/79651100611"}}),nv=function(){var e,t=window.location;return{url:"".concat(t.protocol,"//").concat(t.hostname).concat(t.pathname),path:t.pathname,title:(null==(e=document)?void 0:e.title)||""}},nh={WebChatStart:"WebChatStart"},ny={chatIconAction:"chat_icon_action",chatAction:"chat_action",viewItem:"view_item",chatError:"chat_error",click:"click",close:"close",view:"view",error:"error",fill_in:"fill_in"},nb=function(e){return e.az="az",e.nz="nz",e}({}),nw={open:"open",start:"start",hide:"hide"},nM={startTyping:"start_typing",sendMessage:"send_message",tapFaq:"tap_faq",closeChat:"close_chat"},nA={faqViewed:"view_faq"},nE={socketConnectionFailed:"socket_connection_failed",messageNotSent:"message_not_sent"},nO="__is_start_answer_mes",nI=function(){return window.location.href},nC=function(e,t){return function(n){e()&&t(n)}},nN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,z.TV)({name:nO,value:e})};function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nk(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nS=function(){return"function"==typeof window.ym},nT=nC(nS,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.ym(0x18cbfdc,"params",e)}),n_=nC(nS,function(e){window.ym(0x18cbfdc,"reachGoal",e)}),nj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nT({support:e})},nx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nT({chat:e})},nL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nT({chat_attach:e})},nz=function(e,t){return nj((0,o.A)({},ny.chatIconAction,(0,o.A)({},e,t)))},nP=function(){nz(nw.open,nI())},nR=function(){nz(nw.hide,nI())},nY=function(e){nz(nw.start,(0,o.A)({},e,nI()))},nU=function(){nj({screen_view:{chat:nI()}})},nB=function(e,t){return nj((0,o.A)({},ny.chatAction,(0,o.A)({},e,t)))},nH=function(){nB(nM.startTyping,nI())},nV=function(){nB(nM.sendMessage,nI())},nW=function(e){nB(nM.tapFaq,(0,o.A)({},e,nI()))},nG=function(){nB(nM.closeChat,nI())},nF=function(e,t){nj((0,o.A)({},ny.viewItem,(0,o.A)({},e,t)))},nQ=function(e){nF(nA.faqViewed,[].concat((0,p.A)(e.map(function(e){return{faq:e}})),[{URL:nI()}]))},nZ=function(e,t){nj((0,o.A)({},ny.chatError,(0,o.A)({},e,t)))},nq=function(){nZ(nE.socketConnectionFailed,nI())},nK=function(){nZ(nE.messageNotSent,nI())},nJ=function(e){return"authorized"===e?nb.az:nb.nz},nX=function(){var e=nv(),t=e.path;return{page_title:e.title,page_path:t,page_url:e.url}},n$=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"icon",icon_name:"chat",object_type:"floating"}))},n0=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,action_type:ny.close,item_type:"popup",popup_name:"chat"}))},n1=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"popup",popup_name:"chat",object_type:"floating"}))},n4=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"field",field_name:"Ваше сообщение",popup_name:"chat",object_type:"popup"}))},n2=(0,nc.s)(3e3,function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.fill_in,item_type:"field",field_name:"Ваше сообщение",popup_name:"chat",object_type:"popup"}))}),n5=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"widget",widget_title:"ответим везде"}))},n3=function(e,t){nx(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.click,item_type:"element",element_text:"string"==typeof e?np[e]:e.title,widget_title:"ответим везде"}))},n6=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,action_type:ny.error,error_title:"Что-то пошло не так",error_code:null,popup_name:"chat",object_type:"popup"}))},n9=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"icon",icon_name:"error",popup_name:"chat",object_type:"popup"}))},n8=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,action_type:ny.error,item_type:"icon",icon_name:"error",popup_name:"chat",object_type:"popup"}))},n7=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"icon",icon_name:"send",popup_name:"chat",object_type:"popup"}))},re=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"list",list_name:"опции",popup_name:"chat",object_type:"popup"}))},rt=function(e,t){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"element",element_title:t,list_name:"опции"}))},rn=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"step",step:"приветственное сообщение",popup_name:"chat",object_type:"popup"}))},rr=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"element",element_name:"captcha",popup_name:"chat",object_type:"popup"}))},ri=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"step",step:"верный ввод капчи",popup_name:"chat",object_type:"popup"}))},ra=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"step",step:"повторный запрос капчи",popup_name:"chat",object_type:"popup"}))},ro=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,action_type:ny.error,item_type:"step",step:"Неверный ввод капчи",popup_name:"chat",object_type:"popup"}))},rs=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,action_type:ny.error,item_type:"step",step:"трижды неверный ввод капчи",popup_name:"chat",object_type:"popup"}))},ru=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"icon",icon_name:"retry",popup_name:"chat",object_type:"popup"}))},rc=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"step",step:"начало диалога с ботом",popup_name:"chat",object_type:"popup"}))},rl=function(e){nx(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.view,item_type:"step",step:"ответ на запрос",popup_name:"chat",object_type:"popup"}))},rd=function(e,t){nx(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.view,item_type:"message",message_text:e,step:"спасибо за обращение",popup_name:"chat",object_type:"popup"}))},rf=function(e,t){if(e.includes("Спасибо за обращение!"))return void rd(e,t);if("unauthorized"===t){if((0,z.Ri)(nO))return;e.toLowerCase().includes("здравствуйте")?rc(t):rl(t),nN("active")}},rg=function(e){nL(nD(nD({},nX()),{},{account_type:nJ(e),action:ny.click,item_type:"icon",icon_name:"attach"}))},rm=function(e,t){nL(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.click,item_type:"element",element_type:e}))},rp=function(e,t){nL(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.click,item_type:"message",element_type:e}))},rv=function(e,t){nL(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.click,item_type:"icon",icon_type:"send",element_type:e}))},rh=function(e,t){nL(nD(nD({},nX()),{},{account_type:nJ(t),action:ny.click,item_type:"message",action_type:"retry",element_type:e}))},ry=function(e){nL(nD(nD({},nX()),{},{account_type:nb.az,action:ny.click,item_type:"icon",action_type:"reload",element_type:e}))},rb=function(e,t,n){nx(nD(nD({},nX()),{},{account_type:nJ(n),action:ny.click,item_type:"button",button_text:e,block_name:t,popup_name:"chat",object_type:"popup"}))},rw=function(e,t,n){nx(nD(nD({},nX()),{},{account_type:nJ(n),action:ny.view,item_type:"block",button:e,block_name:t,popup_name:"chat",object_type:"popup"}))},rM=d.wA,rA=d.d4;function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rI=function(e){var t=rM(),n=rA(es).authZoneConfig.zoneType;return(0,c.useMemo)(function(){return(e||[]).map(function(e){var r,i="string"==typeof e?e:e.featureToggle,a=rO(rO({},np[i]||{}),{},{key:i,onClick:function(){n3(e,n),("string"==typeof e?e:e.featureToggle)===nd.IS_CHAT_CHAT_ENABLED&&(t(q(!1)),t(Q(!0)))}});return rO(rO({},null!=a?a:{}),"object"===(0,tw.A)(e)?{label:e.title,icon:e.imageUrl?(r=e.imageUrl,(0,nu.Y)({url:r,multiColor:!1,defaultSize:24,ratio:1})):a.icon,attributes:{title:"Поддержка ".concat(e.title),href:e.url||"","aria-label":"Поддержка ".concat(e.title)}}:{})})},[e])};let rC={menu:"eKOKb",menu_view_default:"o0wjG","menu-item":"Bmw3w","menu-item_theme_dark":"YX06z","menu-item_theme_light":"bNX8W","menu-item_view_default":"cDANG","menu-item__avatar":"vGApR","menu-item__icon":"sCkTx"};function rN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rN(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rD=function(e){return e.label},rS=function(e){return e.icon},rT=function(e){return e.onClick},r_=function(e){return e.attributes},rj=function(e){return e.tagName},rx=function(e){return e.isLogo},rL=n(90382),rz=["view","label","icon","isLogo","className","tagName","theme"],rP=(0,E.G)("menu-item",rC),rR=(0,N.B)(function(e,t){var n=e.view,r=void 0===n?"accent":n,i=e.label,o=e.icon,s=e.isLogo,c=e.className,d=e.tagName,f=e.theme,g=void 0===f?"light":f,m=(0,u.A)(e,rz);return l().createElement(void 0===d?"button":d,(0,a.A)({className:rP({view:r,theme:g},[c]),ref:t},m,{"data-t-id":"ui-Menu"}),o&&"accent"===r&&l().createElement(rL.e,(0,a.A)({className:rP("avatar",{logo:s}),size:"l"},s?{logo:o}:{icon:o})),l().createElement(ns.E,{className:rP("label"),color:"light"===g?"primary-invert":"primary",variant:"body-small"},i),o&&"default"===r&&l().createElement(o,{className:rP("icon"),size:"xs"}))}),rY=["className","items","view","getItemAttributes","getItemIcon","getItemLabel","getItemOnClick","getItemIsLogo","getItemTagName","theme","onItemClick"],rU=(0,E.G)("menu",rC),rB=(0,c.forwardRef)(function(e,t){var n=rk(rk({},e),{},{getItemLabel:e.getItemLabel||rD,getItemAttributes:e.getItemAttributes||r_,getItemIcon:e.getItemIcon||rS,getItemOnClick:e.getItemOnClick||rT,getItemIsLogo:e.getItemIsLogo||rx,getItemTagName:e.getItemTagName||rj}),r=n.className,i=n.items,o=n.view,s=void 0===o?"accent":o,c=n.getItemAttributes,d=n.getItemIcon,g=n.getItemLabel,m=n.getItemOnClick,p=n.getItemIsLogo,v=n.getItemTagName,h=n.theme,y=void 0===h?"light":h,b=(n.onItemClick,(0,u.A)(n,rY));return l().createElement("ul",(0,a.A)({className:rU({view:s},[r,(0,f.HL)(y)]),ref:t},b,{"data-t-id":"ui-Menu"}),i.map(function(e){var t;return l().createElement("li",{className:rU("item"),key:g(e)},l().createElement(rR,(0,a.A)({},null!=(t=c(e))?t:{},{icon:d(e),isLogo:p(e),label:g(e),onClick:m(e),tagName:v(e),theme:y,view:s})))}))}),rH=n(68238),rV=n(67847),rW=["setIsChatOpen","setIsMenuOpen","isMenuOpen","messengers"],rG=b("btn-back-menu",{"btn-back-menu":"aDDuT"}),rF=(0,rH.Zz)((0,d.Ng)(function(e){return{isMenuOpen:ea(e),messengers:es(e).messengers}},function(e){return{setIsChatOpen:function(t){return e(Q(t))},setIsMenuOpen:function(t){return e(q(t))}}}),rV.t)(function(e){var t=e.setIsChatOpen,n=e.setIsMenuOpen,r=e.isMenuOpen,i=e.messengers,o=void 0===i?[]:i,s=(0,u.A)(e,rW),c=(0,g.Eo)();return l().createElement(x,(0,a.A)({},s,{className:rG(null),iconLeft:c||(null==o?void 0:o.length)<2?I.maM:I.gu7,onClick:function(){t(!1),n(!r&&o.length>1)},onlyIcon:!0,size:"m",view:"tertiary-invert","data-t-id":"ui-BackMenu"}))}),rQ=["messengers","title","className"],rZ=(0,E.G)("menu-list",{"menu-list":"mwV5j","menu-list__title":"dVJC0"}),rq=(0,c.forwardRef)(function(e,t){var n=e.messengers,r=e.title,i=e.className,o=(0,u.A)(e,rQ),s=rI(n),c=(0,g.Eo)();return l().createElement("div",(0,a.A)({className:rZ(null,[i]),ref:t},o,{"data-t-id":"ui-MenuList"}),l().createElement(ns.E,{align:"left",className:rZ("title"),color:"primary-invert",variant:"body-large"},l().createElement(rF,{shouldRender:c,"data-t-id":"ui-MenuList"}),void 0===r?"":r),l().createElement(rB,{items:s}))}),rK=function(e){var t=tM(e),n=(null==t?void 0:t.messages)||[];if(!(null!=n&&n.length))return[];var r=n.slice(-1)[0];return r.author.type===eN.Client?[]:"object"===(0,tw.A)(r.message.content)&&r.message.content.quickReplies||[]},rJ=(0,L.Z0)({name:"content",initialState:{FeatureTogglesWeb:null,FrequentQuestions:null,TextMainScreen:null,SystemProblemInternet:null,ShowAttachments:!1,filterNotificationChat:null,quickReplies:[],imageUrlGroup:null,dynamicFormHeight:"auto"},reducers:{addQuickReplies:function(e,t){e.quickReplies=t.payload||[]},addStoreImageUrlGroup:function(e,t){e.imageUrlGroup=t.payload},addStoreDynamicFormHeight:function(e,t){e.dynamicFormHeight=t.payload}},extraReducers:function(e){e.addCase(eJ.fulfilled,function(e,t){var n=t.payload.data,r=n.FeatureTogglesWeb,i=n.FrequentQuestions,a=n.filterNotificationChat,o=n.SystemProblemInternet,s=n.TextMainScreen,u=n.ShowAttachments;e.FeatureTogglesWeb=r,e.FrequentQuestions=i,e.filterNotificationChat=a,e.SystemProblemInternet=o,e.TextMainScreen=s,e.ShowAttachments=u}).addCase(eK.fulfilled,function(e,t){e.quickReplies=rK(t.payload)})}}),rX=rJ.actions,r$=rX.addQuickReplies,r0=rX.addStoreImageUrlGroup,r1=rX.addStoreDynamicFormHeight,r4=n(7350),r2=n.n(r4),r5=function(e,t){var n=(0,c.useRef)();(0,c.useEffect)(function(){e?(nU(),n1(t),n.current=!0):n.current&&(nG(),n0(t))},[e])},r3=function(e){var t=e.isChatOpen,n=e.isMenuOpen,r=e.messengers,i=void 0===r?[]:r,a=e.zoneType,o=(0,c.useRef)();(0,c.useEffect)(function(){i.length>1&&(n?(n5(a),nP(),n$(a),o.current=!0):o.current&&nR())},[i,n]),(0,c.useEffect)(function(){(null==i?void 0:i.length)===1&&t&&(nP(),n$(a),nY(nm["string"==typeof i[0]?i[0]:i[0].featureToggle]))},[i,t])},r6=function(){var e=(0,c.useState)([]),t=(0,s.A)(e,2),n=t[0],r=t[1],i=(0,c.useCallback)(function(e,t){r(function(n){return t?[].concat((0,p.A)(n),[e]):n.filter(function(t){return t!==e})})},[]),a=r2()(function(e){nQ(e)},1e3),o=(0,c.useCallback)(a,[]);return(0,c.useEffect)(function(){n.length&&o(n)},[n]),i},r9=function(e){r3(e),r5(e.isChatOpen,e.zoneType)},r8=function(e){var t=window.location,n=t.search,r=t.pathname,i=new URLSearchParams(window.location.search.slice(1,n.length));i.delete(e),window.history.pushState({},document.title,i.size?"".concat(r,"?").concat(i.toString()):r)},r7=function(e){return e.idle="idle",e.open="open",e.closed="closed",e.connecting="connecting",e}({}),ie=function(e){return e.messageSent="Message sent successfully.",e.fileMessageSent="File is healthy",e.sessionInitialized="Session successfully initialized.",e}({}),it=function(e){return e.socket},ir=function(e){return it(e).reconnectCount},ii=function(e){return it(e).socketStatus===r7.open},ia=function(e){return e.IDLE="idle",e.LOAD_DATA="load_data",e.CONNECTING="connecting",e.ACTIVE="active",e.RECONNECT="reconnect",e.CAPTCHA_NEEDED="captcha_needed",e.BLOCKED="blocked",e.ERROR="error",e}({}),io=n(73706),is=n(82134),iu=function(e,t,n){var r=null!=n?n:{},i=r.active,a=void 0===i||i,o=r.target,s=void 0===o?window:o,u=(0,io.V)(t);(0,c.useEffect)(function(){var t=function(e){return u.current(e)},n=s&&"current"in s?s.current:s;return n&&a&&(null==n||n.addEventListener(e,t)),function(){null==n||n.removeEventListener(e,t)}},[e,a,s])},ic=function(){var e,t="boolean"==typeof(null==(e=navigator)?void 0:e.onLine),n=(0,is._)(!t||navigator.onLine),r=(0,s.A)(n,2),i=r[0],a=r[1],o=function(){t&&a.set(navigator.onLine)};return iu("online",o,{active:t}),iu("offline",o,{active:t}),i},il=function(e){var t=e.stage,n=e.newStage,r=e.authZone,i=e.isOpen,a=e.blockTime;return(n===ia.BLOCKED||n===ia.CAPTCHA_NEEDED)&&"authorized"===r||t===ia.BLOCKED&&a&&new Date().getTime()<Number(a)&&"unauthorized"===r||!i&&n!==ia.IDLE},id=function(e){var t=e.onActivate,n=e.onReached,r=e.zoneType,i=(0,c.useRef)(),a=function(){null==n||n(),(0,z.Yj)(tf)},o=function(e){var n=e.timeout,r=e.withSetCookie;n&&(null==t||t(),(void 0===r||r)&&(0,z.TV)({name:tf,value:(new Date().getTime()+n).toString(),maxAge:n}),clearTimeout(i.current),i.current=setTimeout(a,n))};return(0,c.useEffect)(function(){var e=Number((0,z.Ri)(tf)),t=new Date().getTime();if(e&&"unauthorized"===r&&t<e)return void o({timeout:e-t});e<=t&&a()},[r]),(0,c.useEffect)(function(){return function(){return clearTimeout(i.current)}},[]),o},ig=function(e){var t=e.blockedTimeout,n=void 0===t?12e5:t,r=e.isOpen,i=e.zoneType,a=e.baseUrl,o=(0,c.useState)(ia.IDLE),u=(0,s.A)(o,2),l=u[0],d=u[1],f=(0,io.V)(l),g=(0,c.useRef)({}),m=(0,io.V)(r),p=ic(),v=id({onReached:function(){d(ia.CAPTCHA_NEEDED),Object.keys(g.current).forEach(function(e){g.current[e]()})},onActivate:function(){d(ia.BLOCKED),f.current=ia.BLOCKED},zoneType:i}),h=(0,c.useCallback)(function(e){var t=(0,z.Ri)(tf)||"";return il({stage:f.current,newStage:e,authZone:i,blockTime:t,isOpen:m.current})?{status:"error"}:(e===ia.CAPTCHA_NEEDED&&nN(),e===ia.BLOCKED&&v({timeout:n}),d(e),{status:"ok"})},[l,n]),y=(0,c.useMemo)(function(){return{blockedTimeout:n}},[n]);return(0,c.useEffect)(function(){return p?r?a?"authorized"===i||(0,z.Ri)(tu)?void h(ia.LOAD_DATA):void h(ia.CAPTCHA_NEEDED):void h(ia.ERROR):void h(ia.IDLE):void d(ia.ERROR)},[i,r]),{stage:l,changeStage:h,options:y,addReachedHandler:function(e,t){g.current[e]=t}}},im=["children"],ip=(0,c.createContext)({stage:ia.IDLE,changeStage:function(){return{status:"ok"}},options:{blockedTimeout:12e5},addReachedHandler:function(){}}),iv=function(e){var t=e.children,n=ig((0,u.A)(e,im));return l().createElement(ip.Provider,{value:n},t)},ih=function(){return(0,c.useContext)(ip)};function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ib="CHAT_WIDGET_EVENT_CHAT",iw="CHAT_WIDGET_EVENT_MENU",iM="CHAT_SEND_MESSAGE_EVENT",iA=function(e){return function(t,n){var r=new CustomEvent("menu"===e?iw:ib,{detail:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({flag:t},n||{})});window.dispatchEvent(r)}};iA("chat"),iA("menu");var iE=function(){var e=(0,c.useState)(),t=(0,s.A)(e,2),n=t[0],r=t[1],i=rA(es).authZoneConfig.zoneType,a=(0,c.useRef)(!1),o=ih().stage,u=rA(ii),l=rA(ei);return(0,c.useEffect)(function(){n&&l&&("unauthorized"===i?o===ia.CAPTCHA_NEEDED:u)&&!a.current&&(window.dispatchEvent(new CustomEvent(iM,{detail:n})),a.current=!0,nV())},[u,l,n,o]),r};function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iC="is_chat_open",iN="initial_message",ik=function(e){var t={isChatOpen:!0,initialMessage:!0};return"boolean"==typeof e?e?t:{}:iI(iI({},t),e)},iD=function(e,t){return("boolean"==typeof e?e:ik(e)[t])===!0},iS=function(){var e={};return new URLSearchParams(window.location.search).forEach(function(t,n){e[n]=t}),e},iT=function(e){var t=(0,c.useState)({}),n=(0,s.A)(t,2),r=n[0],i=n[1],a=(0,c.useCallback)(function(){i(iS())},[]);return(0,c.useEffect)(function(){if(e&&window){a(),window.addEventListener("popstate",a);var t=window.history.pushState;window.history.pushState=function(){a();for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.call.apply(t,[window.history].concat(n))}}return function(){var e;null==(e=window)||e.removeEventListener("popstate",a)}},[e]),(0,c.useMemo)(function(){return{queries:r}},[r])},i_=function(e){var t=iD(e,"isChatOpen"),n=ik(e),r=rM(),i=iT(t).queries;(0,c.useEffect)(function(){i[iC]&&n.isChatOpen&&t&&r(Q("true"===i[iC]))},[t,JSON.stringify(i),JSON.stringify(n)])},ij=function(e){var t=iD(e,"initialMessage"),n=ik(e),r=iT(t).queries,i=iE();(0,c.useEffect)(function(){r[iN]&&n.initialMessage&&t&&(i(r[iN]),r8(iN))},[t,JSON.stringify(r),JSON.stringify(n)])};let ix={"chat-widget__wrapper":"dTj3h","chat-widget__button":"o1U1Q","chat-widget__overlay":"ptwP2","chat-widget__overlay_isOpen":"FxaRt","chat-widget__window":"aQ1QM","chat-widget__window_view_block":"bMvz3","chat-widget__content":"hM3Db","chat-widget__content_view_block":"GuxVg"};var iL=n(20537),iz=n(82279),iP=n(23197),iR=function(e){var t=e.loadingStatus,n=e.isHistoryEmpty,r=e.zoneType,i=(0,c.useRef)(null),a=(0,c.useRef)(null),o=(0,iP.K)(i).height,u=(0,iP.K)(a).height,l=ih().stage,d=ic(),f=(0,is._)(),g=(0,s.A)(f,2),m=g[0],p=g[1],v=(0,is._)(),h=(0,s.A)(v,2),y=h[0],b=h[1],w=(0,c.useRef)(!1),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth",n=function(){var e,n;return null==(e=a.current)?void 0:e.scrollTo({top:(null==(n=a.current)?void 0:n.scrollHeight)||0,behavior:t})};"number"==typeof e?setTimeout(n,e):n()};return iu("scroll",(0,c.useCallback)(function(e){if(w.current){var t=e.currentTarget;setTimeout(function(){t.scrollTop<t.scrollHeight-1.5*t.offsetHeight?b.on():b.off()},500)}},[]),{target:a,active:m}),(0,c.useLayoutEffect)(function(){var e=t===ey.fulfilled||t===ey.failed;("authorized"===r&&e||"unauthorized"===r&&(l!==ia.ACTIVE||e)||!d)&&M(0,"auto")},[t,l]),(0,c.useEffect)(function(){w.current=t!==ey.loading&&!n},[t,n]),(0,c.useEffect)(function(){d&&p.off()},[]),{isScrollButtonVisible:y,scrollToBottom:M,onListMount:p.on,containerRef:i,scrollRef:a,scrollToInnerNode:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:52;e&&(null==(t=a.current)||t.scrollTo({top:e.offsetTop-n,behavior:"smooth"}))},scrollHeight:u,containerHeight:o}},iY=["children"],iU=(0,c.createContext)({scrollToBottom:function(){},containerRef:{current:null},isScrollButtonVisible:!1,scrollRef:{current:null},containerHeight:0,scrollHeight:0,scrollToInnerNode:function(){},onListMount:function(){}}),iB=function(e){var t=e.children,n=iR((0,u.A)(e,iY));return l().createElement(iU.Provider,{value:n},t)},iH=function(){return(0,c.useContext)(iU)},iV=function(e,t){var n;return!!(null!=(n=tA(e))&&n.toLowerCase().includes(t))},iW=function(e){var t=e.sessions,n=e.search,r=e.sortType;return(0,c.useMemo)(function(){var e=[];return t.forEach(function(t){n&&e.push.apply(e,(0,p.A)(t.messages.filter(function(e){return iV(e,n)})))}),{sessions:t,includedIds:e.sort(function(e,t){return e.date>t.date?1:-1}).map(function(e){return e.messageId.toString()}).reverse()}},[void 0===r?"none":r,n,t])},iG=["children"],iF=(0,c.createContext)({sessions:[],includedIds:[]}),iQ=function(e){var t=e.children,n=iW((0,u.A)(e,iG)),r=n.sessions,i=n.includedIds,a=(0,c.useMemo)(function(){return{includedIds:i,sessions:r}},[r,i]);return l().createElement(iF.Provider,{value:a},t)},iZ=function(){return(0,c.useContext)(iF)},iq=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],iK=function(e){if(!e)return null;var t,n,r=null!=(t=null==(n=window)?void 0:n.getComputedStyle(e))?t:{},i=iq.reduce(function(e,t){return e[t]=r[t],e},{});if(""===i.boxSizing)return null;var a={vertical:parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),horizontal:parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)},o={vertical:parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth),horizontal:parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth)};return{sizingStyle:i,paddingSize:a,borderSize:o}},iJ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},iX=function(e){Object.keys(iJ).forEach(function(t){e.style.setProperty(t,iJ[t],"important")})},i$=function(e,t){if(t)return t;var n,r=e.current,i=document.createElement("textarea");return i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),null==r||null==(n=r.parentNode)||n.appendChild(i),iX(i),i},i0=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=t.paddingSize,o=t.sizingStyle;Object.keys(o).forEach(function(t){e.style[t]=o[t]}),iX(e),e.value=n;var s=e.scrollHeight;e.value="x";var u=t.sizingStyle.lineHeight?parseFloat(t.sizingStyle.lineHeight):e.scrollHeight-a.vertical,c=u*r+("border-box"===o.boxSizing?a.vertical:0),l=u*i+("border-box"===o.boxSizing?a.vertical:0);return{height:Math.min(l,Math.max(c,s)),isOverflow:s>l}},i1=function(e){var t,n="onfocusin"in e?"focusin":"focus",r="onfocusin"in e;"createEvent"in document?(t=document.createEvent("Event")).initEvent(n,r,!0):"Event"in window&&(t=new Event(n,{bubbles:r,cancelable:!0})),e.focus(),t&&e.dispatchEvent(t)},i4=function(e){var t=e.minRows,n=e.maxRows,r=e.onChange,i=e.value,a=e.autoFocus,o=(0,c.useRef)(0),s=(0,c.useRef)(null),u=(0,iP.K)(s).width,l=(0,c.useRef)(null),d=function(){var e,r,i,a,u,c=iK(s.current);if(c){var d=i$(s,l.current);l.current||(l.current=d);var f=i0(d,c,(null==(e=s.current)?void 0:e.value)||(null==(r=s.current)?void 0:r.placeholder)||"x",t,n),g=f.height;f.isOverflow?null==(i=s.current)||i.style.removeProperty("overflow"):null==(a=s.current)||a.style.setProperty("overflow","hidden","important"),o.current!==g&&(o.current=g,null==(u=s.current)||u.style.setProperty("height","".concat(g,"px"),"important"))}};return(0,c.useEffect)(d,[s,n,t,i,u]),iu("resize",d),iu("loadingdone",d,{target:document.fonts}),(0,c.useEffect)(function(){a&&setTimeout(function(){s.current&&i1(s.current)},200)},[a]),{textAreaRef:s,onChange:function(e){void 0===i&&d(),null==r||r(e.target.value,e)}}},i2=["className","maxRows","minRows","onChange","status","value","rightSide","placeholder"],i5=b("text-area",{"text-area":"JVZgK","text-area_withSide":"K0RH1","text-area__field":"eoPbw","text-area__field_withSide":"aCBRz","text-area__side":"kAkGs"}),i3=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.maxRows,i=e.minRows,o=e.onChange,s=e.status,c=e.value,d=e.rightSide,f=e.placeholder,g=(0,u.A)(e,i2),m=i4({minRows:void 0===i?1:i,maxRows:r,onChange:o,value:c,autoFocus:null==g?void 0:g.autoFocus}),p=m.onChange,v=m.textAreaRef;return l().createElement("div",{className:i5({withSide:!!d},[n]),"data-t-id":"ui-TextArea"},l().createElement("textarea",(0,a.A)({className:i5("field",{status:s,withSide:!!d}),onChange:p,placeholder:f,ref:(0,nr.k)([t,v]),value:c},g)),!!d&&l().createElement("div",{className:i5("side")},d))}),i6=n(22325),i9=function(e){return e.upload="upload",e.show="show",e}({}),i8=function(e){return e.message},i7=function(e){return i8(e).history},ae=function(e){return i7(e).list},at=function(e){return tM(i8(e).history)},an=function(e){return tS(at(e))},ar=function(e){return i8(e).resubmitMessages},ai=function(e){var t,n=an(e),r=!(null!=(t=ae(e))&&t.length);return n||r},aa=function(e){return i8(e).status},ao=function(e){return aa(e)===ey.loading},as=function(e){return i8(e).replyMessage},au=function(e){return i8(e).unreadedMessages},ac=function(e){return i8(e).imgPreview},al=function(e){return ac(e).isImgPreviewOpen},ad=function(e){return ac(e).type},af=function(e){return ad(e)===i9.show},ag=function(e){return ad(e)===i9.upload},am=(0,i6.Mz)([al,ag],function(e,t){return e&&t}),ap=function(e){return i8(e).context},av=function(e){return e.filters},ah=function(e){return av(e).sortType},ay=function(e){return av(e).search},ab=function(e){return av(e).isFiltersVisible},aw=function(e){return e.imgPreview="подпись",e.textMessage="напишите, чем вам помочь",e}({}),aM=function(e){return"string"==typeof e?e:"number"==typeof e?e.toString():"boolean"==typeof e?e?"true":"false":void 0===e?"undefined":null===e?"null":JSON.stringify(e)},aA=function(e){var t;if("true"===e)t=!0;else if("false"===e)t=!1;else{if("null"===e)return null;t="undefined"===e?void 0:/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(e.replace(/"(\\.|[^"\\])*"/g,""))?/^-?\d+\.?\d*$/.test(e)?Number(e):e:JSON.parse(e)}return t},aE=function(e,t){var n=t||{},r=n.defaultValue,i=n.stateToStore,a=n.storeToState,o=(0,c.useState)(r),u=(0,s.A)(o,2),l=u[0],d=u[1];return(0,c.useEffect)(function(){var t=sessionStorage.getItem(e),n=t?(a||aA)(t):r;d(null!=n?n:void 0)},[]),(0,c.useEffect)(function(){sessionStorage.setItem(e,(i||aM)(l))},[l]),[l,d]},aO=function(){var e=(0,eb.A)(eM().mark(function e(t){var n,r,i;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,createImageBitmap(t);case 2:return r=(n=e.sent).width,i=n.height,n.close(),e.abrupt("return",{width:r,height:i,ratio:r/i});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),aI=["children"],aC=(0,c.createContext)({resendMessage:function(){},sendMessage:function(){},sendImgMessage:function(){},sendFileMessage:function(){},resendImageMessage:function(){}}),aN=function(e){var t=e.children,n=(0,u.A)(e,aI);return l().createElement(aC.Provider,{value:n},t)},ak=function(){return(0,c.useContext)(aC)},aD=function(e){return e.bee="bee",e.drake="drake",e.fluffy="fluffy",e.panda="panda",e}({});aD.bee;var aS={image:"image/*",file:".doc,.docx"},aT=function(e){return e.IMAGE="фото",e.FIlE="файл",e}({});function a_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var aj=function(e,t){switch(t.type){case"add":var n,r,i=e.find(function(e){return e.key===t.item.key});if(i)return null==(n=i.resetTimer)||n.call(i),null==(r=i.startTimer)||r.call(i),e;return[].concat((0,p.A)(e),[function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a_(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({autoClose:3e3},t.item)]);case"remove":return e.filter(function(e){return e.key!==t.key});case"update":var a=e.findIndex(function(e){return e.key===t.item.key});return a>=0&&(e[a]=Object.assign(e[a],t.item)),e;case"clear":return[];default:return e}},ax=(0,c.createContext)({notifications:[],addNotification:function(){},clearNotifications:function(){},getNotificationQueue:function(){return[]},removeNotification:function(){},updateNotification:function(){}}),aL=function(){return(0,c.useContext)(ax)},az=function(e){var t=e.children,n=e.initialNotifications,r=(0,c.useReducer)(aj,void 0===n?[]:n),i=(0,s.A)(r,2),a=i[0],o=i[1],u=function(){return o({type:"clear"})},d=function(e){return o({type:"add",item:e})},f=function(){return a},g=function(e){return o({type:"remove",key:e})},m=function(e){return o({type:"update",item:e})},p=(0,c.useMemo)(function(){return{notifications:a,clearNotifications:u,removeNotification:g,updateNotification:m,getNotificationQueue:f,addNotification:d}},[a]);return l().createElement(ax.Provider,{value:p},t)},aP="system_problem_internet",aR="chars_limit",aY=function(e){return e.content},aU=function(e){var t;return null==(t=aY(e))?void 0:t.SystemProblemInternet},aB=function(e){var t;return null==(t=aY(e))||null==(t=t.TextMainScreen)?void 0:t.content},aH=function(e){var t;return(null==(t=aY(e))||null==(t=t.FrequentQuestions)?void 0:t.content)||[]},aV=function(e){var t;return!!(null!=(t=aH(e))&&t.length)},aW=function(e){return aY(e).imageUrlGroup},aG=n(23807),aF=n.n(aG),aQ=function(e,t){return new Promise(function(n,r){new(aF())(e,{quality:t,success:n,error:r})}).then(function(e){return e}).catch(function(e){throw Error(e.message)})},aZ={"300Kb":3e5,"3Mb":3e6,"4Mb":4e6,"5Mb":5e6,"8Mb":8e6,"9Mb":9e6},aq=function(e){if(e){if(e<=aZ["4Mb"])return{preview:.4,original:.8};if(e<=aZ["8Mb"])return{preview:.2,original:.8};if(e<=aZ["9Mb"])return{preview:.2,original:.6}}return null},aK=function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r,i,a,o;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(r=aq(null==t?void 0:t.size))||!t)){e.next=3;break}return e.abrupt("return",null);case 3:if(null==n||n(),!(t.size<=aZ["300Kb"])){e.next=6;break}return e.abrupt("return",{image:t,imagePreview:t});case 6:if(!(t.size<=aZ["3Mb"])){e.next=11;break}return e.next=9,aQ(t,.8);case 9:return i=e.sent,e.abrupt("return",{image:t,imagePreview:i});case 11:return e.next=13,aQ(t,r.preview);case 13:return a=e.sent,e.next=16,aQ(t,r.original);case 16:return o=e.sent,e.abrupt("return",{image:o,imagePreview:a});case 18:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),aJ=function(e,t){if(!e.current)return null;var n=".".concat(e.current.value.split(".").pop()).toLowerCase();return t.includes(n)},aX=function(){var e,t,n=/iP(ad|od|hone)/i.test(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent),r=!!(null!=(t=window)&&null!=(t=t.navigator)&&null!=(t=t.userAgent)&&t.match(/Version\/[\d.]+.*Safari/));return n&&r},a$=function(){var e=(0,c.useRef)([]),t=aX(),n=(0,c.useRef)(null),r=function(t){var n;null==(n=e.current)||n.forEach(function(e){e.disabled=t})},i=function(){if(t){e.current=[];for(var i=document.querySelectorAll("input,select,textarea"),a=0;a<i.length;a+=1){var o=i.item(a);o.isEqualNode(n.current)||e.current.push(o)}r(!0)}};return(0,c.useEffect)(function(){return i(),function(){return r(!1)}},[t]),{inputRef:n,onFocus:function(){i()},onBlur:function(){r(!1)}}},a0=function(){var e,t,n,r,i=rM(),a=aE("chatCurrentMessage",{storeToState:function(e){return e},stateToStore:function(e){return e||""}}),o=(0,s.A)(a,2),u=o[0],l=o[1],d=(0,c.useState)(),f=(0,s.A)(d,2),g=f[0],m=f[1],p=rA(ao),v=rA(as),h=rA(es),y=h.charsLimit,b=h.authZoneConfig.zoneType,w=rA(am),M=rA(aW),A=ak(),E=A.sendMessage,O=A.sendImgMessage,I=iH().scrollToBottom,C=ih().stage===ia.BLOCKED,N=!w&&(!(u&&(null==u||null==(r=u.trim)?void 0:r.call(u))!=="")||p||C),k=aL(),D=k.addNotification,S=k.removeNotification,T=k.getNotificationQueue,_=a$(),j=_.inputRef,x=_.onFocus,L=_.onBlur,z=(0,c.useRef)(null),P=(e=(0,eb.A)(eM().mark(function e(){var t,n,r,a,o,s,u,c;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null==(t=z.current)?void 0:t.files)){e.next=17;break}return r=n[0],a=function(){return i(tJ({isImgPreviewOpen:!0,type:i9.upload}))},e.next=6,aK(r,a);case 6:if(o=e.sent){e.next=10;break}return D({key:"bigSize",label:"большой размер фото",subTitle:"попробуйте загрузить другое",view:"error"}),e.abrupt("return");case 10:return s=URL.createObjectURL(o.image),u=URL.createObjectURL(o.imagePreview),e.next=14,aO(r);case 14:c=e.sent,i(r0({fileUrl:s,filePreviewUrl:u,imageSettings:c})),m({image:o.image,imagePreview:o.imagePreview,imageSettings:c});case 17:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),R=(t=(0,eb.A)(eM().mark(function e(t){var n,r,a,o,s;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null==(n=j.current)||n.focus(),!(g&&M)){e.next=18;break}return r=new FormData,a=new FormData,r.append("file",g.image),a.append("file",g.imagePreview),o=tr("",{status:eT.sent,messageType:e_.Img},{imageUrlGroup:M}),i(r$([])),i(tW(o)),u&&i(tW(s=tr(u,{status:eT.sent,messageType:e_.Text}))),i(tJ({isImgPreviewOpen:!1,type:i9.upload})),i(r0(null)),m(null),l(""),I(0),e.next=18,Promise.all([i(e0(r)),i(e0(a))]).then(function(e){var t;O({imageId:e[0].payload.id,imagePreviewId:e[1].payload.id,imageSettings:g.imageSettings},o.messageId,u,null==(t=s)?void 0:t.messageId),rv(aT.IMAGE,b)}).catch(function(){i(tQ({id:o.messageId,status:eT.failed})),u&&i(tQ({id:s.messageId,status:eT.failed}))});case 18:u&&!M&&(E(u,null==v?void 0:v.messageId,function(){return l("")}),nV());case 19:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),Y=function(e){l(e.slice(0,y)),n2(b);var t=function(){e.length<=y?S(aR):D({key:aR,label:"Ваш текст не может превышать ".concat(y," символов")})};T().find(function(e){return e.key===aP})?setTimeout(function(){S(aP),t()},3e3):t()},U=(n=(0,eb.A)(eM().mark(function e(t){return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("Enter"===t.key&&!t.shiftKey&&!N)){e.next=3;break}return e.next=3,R(t);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),B=function(){nH(),n4(b),x()},H=function(){L()};return(0,c.useEffect)(function(){C&&l("")},[C]),{params:(0,c.useMemo)(function(){return{attachmentProps:{imageRef:z,onImageChange:P,disabled:C},inputProps:{maxRows:5,minRows:1,onBlur:H,onFocus:B,onChange:Y,onKeyPress:U,ref:j,value:u,disabled:C},buttonProps:{disabled:N,onClick:R,type:"submit"}}},[u,p,v,N,C,M,g]),isSubmitDisabled:N,inputRef:j}},a1=n(70025);function a4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a2=function(e){var t=(0,a1.Eo)(),n=t?36:28,r=(0,c.useState)(t?80:72),i=(0,s.A)(r,2),a=i[0],o=i[1],u=(0,iP.K)(e).height,l=aE("chatCurrentMessage",{storeToState:function(e){return e},stateToStore:function(e){return e||""}}),d=(0,s.A)(l,1)[0],f=rA(ab);return(0,c.useEffect)(function(){if(e.current){var t=new ResizeObserver(function(e){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a4(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a4(e,t):void 0}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.contentRect.height+24+n;o(i)}}catch(e){r.e(e)}finally{r.f()}});return t.observe(e.current),function(){t.disconnect()}}},[]),(0,c.useEffect)(function(){f&&!d&&o(0)},[u,f]),a};function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var a6=function(e){return e.label},a9=function(e){return e.icon},a8=function(e){return e.onClick},a7=function(e){return e.tagName},oe=function(e){return e.attributes},ot=function(e){var t,n,r,i,a;return a3(a3({},e),{},{getItemLabel:null!=(t=e.getItemLabel)?t:a6,getItemIcon:null!=(n=e.getItemIcon)?n:a9,getItemOnClick:null!=(r=e.getItemOnClick)?r:a8,getItemTagName:null!=(i=e.getItemTagName)?i:a7,getItemAttributes:null!=(a=e.getItemAttributes)?a:oe})},on=["tagName","className","label","active","icon","proportional"],or=b("context-menu-item",{"context-menu-item":"GRnCd","context-menu-item_active":"IvYPe","context-menu-item__text":"GfAp2","context-menu-item_proportional":"yUCTz"}),oi=(0,N.B)(function(e,t){var n=e.tagName,r=e.className,i=e.label,o=e.active,s=e.icon,c=e.proportional,d=(0,u.A)(e,on);return l().createElement(void 0===n?"button":n,(0,a.A)({className:or({active:o,proportional:c},[r]),ref:t},d,{"data-t-id":"ContextMenu-ContextMenuItem"}),s&&l().createElement(rL.e,{icon:s}),l().createElement(ns.E,{align:"left",className:or("text"),variant:"body-small"},i))}),oa=n(58198),oo=["ArrowDown","ArrowUp","Space","Enter","Escape"],os=function(e){var t=e.items,n=e.onEsc,r=e.isOpen,i=e.anchorRef,a=(0,c.useState)(-1),o=(0,s.A)(a,2),u=o[0],l=o[1],d=(0,c.useRef)(null),f=(0,oa.l)(t.length);return(0,c.useEffect)(function(){l(-1),setTimeout(function(){var e;return null==(e=d.current)?void 0:e.focus()},600)},[r]),{refs:f,activeIndex:u,onKeyDown:function(e){var r,a,o=e.code;oo.includes(o)&&(e.preventDefault(),e.stopPropagation(),"ArrowUp"===o&&l(Math.max(u-1,0)),"ArrowDown"===o&&l(Math.min(u+1,t.length-1)),("Enter"===o||"Space"===o)&&u>=0&&(null==(r=f[u].current)||r.click()),"Escape"===o&&(null==n||n(e),null==i||null==(a=i.current)||a.focus()))},containerRef:d}},ou=["items","getItemTagName","getItemAttributes","getItemIcon","getItemLabel","getItemOnClick","onEsc","onItemClick","anchorRef","isOpen","className","isProportional"];function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ol=b("context-menu",{"context-menu":"ePQPv","focus-visible":"YHJbB","js-focus-visible":"sNKip"}),od=(0,c.forwardRef)(function(e,t){var n=ot(e),r=n.items,i=void 0===r?[]:r,s=n.getItemTagName,c=n.getItemAttributes,d=n.getItemIcon,f=n.getItemLabel,g=n.getItemOnClick,m=n.onEsc,p=n.onItemClick,v=n.anchorRef,h=n.isOpen,y=n.className,b=n.isProportional,w=(0,u.A)(n,ou),M=os({items:i,anchorRef:v,onEsc:m,isOpen:h}),A=M.refs,E=M.containerRef,O=M.activeIndex,I=M.onKeyDown,C=function(e,t){var n,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({tagName:s(e),label:f(e),onClick:function(t){var n;null==(n=g(e))||n(t),null==p||p(t,e)},active:O===t,ref:A[t],icon:d(e),proportional:b},null!=(n=c(e))?n:{});return l().createElement(oi,(0,a.A)({},r,{"data-t-id":"ui-ContextMenu"}))};return l().createElement(no,(0,a.A)({anchorRef:v,className:function(e){return ol(null,["function"==typeof y?y(e):y])},isOpen:h,onKeyDown:I,ref:(0,nr.k)([t,E]),tabIndex:0,theme:"dark"},w),i.map(function(e,t){return l().createElement(l().Fragment,{key:f(e)},C(e,t))}))}),of=function(){var e;return(null==(e=document)?void 0:e.querySelector('[data-portal-type="widgetChat"]'))||void 0},og=function(){var e,t=rM(),n=aL().addNotification,r=(0,c.useRef)(null),i=ak().sendFileMessage,a=iH().scrollToBottom,o=(e=(0,eb.A)(eM().mark(function e(){var o,s,u,c,l,d,f;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=null==(o=r.current)?void 0:o.files)){e.next=23;break}if(!((u=s[0]).size>aZ["5Mb"])){e.next=6;break}return n({key:"bigSize",label:"большой размер файла",subTitle:"попробуйте загрузить другой",view:"error"}),e.abrupt("return");case 6:return c=URL.createObjectURL(u),(l=new FormData).append("file",u),d=tr("",{status:eT.sent,messageType:e_.FileDoc},{fileInfo:{fileUrl:c,name:u.name,size:u.size}}),t(r$([])),t(tW(d)),a(0),e.prev=13,e.next=16,t(e0(l));case 16:(f=e.sent).payload.id&&i(f.payload.id,d),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),t(tQ({id:d.messageId,status:eT.failed}));case 23:case"end":return e.stop()}},e,null,[[13,20]])})),function(){return e.apply(this,arguments)});return{fileRef:r,handleFileLoad:o}},om=function(e){var t=e.imageRef,n=e.fileRef,r=e.acceptImage,i=e.acceptFile,a=e.onImageChange,o=e.handleFileLoad,u=(0,is._)(),l=(0,s.A)(u,2),d=l[0],f=l[1],g=aL().addNotification,m=rA(es).authZoneConfig.zoneType,p=function(e,t){t&&(rm(e,m),t.value="",null==t||t.click())};return{items:(0,c.useMemo)(function(){return[{label:aT.IMAGE,icon:I.AKV,onClick:function(){return p(aT.IMAGE,t.current)}},{label:aT.FIlE,icon:I.Vdr,onClick:function(){return p(aT.FIlE,n.current)}}]},[]),isOpen:d,handleImageChange:(0,c.useCallback)(function(){var e=aJ(t,r);f.off(),e?a():g({key:"wrongFormat",label:"Тип файла не подходит",subTitle:"попробуйте загрузить другой",view:"error"})},[]),handleFileChange:(0,c.useCallback)(function(){var e=aJ(n,i);if(f.off(),e)o(),rv(aT.FIlE,m);else{if(!n.current)return;n.current.value="",g({key:"wrongFormat",label:"Тип файла не подходит",subTitle:"попробуйте загрузить другой",view:"error"})}},[]),handleAttachClick:function(){d||rg(m),f.toggle()},handleClickOutside:function(){f.off()}}},op=["onChange","className","setImgPreview","addUploadImg","zoneType","attachmentConfig","onImageChange","imageRef"],ov=(0,E.G)("attachment",{attachment__hidden:"KnUdV",attachment__container:"kWX3b"}),oh=(0,rH.Zz)((0,d.Ng)(function(e){var t=eh(e),n=t.isEnabled,r=t.image,i=t.file,a="authorized"===es(e).authZoneConfig.zoneType;return{attachmentConfig:{image:(null==r?void 0:r.formatList)||aS.image,file:(null==i?void 0:i.formatList)||aS.file},shouldRender:n&&a&&!al(e)}}),rV.t)(function(e){e.onChange;var t=e.className,n=(e.setImgPreview,e.addUploadImg,e.zoneType,e.attachmentConfig),r=e.onImageChange,i=e.imageRef,o=(0,u.A)(e,op),s=of(),d=(null==n?void 0:n.file)||".doc,.docx",f=(null==n?void 0:n.image)||"image/*",g=(0,c.useRef)(null),m=og(),p=m.fileRef,v=om({imageRef:i,fileRef:p,acceptImage:f,acceptFile:d,onImageChange:r,handleFileLoad:m.handleFileLoad}),h=v.items,y=v.isOpen,b=v.handleImageChange,w=v.handleFileChange,M=v.handleAttachClick,A=v.handleClickOutside;return l().createElement(l().Fragment,null,l().createElement("input",{accept:d,className:ov("hidden"),onChange:w,ref:p,type:"file","data-t-id":"ui-Attachment"}),l().createElement("input",{accept:f,className:ov("hidden"),onChange:b,ref:i,type:"file"}),l().createElement(x,(0,a.A)({},o,{"aria-label":"Прикрепить файлы",className:ov(null,[t]),iconColor:"tertiary",iconLeft:I.ETA,onClick:M,onlyIcon:!0,ref:g,size:"m",view:"tertiary-invert"})),l().createElement(od,{anchorRef:g,className:ov("container"),container:s,direction:"upStartLeft",isOpen:y,isProportional:!0,items:h,offsetVertical:12,onClickOutside:A}))}),oy=["className"],ob=(0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4LjI3NTEgMTAuNzE2NkMxOC4yNTg0IDEwLjg3NSAxOC4yMzM0IDExLjAyNSAxOC4xOTE3IDExLjE3NUMxNy4zMjUxIDEwLjQ0MTYgMTYuMjAwMSA5Ljk5OTk4IDE0Ljk3NTEgOS45OTk5OEMxMi4yMTY3IDkuOTk5OTggOS45NzUwNyAxMi4yNDE2IDkuOTc1MDcgMTVDOS45NzUwNyAxNi4yMjUgMTAuNDE2NyAxNy4zNSAxMS4xNTAxIDE4LjIxNjZDMTEuMDAwMSAxOC4yNTgzIDEwLjg1MDEgMTguMjgzMyAxMC42OTE3IDE4LjNDOS45ODM0MSAxOC4zNjY2IDkuMjU4NDEgMTguMzMzMyA4LjUwODQxIDE4LjIwODNDNS4wODM0MSAxNy42MjUgMi4zMjUwNyAxNC44NSAxLjc1ODQxIDExLjQxNjZDMC44MTY3NCA1LjcwODMxIDUuNjgzNDEgMC44NDE2NDIgMTEuMzkxNyAxLjc4MzMxQzE0LjgyNTEgMi4zNDk5OCAxNy42MDAxIDUuMTA4MzEgMTguMTgzNCA4LjUzMzMxQzE4LjMwODQgOS4yODMzMSAxOC4zNDE3IDEwLjAwODMgMTguMjc1MSAxMC43MTY2WiIgc3Ryb2tlPSIjOThBMEIwIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xOC4xOTE4IDExLjE3NUMxOC4wNzUxIDExLjU4MzMgMTcuODU4NCAxMS45NSAxNy41NTAxIDEyLjI1ODNMMTIuMjMzNCAxNy41NzVDMTEuOTI1MSAxNy44ODMzIDExLjU1ODQgMTguMSAxMS4xNTAxIDE4LjIxNjdDMTAuNDE2OCAxNy4zNSA5Ljk3NTEgMTYuMjI1IDkuOTc1MSAxNUM5Ljk3NTEgMTIuMjQxNyAxMi4yMTY4IDEwIDE0Ljk3NTEgMTBDMTYuMjAwMSAxMCAxNy4zMjUxIDEwLjQ0MTcgMTguMTkxOCAxMS4xNzVaIiBzdHJva2U9IiM5OEEwQjAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",ratio:1}),ow=b("sticker-button",{"sticker-button":"uARAK"}),oM=(0,c.forwardRef)(function(e,t){var n=e.className,r=(0,u.A)(e,oy),i=(0,is._)(),o=(0,s.A)(i,2),c=o[0],d=o[1];return l().createElement(ob,(0,a.A)({},r,{className:ow(null,[n]),color:c?"primary-invert":"tertiary",onMouseEnter:d.on,onMouseLeave:d.off,ref:t,size:20,tagName:"button",type:"button","data-t-id":"ui-StickerButton"}))});let oA={form:"LGRE0",form_hidden:"E1mXC",form__submit:"eMJvc",form__submit_hidden:"oxEM3","form__text-area":"cmC2r"};var oE=["className"],oO=(0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwIDE2Ljg3NVYzLjEyNSIgc3Ryb2tlPSIjMjgzMDNGIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik00LjM3NSA4Ljc1TDEwIDMuMTI1TDE1LjYyNSA4Ljc1IiBzdHJva2U9IiMyODMwM0YiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cgo=",ratio:1}),oI=function(e){return l().createElement(oO,(0,a.A)({},e,{size:20,"data-t-id":"ui-SubmitButton"}))},oC=b("form",oA),oN=function(e){var t=e.className,n=(0,u.A)(e,oE);return l().createElement(k.$,(0,a.A)({},n,{"aria-label":"Отправить сообщение",className:oC("submit",[t]),iconLeft:oI,onlyIcon:!0,size:"m"}))},ok=["isLoading","isImgPreviewOpen","className","isEmojiEnabled","hidden","setDynamicFormHeight","dispatch"],oD=b("form",oA),oS=(0,rH.Zz)((0,d.Ng)(function(e){return{isLoading:ao(e),isEmojiEnabled:!1,isImgPreviewOpen:al(e),hidden:ab(e),shouldRender:!af(e)}},function(e){return{setDynamicFormHeight:function(t){return e(r1(t))}}}),rV.t)(function(e){e.isLoading;var t=e.isImgPreviewOpen,n=e.className,r=e.isEmojiEnabled,i=e.hidden,o=e.setDynamicFormHeight,s=(e.dispatch,(0,u.A)(e,ok)),d=a0(),f=d.params,g=d.isSubmitDisabled,m=a2(d.inputRef);return(0,c.useEffect)(function(){o(m)},[m]),l().createElement(iz.P.form,(0,a.A)({animate:{height:m,y:200*!!i},className:oD({hidden:i},[n]),transition:{y:{duration:.4},height:{duration:.01}}},s),l().createElement(oh,(0,a.A)({},f.attachmentProps,{"data-t-id":"ui-Form"})),l().createElement(i3,(0,a.A)({className:oD("text-area"),placeholder:t?aw.imgPreview:aw.textMessage,rightSide:r?l().createElement(oM,null):void 0},f.inputProps)),l().createElement(oN,(0,a.A)({hidden:g},f.buttonProps)))}),oT=n(59121),o_=["className","onClick"],oj=b("scroll-button",{"scroll-button":"Vx8Iy","scroll-button__button":"eAnUK","scroll-button__button_withoutBadge":"oMTJj","scroll-button__badge":"jficr","scroll-button__action-button":"ro8Tc"}),ox={hidden:{poinerEvents:"none",x:100,opacity:0},visible:{x:0,opacity:1,poinerEvents:"all"}},oL=function(e){var t=e.className,n=(e.onClick,(0,u.A)(e,o_)),r=iH(),i=r.scrollToBottom,o=r.isScrollButtonVisible;return rA(au).length,l().createElement("div",{className:oj(null,[t]),"data-t-id":"ui-ScrollButton"},l().createElement(iz.P.div,(0,a.A)({},n,{animate:o?"visible":"hidden",initial:"hidden",transition:{x:{duration:.3},opacity:{duration:.3}},variants:ox}),l().createElement(oT.p,{className:oj("button",{withoutBadge:!0}),content:void 0,offset:{horizontal:-14,vertical:6}},l().createElement(x,{"aria-label":"Проскроллить вниз",className:oj("action-button"),"data-count":void 0,iconLeft:I.rIS,onClick:function(){return i()},onlyIcon:!0,size:"m",view:"tertiary-invert","data-t-id":"ui-ScrollButton"}))))},oz=function(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());if(-1!==n){var r=n+t.length-1;return[n,r]}return[0,0]},oP=function(e,t){var n,r=new Range,i=oz(e.childNodes[0].textContent||"",t),a=(0,s.A)(i,2),o=a[0],u=a[1];r.setStart(e.childNodes[0],o),r.setEnd(e.childNodes[0],u);var c=new Highlight(r);null==(n=CSS)||null==(n=n.highlights)||n.set("message-text-highlight",c),c.add(r)},oR=function(){var e=(0,c.useState)(1),t=(0,s.A)(e,2),n=t[0],r=t[1],i=rA(function(e){return e.filters}),a=i.search,o=i.isFiltersVisible,u=iZ().includedIds,l=iH().scrollToInnerNode,d=n>=u.length,f=n<=1,g=!a||!o;return(0,c.useEffect)(function(){if(!g&&a){var e=tI(u[n-1]);if(e){var t=e.querySelector("[data-is-text]");t&&oP(t,a),l(e,100)}}},[n,a,u]),(0,c.useEffect)(function(){return function(){var e;null==(e=CSS)||null==(e=e.highlights)||e.delete("message-text-highlight")}},[g]),{position:n,setPosition:r,hidden:g,upDisabled:d,downDisabled:f,count:u.length}},oY=["className"],oU=(0,E.G)("navigation",{navigation:"zUy5L",navigation_hidden:"zBHjR",navigation__controls:"emsnb",navigation__button:"eZvIu"}),oB=function(e){var t=e.className,n=(0,u.A)(e,oY),r=oR(),i=r.upDisabled,o=r.downDisabled,s=r.count,c=r.hidden,d=r.position,g=r.setPosition;return l().createElement(iz.P.div,(0,a.A)({animate:{height:70*!c,y:100*!!c},className:oU({hidden:c},[t,(0,f.HL)("dark")]),transition:{y:{duration:.4},height:{duration:.1}}},n),l().createElement(ns.E,{color:"tertiary-invert",variant:"body-small","data-t-id":"ui-Navigation"},"".concat(d," из ").concat(s)),l().createElement("div",{className:oU("controls")},l().createElement(I.owb,{className:oU("button"),color:i?"disabled":"primary",disabled:i,onClick:function(){return g(function(e){return e+1})},size:"m",tagName:"button"}),l().createElement(I.rIS,{className:oU("button"),color:o?"disabled":"primary",disabled:o,onClick:function(){return g(function(e){return e-1})},size:"m",tagName:"button"})))},oH=function(e){var t=e.ref,n=e.callback,r=e.options,i=(0,is._)(),a=(0,s.A)(i,2),o=a[0],u=a[1];return(0,c.useEffect)(function(){var e=null;return t&&(e=new IntersectionObserver(function(e){var t=(0,s.A)(e,1)[0];u.set(n(t))},r),t.current&&e.observe(t.current)),function(){e&&e.disconnect()}}),o},oV=["view","label","tagName","className"],oW=b("divider",{divider:"sNjtt",divider_view_accent:"ryjoe",divider_view_default:"sZRlv",divider__label:"s2IUq",divider__label_view_accent:"ZDV5C"}),oG=function(e){return e.intersectionRatio>.9&&e.intersectionRatio<1},oF=(0,N.B)(function(e,t){var n=e.view,r=void 0===n?"accent":n,i=e.label,o=e.tagName,s=e.className,d=(0,u.A)(e,oV),f=(0,c.useRef)(null),g=oH({ref:f,callback:oG,options:{threshold:[.9,1]}});return l().createElement(void 0===o?"div":o,(0,a.A)({className:oW({view:r,visible:g},[s]),ref:(0,nr.k)([t,f])},d,{"data-t-id":"ui-Divider"}),l().createElement(ns.E,{className:oW("label",{view:r}),color:"default"===r?"tertiary":"secondary-invert",variant:"accent"===r?"caption-medium":"body-small","data-t-id":"ui-Divider"},i))}),oQ=function(e){return e.popular="start_button",e.replies="script_button",e}({}),oZ=function(e){return e.captcha},oq=function(e){return oZ(e).retryCount},oK=function(e){return oZ(e).targetCaptchaData},oJ=function(e){return oZ(e).queuedMessages},oX=function(e){return oZ(e).recreateCount},o$=function(e){return oZ(e).recreateProcess},o0=function(e){return oZ(e).captchaAccessToken},o1=function(e){(0,z.TV)({name:tu,value:e,maxAge:6e4})},o4=function(e,t,n){e["retry"===t?"retryCount":"recreateCount"]=n;var r="retry"===t?tl:td;0===n?(0,z.Yj)(r):(0,z.TV)({name:r,value:n})},o2=function(e){sessionStorage.setItem(tm,JSON.stringify(e))},o5=function(e){e&&(0,z.TV)({name:tp,value:null==e?void 0:e.toString()})},o3=function(e){sessionStorage.setItem(tv,JSON.stringify(e))},o6={retryCount:Number(null!=(r=(0,z.Ri)(tl))?r:0),captchaAccessToken:function(){var e=(0,z.Ri)(tu);if(e)return e}(),validateStatus:ey.idle,createStatus:ey.idle,queuedMessages:[],recreateCount:Number(null!=(i=(0,z.Ri)(td))?i:0),recreateProcess:[]},o9=(0,L.Z0)({name:"captcha",initialState:o6,reducers:{setActiveCaptchaMessageId:function(e,t){e.activeCaptchaMessageId=t.payload,o5(t.payload)},setRetryCount:function(e,t){o4(e,"retry",t.payload)},setCaptchaData:function(e,t){e.targetCaptchaData=t.payload},addProcessId:function(e,t){e.recreateProcess.push(t.payload)},removeProcessId:function(e,t){e.recreateProcess=e.recreateProcess.filter(function(e){return e!==t.payload})},setCaptchaAccessToken:function(e,t){e.captchaAccessToken=t.payload,t.payload&&o1(t.payload)},addQueuedMessage:function(e,t){e.queuedMessages.push(t.payload),o3(e.queuedMessages)},clearQueuedMessages:function(e){e.queuedMessages=[],o3(e.queuedMessages)},setQueuedMessages:function(e,t){e.queuedMessages=t.payload,o3(e.queuedMessages)},removeQueuedMessage:function(e,t){e.queuedMessages=e.queuedMessages.filter(function(e){return e.messageId!==t.payload}),o3(e.queuedMessages)},setRecreateCount:function(e,t){o4(e,"recreate",t.payload)}},extraReducers:function(e){e.addCase(eX.pending,function(e){e.validateStatus=ey.loading}).addCase(eX.fulfilled,function(e,t){var n=t.payload.accessToken;e.captchaAccessToken=n,o1(n),o4(e,"retry",0),o4(e,"recreate",0),e.validateStatus=ey.fulfilled}).addCase(eX.rejected,function(e,t){var n=t.payload;(null==n?void 0:n.status)===401&&(null==n?void 0:n.message)!==ty&&o4(e,"retry",e.retryCount+1),e.validateStatus=ey.failed}).addCase(e$.pending,function(e){e.createStatus=ey.loading}).addCase(e$.fulfilled,function(e,t){e.targetCaptchaData=t.payload,o2(t.payload),e.createStatus=ey.fulfilled}).addCase(e$.rejected,function(e){e.createStatus=ey.failed,e.targetCaptchaData=void 0})}}),o8=o9.actions,o7=o8.setCaptchaData,se=o8.setRetryCount,st=o8.addQueuedMessage,sn=(o8.clearQueuedMessages,o8.setCaptchaAccessToken),sr=o8.setQueuedMessages,si=o8.addProcessId,sa=o8.removeProcessId,so=o8.setRecreateCount,ss=o8.removeQueuedMessage,su=o8.setActiveCaptchaMessageId,sc={width:220,height:68},sl=function(e,t){var n,r,i=rM(),a=(0,io.V)(rA(oK)),o=(0,io.V)(rA(oX)),s=(0,c.useCallback)((0,eb.A)(eM().mark(function e(){var n,r;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(e$(sc));case 2:if(n=e.sent,!e$.fulfilled.match(n)){e.next=6;break}return rr(null==(r=t.authZoneConfig)?void 0:r.zoneType),e.abrupt("return",n.payload);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)})),[t.authZoneConfig]),u=(0,c.useCallback)((n=(0,eb.A)(eM().mark(function n(r){var a,u,c,l;return eM().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r&&(i(si(r)),i(su(r))),n.next=4,s();case 4:i(o7(null!=(a=n.sent)?a:void 0)),r&&(a&&(i(su(a.captchaId)),i(so(o.current+1))),e({id:r,messageId:null!=(u=null==a?void 0:a.captchaId)?u:r,captcha:null!=(c=null==a?void 0:a.image)?c:null}));case 7:return n.prev=7,ru(null==(l=t.authZoneConfig)?void 0:l.zoneType),r&&i(sa(r)),n.finish(7);case 11:case"end":return n.stop()}},n,null,[[0,,7,11]])})),function(e){return n.apply(this,arguments)}),[t.authZoneConfig]);return{createCaptcha:s,validateCaptcha:(0,c.useCallback)((r=(0,eb.A)(eM().mark(function e(t){var n,r;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=8;break}return n={captchaValue:t,captchaText:a.current.captchaText,cookieToken:a.current.captchaTokenValue,captchaId:a.current.captchaId},e.next=4,i(eX(n));case 4:if(r=e.sent,!eX.fulfilled.match(r)){e.next=7;break}return e.abrupt("return",{type:"success",data:r.payload});case 7:return e.abrupt("return",{type:"error",data:r.payload});case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[]),captchaUpdate:u}},sd=n(60950),sf=function(e,t){return e>0?t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]:t[1]},sg=function(e){return e.init="init",e.start="start",e.retry="retry",e.end="end",e.error="error",e.blocked="blocked",e.captcha="captcha",e.recaptcha="recaptcha",e}({}),sm=function(){var e=(0,z.Ri)(tf),t=new Date().getTime();return e&&Number(e)>t?Number(e)-t:0},sp="Возникла ошибка. Попробуйте еще раз или повторите позднее",sv=["попытка","попытки","попыток"],sh=["Осталась","Осталось","Осталось"],sy=["минуту","минуты","минут"],sb=function(e){var t=e.retry,n=void 0===t?0:t,r=e.timeout,i=void 0===r?sm():r,a=Math.ceil((null!=i?i:sm())/6e4),o=4-n;return{init:void 0,start:"Люди не любят капчу, но роботов она вообще выводит из себя — и из этого чата",retry:"Попробуйте ещё раз — вводите только цифры".concat(n>1?". ".concat(sf(o,sh)," ").concat(o," ").concat(sf(o,sv)):""),blocked:"Слишком много попыток — попробуйте через ".concat(a," ").concat(sf(a,sy)),end:"Спасибо, всё верно. Готов вам помочь",captcha:sp,recaptcha:"Мы уже уверены, что вы человек, но просим ввести символы ещё раз",error:sp}},sw=function(e,t){var n=e===sg.captcha||e===sg.recaptcha,r=sb(t)[e];return r?tr(r,{author:eN.Bot,messageType:n?e_.CAPTCHA:void 0,status:n?eT.sent:eT.delivered,id:"blocked"===e?th:void 0,onlyClient:!0}):null};function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var sA=function(e){var t,n=e.updateMessage,r=e.addMessage,i=e.createCaptcha,a=ih(),s=a.options,u=a.stage,l=rM(),d=(0,io.V)(rA(oq)),f=iH().scrollToBottom,g=(0,sd.$)(6e3,{onReached:function(){n({id:th,message:{content:sb({}).blocked}})}}).createInterval;return(0,c.useEffect)(function(){u===ia.BLOCKED&&g()},[u]),(0,c.useCallback)((t=(0,eb.A)(eM().mark(function e(t,a){var u,c;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=sw(t,{retry:d.current,timeout:s.blockedTimeout})){e.next=3;break}return e.abrupt("return");case 3:if(a?n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sM(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:a},u)):r(u),"captcha"!==t){e.next=15;break}return l(si(u.messageId)),l(su(u.messageId)),e.next=9,i();case 9:if(c=e.sent,l(sa(u.messageId)),c){e.next=13;break}return e.abrupt("return");case 13:l(su(c.captchaId)),n({captcha:c.image,date:u.date,id:u.messageId,messageId:c.captchaId});case 15:f(0);case 16:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[i])},sE=n(29098),sO=function(e){var t;return e===ia.BLOCKED?"blocked":null!=(t=(0,z.Ri)(tg))?t:"init"},sI=function(){var e=sessionStorage.getItem(tm);if(e)return JSON.parse(e)},sC=function(e){var t,n,r=e.config,i=e.reconnectCount,a=e.generateCaptchaMessage,o=e.validateCaptcha,u=e.setIsNoNAuthCaptchaStage,l=ih(),d=l.changeStage,f=l.stage,g=l.addReachedHandler,m=(0,c.useState)("init"),p=(0,s.A)(m,2),v=p[0],h=p[1],y=(0,sE.Z)(f),b=rM(),w=(null!=(n=r.authZoneConfig)?n:{}).zoneType,M=(0,io.V)(rA(oq)),A=function(e){h(e),(0,z.TV)({name:tg,value:e}),a(e),[sg.retry,sg.start,sg.recaptcha].includes(e)&&a("captcha")},E=(t=(0,eb.A)(eM().mark(function e(t){var n,r,i;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:if(n=e.sent){e.next=6;break}return a("error"),e.abrupt("return");case 6:if(r=n.data,"success"!==n.type){e.next=13;break}return d(ia.CONNECTING),u(!1),A("end"),ri(w),e.abrupt("return");case 13:if(i=null==r?void 0:r.message,401!==r.status||i!==ty){e.next=18;break}return a("error"),a("captcha"),e.abrupt("return");case 18:M.current+1>4?(d(ia.BLOCKED),A("blocked"),rs(w)):(A("retry"),ro(w));case 19:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),O=function(){b(se(0)),a("captcha",th)};(0,c.useEffect)(function(){g("captcha",O)},[]);var I=function(){b(se(0)),b(so(0))},C=function(){I(),A(sg.recaptcha),ra(w)};return(0,c.useEffect)(function(){var e=i>10&&y===ia.CONNECTING;if((y===ia.LOAD_DATA||e)&&f===ia.CAPTCHA_NEEDED)return void C();(f===ia.ACTIVE||f===ia.LOAD_DATA||f===ia.CONNECTING)&&h("end")},[f]),(0,c.useEffect)(function(){var e=sO(f);h(e),b(o7(sI())),"init"===e&&I()},[]),(0,c.useEffect)(function(){b(sn((0,z.Ri)(tu)||"")),b(su((0,z.Ri)(tp)||""))},[]),{sendCaptchaMessage:E,handleChangeStage:A,generateCaptchaMessage:a,captchaStage:v}};function sN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sN(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sD=(0,c.createContext)({sendCaptchaMessage:function(){return new Promise(function(){})},createCaptcha:function(){return new Promise(function(){})},handleChangeStage:function(){return new Promise(function(){})},generateCaptchaMessage:function(){return new Promise(function(){})},captchaUpdate:function(){return new Promise(function(){})},captchaStage:"init"}),sS=function(e){var t=e.children,n=e.updateMessage,r=e.config,i=e.addMessage,a=e.reconnectCount,o=e.setIsNoNAuthCaptchaStage,s=sl(n,r),u=s.createCaptcha,d=s.validateCaptcha,f=s.captchaUpdate,g=sA({updateMessage:n,addMessage:i,createCaptcha:u}),m=sC({config:r,reconnectCount:void 0===a?0:a,generateCaptchaMessage:g,validateCaptcha:d,setIsNoNAuthCaptchaStage:o}),p=(0,c.useMemo)(function(){return sk(sk({},m),{},{createCaptcha:u,generateCaptchaMessage:g,captchaUpdate:f})},[m,g,u,f]);return l().createElement(sD.Provider,{value:p},t)},sT=function(){return(0,c.useContext)(sD)},s_=function(e){return e.NZStart="nz-start",e.PopularRequests="popular-request",e.QuickReplies="quick-replies",e.Hidden="",e}({}),sj=n(2543),sx=["className","title","link","isDeepLink","icon","children","onVisible"];function sL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var sz=b("quick-button",{"quick-button":"sCQlD","quick-button__icon-btn":"aZhu2","quick-button__text":"YDA7r"}),sP=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.title,i=e.link,s=(e.isDeepLink,e.icon),d=(e.children,e.onVisible),f=(0,u.A)(e,sx),g=(0,c.useRef)(null),m=oH({ref:g,callback:function(e){return e.isIntersecting},options:{threshold:[.75]}}),p=null!=i&&i.trim()?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sL(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({href:i,target:"self"},f):f,v="string"==typeof s?(0,nu.Y)({url:s,ratio:1}):s,h=null!=i&&i.trim()?"a":"button";return(0,c.useEffect)(function(){null==d||d(m)},[m]),l().createElement(h,(0,a.A)({"aria-label":r,className:sz(null,[n]),form:"round",ref:(0,nr.k)([g,t]),role:"tab"},p,{"data-t-id":"ui-QuickButton"}),v&&l().createElement(v,{className:sz("icon-btn"),color:"primary-invert",size:"xs"}),l().createElement(ns.E,{className:sz("text"),color:"primary-invert",truncate:!0,variant:"body-small"},r))}),sR=b("quick-request",{"quick-request":"UlfpM"}),sY=function(e){var t=e.items,n=e.onItemClick,r=e.zoneType,i=e.className,o=r6(),s=(0,c.useMemo)(function(){return(0,sj.flatten)(t)},[t]);return(0,c.useEffect)(function(){null!=s&&s.length&&rw(s.map(function(e){return e.title}),oQ.popular,r)},[]),l().createElement("section",{className:sR(null,[i]),"data-t-id":"ui-QuickRequest"},s.map(function(e,t){return l().createElement(sP,(0,a.A)({},e,{key:sR("item",{i:t}),onClick:function(){return n(e)},onVisible:function(t){return o(e.title,t)}}))}))},sU="еще варианты",sB=function(e){var t=e.items,n=e.slice,r=[],i=[];t.forEach(function(e){e.fixedButton?i.push(e):r.push(e)});var a=r.length>5;return{flexListByPage:a?r.slice(n,n+5):r,lengthFlexList:r.length,fixedList:i,isMoreVariant:a}},sH=function(e,t,n){var r=(null==e?void 0:e.map(function(e){return null==e?void 0:e.text}))||[],i=(null==t?void 0:t.map(function(e){return null==e?void 0:e.text}))||[];return n&&r.push(sU),r.concat(i)},sV=function(e){var t=(0,c.useState)(0),n=(0,s.A)(t,2),r=n[0],i=n[1],a=(0,c.useRef)(-1),o=iH().scrollToBottom,u=(0,c.useMemo)(function(){return sB({items:(0,sj.flatten)(e),slice:r})},[e,r]),l=u.flexListByPage,d=u.lengthFlexList,f=u.fixedList,g=u.isMoreVariant,m=d-r>5,p=(0,O.E)({icons:[I.gXA,I.H42]});return(0,c.useEffect)(function(){null!=e&&e.length&&a.current<r&&(rw(sH(l,f,g),oQ.replies,"authorized"),a.current=r)},[l,f]),{flexListByPage:l,fixedList:f,isMoreVariant:g,IconComponent:p,onClick:function(){var e=r+5;i(e>=d?0:e),rb(sU,oQ.replies,"authorized"),o(100)},hasMoreVariants:m}},sW=b("quick-replies",{"quick-replies":"RBJQu","quick-replies__list":"vAY95"}),sG=function(e){var t=e.item,n=e.onClick;return l().createElement(sP,{icon:t.imageUrl,isDeepLink:!!t.deepLink,link:t.deepLink||t.link,onClick:n,title:t.text,"data-t-id":"ui-QuickReplies"})},sF=function(e){var t=e.items,n=e.onItemClick,r=e.className,i=sV(t),a=i.flexListByPage,o=i.fixedList,s=i.isMoreVariant,u=i.onClick,c=i.IconComponent,d=i.hasMoreVariants,f=function(e){return function(){return n(e)}};return l().createElement("section",{className:sW(null,[r])},!!(null!=a&&a.length)&&l().createElement(iz.P.div,{className:sW("list")},a.map(function(e,t){return l().createElement(sG,{item:e,key:sW("item",{i:t}),onClick:f(e)})}),s&&l().createElement(C.u,{activeIndex:+!d},l().createElement(sP,{className:sW("item-more"),icon:c,onClick:u,title:sU,"data-t-id":"ui-QuickReplies"}))),!!(null!=o&&o.length)&&l().createElement("div",{className:sW("list")},o.map(function(e,t){return l().createElement(sG,{item:e,key:sW("item",{i:t}),onClick:f(e)})})))},sQ=(0,rH.Zz)((0,d.Ng)(function(e){var t=el(e),n=ef(e).zoneType;return{nzStartButtons:null!=t&&t.isEnabled?t.list:[],faqPopularRequests:aH(e),faqQuickReplies:aY(e).quickReplies,isLastSessionFinished:an(e),zoneType:n,shouldRender:"authorized"===n?aa(e)===ey.fulfilled:!!(null!=t&&t.isEnabled&&t.list.length)}},function(e){return{addQuickReplies:function(t){return e(r$(t))}}}))(function(e){var t=e.faqPopularRequests,n=e.faqQuickReplies,r=e.className,i=e.zoneType,a=e.nzStartButtons,o=e.addQuickReplies,s=e.isLastSessionFinished,u=(0,io.V)(ak().sendMessage),d=ih().stage,f=iZ().sessions,g=sT().captchaStage,m=(0,c.useMemo)(function(){return"unauthorized"===i&&("init"===g&&d===ia.CAPTCHA_NEEDED||s)&&null!=a&&a.length?s_.NZStart:"authorized"===i&&(s||!f.length)&&t.length?s_.PopularRequests:n.length&&!s?s_.QuickReplies:s_.Hidden},[s,f,t,g,n,i,a,d]),p=(0,c.useCallback)(function(e){var t=e.link,n=e.value,r=e.title;if(t&&m!==s_.QuickReplies)o([]);else{var a=n?{messageType:e_.Button,value:n}:void 0,s={messageType:e_.Link,link:t};u.current(r,void 0,void 0,t?s:a)}if(m===s_.QuickReplies)return void rb(r,oQ.replies,i);nW(r),rb(r,oQ.popular,i)},[m]);return m===s_.Hidden?null:m===s_.QuickReplies?l().createElement(sF,{className:r,items:n,onItemClick:function(e){return p({link:e.deepLink?e.deepLink:e.link,title:e.text,imageUrl:e.imageUrl,isDeepLink:!!e.deepLink,value:null==e?void 0:e.value})},"data-t-id":"ui-QuickActions"}):l().createElement(sY,{className:r,items:m===s_.NZStart?a:t,onItemClick:p,zoneType:i})}),sZ=function(e){return e.user.apperList},sq=n(91795),sK=n(67069),sJ=n(91046),sX=n(99606),s$=n(76153),s0=function(e){return e.PENDING="pending",e.SUBMITED="submited",e.READED="readed",e.UNKNOWN="unknown",e.REJECTED="rejected",e}({}),s1=function(e){var t=e.message,n=e.unreadedMessages;return t.messageStatus===eT.failed?s0.REJECTED:null!=n&&n.find(function(e){return e.messageId===t.messageId})?s0.SUBMITED:t.messageStatus===eT.sent?s0.PENDING:s0.UNKNOWN},s4=function(e,t,n,r){if(n&&!r)return!0;var i=new Date(e.date);return!!t&&!(0,sq.A)(i,new Date(t))},s2=function(e){var t=new Date(e);return(0,sK.A)(t)?"Сегодня":(0,sJ.A)(t)?(0,sX.A)(t,"d MMMM",{locale:s$.A}):(0,sX.A)(t,"d MMMM yyyy",{locale:s$.A})},s5={animalID:1,codeName:aD.bee,animalName:"Базя",serviceSoc:"POWER4",link:"https://static.beeline.ru/upload/images/chat/avatar_bee.png"},s3=function(e,t){var n,r;return(e.type===eN.Operator||e.type===eN.External)&&e.name?e:{id:(r=null!=(n=null==t?void 0:t.find(function(t){return t.animalID===e.type}))?n:s5).animalID,name:r.animalName,image:r.link,type:r.animalID}},s6=function(e,t,n){if(n)for(var r=0;r<e.length;r+=1){var i=e[r].messages.find(function(e){return e.messageId===n});if(i)return{message:i,author:s3(i.author,t)}}},s9=function(e,t){return(null==t?void 0:t.author.type)!==(null==e?void 0:e.author.type)||(null==t?void 0:t.author.name)!==(null==e?void 0:e.author.name)},s8=function(){var e=rA(au),t=rA(sZ),n=iZ().sessions;return(0,c.useMemo)(function(){var r=[],i=-1;return n.forEach(function(a,o){a.messages.forEach(function(s,u){var c,l=s.author.type===eN.Client?"main":"opposite",d=a.messages[u-1],f=a.messages[u+1],g=n[o-1],m=null==g||null==(c=g.messages[g.messages.length-1])?void 0:c.date,p=s4(s,(null==d?void 0:d.date)||m,0===u,(null==g?void 0:g.updatedAt)||(null==g?void 0:g.updatetAt));(p||-1===i)&&(i+=1,r.push({date:s2(s.date),list:[]})),r[i].list.push({author:s3(s.author,t),side:l,message:s,stage:s1({message:s,unreadedMessages:e}),reply:s6(n,t,s.message.replyId),withUsername:p||s9(d,s),withAvatar:p||s9(s,f)})})}),r},[n,t,e])},s7=function(e,t){var n=t.deps,r=t.onStartScrolling,i=t.onStopScrolling,a=t.onScroll,o=t.scrollTimeout,s=(0,c.useRef)(null),u=(0,c.useRef)(!1),l=(0,io.V)(void 0===o?300:o),d=function(e){null==a||a(e),null!==s.current&&clearTimeout(s.current),s.current=setTimeout(function(){u.current=!1,null==i||i(e)},l.current),u.current||(null==r||r(e),u.current=!0)};(0,c.useEffect)(function(){var t;return null==(t=e.current)||t.addEventListener("scroll",d),function(){var t;null==(t=e.current)||t.removeEventListener("scroll",d)}},void 0===n?[]:n)},ue=function(e,t,n){if(!(null!=e&&e.current)||!(null!=t&&t.current))return!1;var r=e.current.scrollTop-(n?92:76);return r<t.current.offsetTop+t.current.offsetHeight&&r+e.current.offsetHeight>t.current.offsetTop},ut=function(e){var t=e.length,n=(0,oa.l)(t),r=(0,oa.l)(t),i=iH().scrollRef,a=(0,c.useRef)(Array(t).fill(!1)),o=(0,g.sn)(),s=function(){i.current&&(a.current=r.map(function(e,t){var r;return ue(i,e,o)&&(r=n[t],!!r.current&&!!e.current&&r.current.offsetTop-20>e.current.offsetTop)}))},u=(0,c.useCallback)(function(e){return function(){a.current.forEach(function(t,r){var i=n[r];("stop"!==e||t)&&null!=i&&i.current&&(i.current.style.opacity="stop"===e?"0":"1")})}},[t]);return(0,c.useEffect)(s,[t]),s7(i,{onScroll:s,deps:[t],onStopScrolling:u("stop"),onStartScrolling:u("start")}),{dividerRefs:n,sessionSectionRefs:r}},un=n(78167),ur=n.n(un),ui=n(49508);function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var us={info:"var(--color-text-primary)",success:"var(--color-constant-02)",error:"var(--color-constant-02)",warning:"var(--color-constant-01)"},uu={info:.6,success:.6,error:.7,warning:.7},uc=function(e){return e.id},ul=function(e){return e.mode},ud=function(e){return e.title},uf=function(e){return e.subTitle},ug=function(e){return e.view},um=n(85641),up=n(66523),uv=n(18472),uh={info:"#E2E6ED",success:"#00C06D",error:"#FF6524",warning:"#FFD546"},uy=function(e){var t=e.onClose,n=e.autoCloseTime,r=e.mode,i=e.view,a=(0,um.L)({endTime:0,startTime:n,timerType:up.a.DECREMENTAL,onTimeOver:t});(0,uv.X)(uh[i]);var o=function(){"autoclose"===r&&a.start()};return(0,c.useEffect)(function(){o()},[r]),{pause:function(){"autoclose"===r&&a.pause()},play:o}},ub=["className","align","mode","view","position","title","subTitle","autoCloseTime","style","onClose","onMouseEnter","onMouseLeave"];function uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var uM=(0,E.G)("snackbar-item",{"snackbar-item":"nx2TR","snackbar-item_align_tabbar":"HQo0k","snackbar-item_withButton":"dFNZ1","snackbar-item_view_info":"aBsXC","snackbar-item_view_warning":"YJssG","snackbar-item_view_error":"u4ZBj","snackbar-item_view_success":"RvrF5","snackbar-item__wrapper":"REYjQ","snackbar-item__title":"Up1rl","snackbar-item__subtitle":"p401p","snackbar-item__button":"ckhCe"}),uA=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.align,i=e.mode,s=void 0===i?"autoclose":i,c=e.view,d=void 0===c?"info":c,f=(e.position,e.title),g=e.subTitle,m=e.autoCloseTime,p=e.style,v=e.onClose,h=e.onMouseEnter,y=e.onMouseLeave,b=(0,u.A)(e,ub),w=uy({mode:s,autoCloseTime:m,onClose:v,view:d}),M=w.pause,A=w.play;return l().createElement("div",(0,a.A)({className:uM({align:void 0===r?"default":r,view:d,withButton:"button"===s},[n]),onMouseEnter:function(e){null==h||h(e),M()},onMouseLeave:function(e){null==y||y(e),A()},ref:t,role:"presentation",style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uw(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,o.A)((0,o.A)({},"--snackbar-item-color",us[d]),"--snackbar-item-sub-opacity",uu[d]),p)},b,{"data-t-id":"SnackBar-SnackBarItem"}),l().createElement("div",{className:uM("wrapper")},f&&l().createElement(ns.E,{align:"center",className:uM("title"),variant:"body-small"},f),g&&l().createElement(ns.E,{align:"center",className:uM("subtitle"),variant:"body-small"},g)),"button"===s&&l().createElement("button",{"aria-label":"закрыть оповещение",className:uM("button"),onClick:v,type:"button"},l().createElement(I.maM,null)))}),uE=["getItemMode","getItemSubTitle","getItemTitle","align","getItemView","getItemId","container","position","autoCloseTime","offset","items","theme","onCloseTrigered","onItemClose","className","style","shouldRender"];function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var uI=(0,E.G)("snackbar",{snackbar:"YReST",snackbar__item:"Mbng1",snackbar__item_align_tabbar:"tyZ7C",snackbar__item_align_default:"Biqmq",snackbar__item_align_default_position_topLeft:"axzB8",snackbar__item_align_default_position_topCenter:"aEX1P",snackbar__item_align_default_position_topRight:"HYeQm",snackbar__item_align_default_position_bottomLeft:"TrrcF",snackbar__item_align_default_position_bottomCenter:"nbVkV",snackbar__item_align_default_position_bottomRight:"USpkD",snackbar__item_animate_entered:"txdKe",snackbar__item_animate_entering:"r4LtR",snackbar__item_animate_exiting:"suAzi",snackbar__item_animate_exited:"eDMSX"}),uC=(0,ui.g)((0,c.forwardRef)(function(e,t){var n=uo(uo({},e),{},{getItemId:e.getItemId||uc,getItemMode:e.getItemMode||ul,getItemTitle:e.getItemTitle||ud,getItemSubTitle:e.getItemSubTitle||uf,getItemView:e.getItemView||ug}),r=n.getItemMode,i=n.getItemSubTitle,d=n.getItemTitle,g=n.align,m=void 0===g?"default":g,p=n.getItemView,v=n.getItemId,h=n.container,y=void 0===h?window.document.body:h,b=n.position,w=void 0===b?"bottomCenter":b,M=n.autoCloseTime,A=void 0===M?3500:M,E=n.offset,O=void 0===E?24:E,I=n.items,C=void 0===I?[]:I,N=n.theme,k=n.onCloseTrigered,D=n.onItemClose,S=n.className,T=n.style,_=(n.shouldRender,(0,u.A)(n,uE)),j=(0,oa.l)(C.length),x=(0,c.useState)(),L=(0,s.A)(x,2),z=L[0],P=L[1];(0,c.useEffect)(function(){C.length&&P(C[0])},[C]);var R=function(e){null==k||k(e),setTimeout(function(){return null==D?void 0:D(e)},300)};return ur().createPortal(l().createElement("div",(0,a.A)({className:uI(null,[S,(0,f.HL)(void 0===N?"light":N)]),ref:t,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,o.A)((0,o.A)({},"--snackbar-zindex",(null==T?void 0:T.zIndex)||10),"--snackbar-offset","number"==typeof O?"".concat(O,"px"):O),T)},_,{"data-t-id":"ui-SnackBar"}),C.map(function(e,t){return l().createElement(nt.Ay,{appear:!0,in:!!z&&v(z)===v(e),key:uI("item",{index:v(e)}),nodeRef:j[t],timeout:300,unmountOnExit:!0},function(n){return l().createElement(uA,{align:m,autoCloseTime:A,className:uI("item",{align:m,animate:n,position:w,mode:r(e)}),mode:r(e),onClose:function(){return R(e)},ref:j[t],subTitle:i(e),title:d(e),view:p(e)})})})),y)})),uN=function(){var e=aL(),t=e.notifications,n=e.removeNotification,r=iH().scrollRef;return l().createElement(uC,{align:"tabbar",autoCloseTime:5e3,container:r.current||void 0,getItemId:function(e){return e.key},getItemSubTitle:function(e){return e.subTitle},getItemTitle:function(e){return e.label},getItemView:function(e){return e.view},items:t,onItemClose:function(e){return n(e.key)},"data-t-id":"ui-Notifications"})},uk=function(){var e=(0,eb.A)(eM().mark(function e(t){var n;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(n=navigator)||null==(n=n.clipboard)?void 0:n.writeText(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),uD=((0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNTE4MzQgNS41MTE1VjIuNDAwMzlMMS41NDA1NyA3LjU4NTU3TDYuMzEwOTMgMTIuNzcwOFY5LjY1OTY0QzYuMzEwOTMgOS42NTk2NCAxMS4yMjkyIDguNDc4MDQgMTQuMjg2OCAxMy41ODUyQzE0LjMwMDkgMTMuNjA4OSAxNC4zMzU5IDEzLjYwMzkgMTQuMzQwMSAxMy41NzY3QzE0LjM1ODEgMTMuNDU2NCAxNC4zODk3IDEzLjIwMDEgMTQuMzk3OSAxMi44NDU4QzE0LjQ4MjggOS4yMTIwNiAxMS43OTc3IDYuMTE5NDEgOC4yMzIxNSA1LjYyOTMxQzcuNjg1NjMgNS41NTQyMiA3LjE3OTU1IDUuNDkxMzggNi41MTgzNCA1LjUxMTVaIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTYgM0wyIDcuNUw2LjUgMTJWOS41SDhMMTEgMTBMMTQgMTIuNVYxMEwxMSA2LjVMNiA1VjNaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",ratio:1}),(0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDJDNS43OSAyIDQgMy43OSA0IDZWMTRDNCAxNi4yMSA1Ljc5IDE4IDggMThIMTJDMTQuMjEgMTggMTYgMTYuMjEgMTYgMTRWNkMxNiAzLjc5IDE0LjIxIDIgMTIgMkg4Wk0xMS44OCAyMS45MkMxMC4yIDIxLjkyIDguNzYgMjAuOTcgOC4xNyAxOS41SDEzLjQ4QzE1LjY5IDE5LjUgMTcuNDggMTcuNzEgMTcuNDggMTUuNVY2LjI4QzE4Ljk1IDYuODcgMjAgOC4zMSAyMCAxMFYxNy40NUMyMCAxOS4yNSAxNy45NyAyMS45MiAxNS4zNSAyMS45MkgxMS44OFoiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg==",ratio:1})),uS=(0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuNiAxMC42MDAzTDguNCA5LjkwMDI3QzguOSA5LjgwMDI3IDkuMSA5LjMwMDI3IDkgOC44MDAyN0M4LjkgOC4zMDAyNyA4LjQgOC4xMDAyNyA3LjkgOC4yMDAyN0w2LjQgOC42MDAyN0M3LjggNi4xMDAyNyAxMCA0LjcwMDI3IDEyLjUgNC44MDAyN0MxNS4xIDQuOTAwMjcgMTcuNCA2LjYwMDI3IDE4LjUgOS4zMDAyN0MxOC42IDkuNjAwMjcgMTkgOS45MDAyNyAxOS4zIDkuOTAwMjdDMTkuNCA5LjkwMDI3IDE5LjUgOS45MDAyNyAxOS42IDkuODAwMjdDMjAuMSA5LjYwMDI3IDIwLjMgOS4xMDAyNyAyMC4xIDguNzAwMjdDMTguOSA1LjMwMDI3IDE1LjkgMy4xMDAyNyAxMi42IDMuMDAwMjdDOS40IDIuOTAwMjcgNi43IDQuNjAwMjcgNC45IDcuNzAwMjdMNC43IDUuOTAwMjdDNC43IDUuNDAwMjcgNC4yIDUuMTAwMjcgMy43IDUuMTAwMjdDMy4zIDUuMTAwMjcgMyA1LjUwMDI3IDMgNi4wMDAyN0wzLjMgOC45MDAyN0MzLjMgOS41MDAyNyAzLjYgMTAuMDAwMyA0LjEgMTAuMzAwM0M0LjQgMTAuNTAwMyA0LjggMTAuNjAwMyA1LjEgMTAuNjAwM0M1LjMgMTAuNzAwMyA1LjUgMTAuNzAwMyA1LjYgMTAuNjAwM1oiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZD0iTTIxLjIgMTQuODAwM0MyMS4xIDE0LjIwMDMgMjAuOCAxMy43MDAzIDIwLjQgMTMuNDAwM0MyMCAxMy4xMDAzIDE5LjQgMTMuMDAwMyAxOC45IDEzLjEwMDNMMTYuMSAxMy44MDAzQzE1LjYgMTMuOTAwMyAxNS40IDE0LjQwMDMgMTUuNSAxNC45MDAzQzE1LjYgMTUuNDAwMyAxNi4xIDE1LjYwMDMgMTYuNiAxNS41MDAzTDE4LjEgMTUuMTAwM0MxNi43IDE3LjYwMDMgMTQuNSAxOS4wMDAzIDEyIDE4LjkwMDNDOS40IDE4LjgwMDMgNy4xIDE3LjEwMDMgNiAxNC40MDAzQzUuOCAxMy45MDAzIDUuMyAxMy43MDAzIDQuOSAxMy45MDAzQzQuNSAxNC4xMDAzIDQuMiAxNC42MDAzIDQuNCAxNS4wMDAzQzUuNyAxOC4zMDAzIDguNyAyMC41MDAzIDEyIDIwLjYwMDNDMTIuMSAyMC42MDAzIDEyLjIgMjAuNjAwMyAxMi4zIDIwLjYwMDNDMTUuMyAyMC42MDAzIDE4IDE4LjkwMDMgMTkuNyAxNS45MDAzTDE5LjkgMTcuNzAwM0MxOS45IDE4LjIwMDMgMjAuMyAxOC41MDAzIDIwLjggMTguNTAwM0gyMC45QzIxLjQgMTguNTAwMyAyMS43IDE4LjAwMDMgMjEuNyAxNy41MDAzTDIxLjIgMTQuODAwM1oiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg==",ratio:1}),uT=(0,nu.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy45MDk5IDVIMTYuODA5OUwxNi40Njk5IDMuOTdDMTYuMDc5OSAyLjc5IDE0Ljk3OTkgMiAxMy43Mzk5IDJIMTAuNjE5OUM5LjM3OTg3IDIgOC4yODk4NyAyLjc5IDcuODg5ODcgMy45N0w3LjU0OTg3IDVINi40NDk4N0M0LjM5OTg3IDUgMy4yNTk4NyA3LjM3IDQuNTM5ODcgOC45OEM1LjAzOTg3IDkuNiA1LjMwOTg3IDEwLjM3IDUuMzA5ODcgMTEuMTZWMTYuODhDNS4zMDk4NyAxOS41NyA3LjQ4OTg3IDIxLjc2IDEwLjE4OTkgMjEuNzZIMTQuMTg5OUMxNi44Nzk5IDIxLjc2IDE5LjA2OTkgMTkuNTggMTkuMDY5OSAxNi44OFYxMS4xNkMxOS4wNjk5IDEwLjM3IDE5LjMzOTkgOS42IDE5LjgzOTkgOC45OEMyMS4wOTk5IDcuMzcgMTkuOTU5OSA1IDE3LjkwOTkgNVpNMTEuMzg5OSAxNi4xNEMxMS4zODk5IDE2LjYyIDEwLjk5OTkgMTcuMDIgMTAuNTA5OSAxNy4wMkMxMC4wMjk5IDE3LjAyIDkuNjM5ODcgMTYuNjMgOS42Mzk4NyAxNi4xNFYxMC40NUM5LjYzOTg3IDkuOTcgMTAuMDI5OSA5LjU3IDEwLjUwOTkgOS41N0MxMC45ODk5IDkuNTcgMTEuMzg5OSA5Ljk2IDExLjM4OTkgMTAuNDVWMTYuMTRaTTE0LjY0OTkgMTYuMTRDMTQuNjQ5OSAxNi42MiAxNC4yNTk5IDE3LjAyIDEzLjc2OTkgMTcuMDJDMTMuMjg5OSAxNy4wMiAxMi44ODk5IDE2LjYzIDEyLjg4OTkgMTYuMTRWMTAuNDVDMTIuODg5OSA5Ljk3IDEzLjI3OTkgOS41NyAxMy43Njk5IDkuNTdDMTQuMjQ5OSA5LjU3IDE0LjY0OTkgOS45NiAxNC42NDk5IDEwLjQ1VjE2LjE0Wk05LjM4OTg3IDVMOS41NDk4NyA0LjUyQzkuNjk5ODcgNC4wNiAxMC4xMjk5IDMuNzUgMTAuNjE5OSAzLjc1SDEzLjczOTlDMTQuMjE5OSAzLjc1IDE0LjY0OTkgNC4wNiAxNC44MDk5IDQuNTJMMTQuOTY5OSA1SDkuMzg5ODdaIiBmaWxsPSIjMjgzMDNGIi8+Cjwvc3ZnPg==",ratio:1}),u_=function(e,t){var n=e.message,r=e.messageId,i=e.date,a=rM(),o=rA(es).authZoneConfig.zoneType,s=ak(),u=s.resendMessage,l=s.resendImageMessage,d=s.sendFileMessage,f=function(){a(Z(!1)),a(tK(void 0))},g=function(){var t=tA(e);t&&u(t,n.replyId,null==r?void 0:r.toString(),{value:null==n?void 0:n.value,messageType:n.type}),n.type===e_.FileDoc&&n.fileId&&(d(n.fileId,e,!0),rh(aT.FIlE,o)),n.type===e_.Img&&n.fileId&&n.filePreviewId&&(l({imageId:n.fileId,imagePreviewId:n.filePreviewId},e.messageId),rh(aT.IMAGE,o)),f(),rt(o,"отправить еще раз")},m=function(){a(tZ({id:r,date:i})),f(),rt(o,"удалить")},v=function(){var t=tA(e);t&&uk(null==t?void 0:t.replace(/<[^>]*>/g," ")),f()},h=(0,c.useMemo)(function(){var t=[{label:"отправить еще раз",onClick:g,icon:uS},{label:"удалить",status:"alert",onClick:m,icon:uT}],n=e.message.type===e_.Img&&!e.message.fileId&&!e.message.filePreviewId,r=e.message.type===e_.FileDoc&&!e.message.fileId;return(n||r)&&t.splice(0,1),t},[g]);return{menu:(0,c.useMemo)(function(){return[].concat((0,p.A)((s0.REJECTED,[])),[{icon:uD,label:"скопировать",onClick:v}])},[r,n.content,t]),rejectMenu:h}},uj=function(e,t,n){var r=(0,c.useState)(0),i=(0,s.A)(r,2),a=i[0],o=i[1],u=(0,c.useState)({top:0,left:0}),l=(0,s.A)(u,2),d=l[0],f=l[1],m=(0,g.sn)()?92:76,p=(0,c.useRef)(null),v=(0,c.useRef)(null),h=(0,c.useRef)(null),y=iH(),b=y.containerRef,w=y.scrollRef,M=y.containerHeight,A=y.scrollHeight;return(0,c.useLayoutEffect)(function(){if(!e||!w.current||!b.current||!p.current)return void o(0);var r,i,a=p.current.offsetTop-w.current.scrollTop,s=p.current.offsetHeight+((null==(r=v.current)?void 0:r.offsetHeight)||0)+8*((null==t?void 0:t.reason)!=="reply")+16;o(w.current.offsetHeight-s-a-m);var u=(null==(i=h.current)?void 0:i.offsetLeft)||0;f({top:p.current.offsetHeight+8,left:"main"===n?Math.min(p.current.offsetWidth-u,p.current.offsetWidth-200):u})},[p,M,v,w,e,h,null==t?void 0:t.reason,A]),{menuOffset:d,messageRef:p,transform:a,menuRef:v,wrapperRef:h}},ux=n(89063),uL=n(869),uz=["className"],uP=b("loader",{loader:"MNk7t"}),uR=function(e){var t=e.className,n=(0,u.A)(e,uz);return l().createElement("div",(0,a.A)({className:uP(null,[t])},n,{"data-t-id":"ui-Loader"}),l().createElement(uL.Z,{color:"contentPlaceholder",size:"m"}))};function uY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var uU=(0,L.zD)("file/generateFile",function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r,i,a,o,s,u;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.message,a=n.dispatch,o=n.rejectWithValue,e.prev=2,e.next=5,eq(r);case 5:return s=e.sent,u=URL.createObjectURL(s),a(tF({id:i.messageId,date:i.date,messageStatus:eT.delivered,message:{fileUrl:u}})),e.abrupt("return",u);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",o(eZ(e.t0)));case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}()),uB=(0,L.zD)("file/generateFile",function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r,i,a,s,u,c,l,d,f,g;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,a=t.message,s=n.dispatch,u=n.rejectWithValue,c=null==(r=a.message)?void 0:r.filePreviewUrl,e.prev=3,s(tF({id:a.messageId,date:a.date,messageStatus:eT.download})),e.next=7,eq(i);case 7:return l=e.sent,e.next=10,aO(l);case 10:return d=e.sent,f=URL.createObjectURL(l),g=c?"fileUrl":"filePreviewUrl",s(tF({id:a.messageId,date:a.date,messageStatus:eT.delivered,message:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uY(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uY(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,o.A)({},g,f),c?{imageSettings:d}:{})})),e.abrupt("return",{srcFile:f,imageSettings:d});case 17:return e.prev=17,e.t0=e.catch(3),s(tF({id:a.messageId,date:a.date,messageStatus:c?eT.failed:eT.refresh})),e.abrupt("return",u(eZ(e.t0)));case 21:case"end":return e.stop()}},e,null,[[3,17]])}));return function(t,n){return e.apply(this,arguments)}}()),uH=(0,c.createContext)(function(){}),uV=function(e){var t=e.children,n=rM(),r=(0,io.V)(rA(au).map(function(e){return e.messageId})),i=(0,c.useCallback)(function(e){r.current.includes(e)&&n(t4(e))},[]);return l().createElement(uH.Provider,{value:i},t)},uW=["className","onClick","buttonLabel"],uG=b("refresh-button",{"refresh-button":"qQf7m"}),uF=function(e){var t=e.className,n=e.onClick,r=e.buttonLabel,i=(0,u.A)(e,uW),o=(0,is._)(),c=(0,s.A)(o,2),d=c[0],f=c[1];return l().createElement(uS,(0,a.A)({},i,{"aria-label":r,className:uG(null,[t]),color:d?"secondary-invert":"primary-invert",onClick:n,onMouseEnter:f.on,onMouseLeave:f.off,tagName:"button",type:"button","data-t-id":"ui-RefreshButton"}))},uQ=(0,nu.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDNDNyAzIDMgNyAzIDEyQzMgMTcgNyAyMSAxMiAyMUMxNyAyMSAyMSAxNyAyMSAxMkMyMSA3IDE3IDMgMTIgM1pNMTIgMTkuM0M4IDE5LjMgNC44IDE2IDQuOCAxMkM0LjggOCA4IDQuOCAxMiA0LjhDMTYgNC44IDE5LjMgOC4xIDE5LjMgMTIuMUMxOS4zIDE2IDE2IDE5LjMgMTIgMTkuM1oiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZD0iTTE1IDExLjFIMTIuOVY3QzEyLjkgNi41IDEyLjUgNi4xIDEyIDYuMUMxMS41IDYuMSAxMS4xIDYuNSAxMS4xIDdWMTEuOEMxMS4xIDEyLjQgMTEuNiAxMi45IDEyLjIgMTIuOUgxNUMxNS41IDEyLjkgMTUuOSAxMi41IDE1LjkgMTJDMTUuOSAxMS41IDE1LjUgMTEuMSAxNSAxMS4xWiIgZmlsbD0iIzI4MzAzRiIvPgo8L3N2Zz4K"}),uZ=(0,nu.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS4zOTk4IDYuMzEwMzFDMTUuMDA5OCA2LjAyMDMxIDE0LjQ1OTggNi4xMDAzMSAxNC4xNjk4IDYuNDgwMzFMNi40ODk4MyAxNi42NTAzTDYuMzA5ODMgMTYuNjcwM0wzLjQyOTgzIDE0LjMzMDNDMy4wNDk4MyAxNC4wMjAzIDIuNDk5ODMgMTQuMDgwMyAyLjE5OTgzIDE0LjQ1MDNDMS44OTk4MyAxNC44MjAzIDEuOTQ5ODMgMTUuMzgwMyAyLjMyOTgzIDE1LjY4MDNMNS4yMTk4MyAxOC4wMzAzQzUuNTU5ODMgMTguMzEwMyA1Ljk2OTgzIDE4LjQ1MDMgNi4zOTk4MyAxOC40NTAzQzYuNDc5ODMgMTguNDUwMyA2LjU0OTgzIDE4LjQ1MDMgNi42Mjk4MyAxOC40NDAzQzcuMTM5ODMgMTguMzgwMyA3LjU4OTgzIDE4LjEyMDMgNy44OTk4MyAxNy43MTAzTDE1LjU3OTggNy41NDAzMUMxNS44NTk4IDcuMTUwMzEgMTUuNzg5OCA2LjYwMDMxIDE1LjM5OTggNi4zMTAzMVoiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMi41NDk4IDYuMTkwMzFDMjIuMTY5OCA1Ljg5MDMxIDIxLjYxOTggNS45NTAzMSAyMS4zMTk4IDYuMzIwMzFMMTMuMzM5OCAxNi4yMzAzQzEzLjI5OTggMTYuMjgwMyAxMy4yMTk4IDE2LjI5MDMgMTMuMTU5OCAxNi4yNTAzTDExLjY0OTggMTUuMDIwM0wxMC41NDk4IDE2LjM4MDNMMTIuMDU5OCAxNy42MTAzQzEyLjg2OTggMTguMjcwMyAxNC4wNDk4IDE4LjE0MDMgMTQuNjk5OCAxNy4zMzAzTDIyLjY3OTggNy40MjAzMUMyMi45ODk4IDcuMDUwMzEgMjIuOTI5OCA2LjUwMDMxIDIyLjU0OTggNi4xOTAzMVoiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg=="}),uq=["date","className","withIcon","view","side","stage"],uK=b("date-block",{"date-block":"U64Z4","date-block_side_main":"n55jq","date-block_view_block":"saL1c","date-block_view_img-block":"QjGu9"}),uJ=(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({},s0.PENDING,uQ),s0.READED,uQ),s0.SUBMITED,uZ),s0.UNKNOWN,null),s0.REJECTED,null),uX=function(e){var t=e.date,n=e.className,r=e.withIcon,i=e.view,o=e.side,s=void 0===o?"main":o,d=e.stage,f=void 0===d?s0.UNKNOWN:d,g=(0,u.A)(e,uq),m=uJ[f],p=(0,c.useMemo)(function(){return t?(0,sX.A)(new Date(t),"HH:mm"):null},[t]);return l().createElement(ns.E,(0,a.A)({align:"right",className:uK({view:void 0===i?"inside":i,side:s},[n]),color:"main"===s?"primary":"tertiary",tagName:"time",variant:"caption-medium"},g,{"data-t-id":"ui-DateBlock"}),p,(void 0===r||r)&&m&&l().createElement(m,{color:"main"===s?"primary":"tertiary",size:"xs"}))},u$=["className","reply","onReplyClick","onClick","side"],u0=b("reply",{reply:"ZOqV6",reply_side_main:"pikDd",reply_side_opposite:"bwLnx",reply__text:"WgXaC"}),u1=function(e){var t,n=e.className,r=e.reply,i=e.onReplyClick,o=e.onClick,s=e.side,c=(0,u.A)(e,u$),d=r.author,f=r.message;return l().createElement("div",(0,a.A)({className:u0({side:s},[n]),onClick:function(e){null==o||o(e),null==i||i(e)}},c,{"data-t-id":"ui-Reply"}),(null==d?void 0:d.name)&&l().createElement(ns.E,{className:u0("name"),color:"primary-invert",variant:"body-accent-small"},d.name),l().createElement(ns.E,{className:u0("text"),color:"primary-invert",variant:"body-small"},null==(t=tA(f))?void 0:t.replace(/<[^>]*>?/gm," ")))},u4=["className","messageId","zoneType"],u2=b("reload-indicator",{"reload-indicator":"ifewg"}),u5=(0,nu.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41NCAxNS4yMDI1TDE1LjM3IDUuMTQyNUMxNC44MiA0LjA3MjUgMTMuODcgMy4zMjI1IDEyLjc2IDMuMDgyNUMxMi4yNiAyLjk3MjUgMTEuNzUgMi45NzI1IDExLjI1IDMuMDgyNUMxMC4xNCAzLjMyMjUgOS4xOCA0LjA3MjUgOC42MyA1LjE0MjVMMy40NiAxNS4yMDI1QzMuMTYgMTUuNzgyNSAzIDE2LjQzMjUgMyAxNy4wOTI1QzMgMTkuMjUyNSA0LjYyIDIxLjAwMjUgNi42MiAyMS4wMDI1SDE3LjM4QzE5LjM4IDIxLjAwMjUgMjEgMTkuMjUyNSAyMSAxNy4wOTI1QzIxIDE2LjQzMjUgMjAuODQgMTUuNzgyNSAyMC41NCAxNS4yMDI1Wk0xMi44OCAxNy4zMDI1QzEyLjg4IDE3Ljc4MjUgMTIuNDkgMTguMTgyNSAxMiAxOC4xODI1QzExLjUxIDE4LjE4MjUgMTEuMTIgMTcuNzkyNSAxMS4xMiAxNy4zMDI1VjE2LjgxMjVDMTEuMTIgMTYuMzMyNSAxMS41MSAxNS45MzI1IDEyIDE1LjkzMjVDMTIuNDkgMTUuOTMyNSAxMi44OCAxNi4zMjI1IDEyLjg4IDE2LjgxMjVWMTcuMzAyNVpNMTIuODggMTMuODkyNUMxMi44OCAxNC4zNzI1IDEyLjQ5IDE0Ljc3MjUgMTIgMTQuNzcyNUMxMS41MSAxNC43NzI1IDExLjEyIDE0LjM4MjUgMTEuMTIgMTMuODkyNVYxMC4wMDI1QzExLjEyIDkuNTIyNSAxMS41MSA5LjEyMjUgMTIgOS4xMjI1QzEyLjQ5IDkuMTIyNSAxMi44OCA5LjUyMjUgMTIuODggMTAuMDAyNVYxMy44OTI1WiIgZmlsbD0iIzI4MzAzRiIvPgo8L3N2Zz4K"}),u3=function(e){var t=e.className,n=e.messageId,r=e.zoneType,i=(0,u.A)(e,u4),o=rA(ap),s=rM();return(0,c.useEffect)(function(){nK(),n8(r)},[]),(0,c.useEffect)(function(){(null==o?void 0:o.id)===n&&(null==o?void 0:o.reason)==="error"&&re(r)},[o]),l().createElement(u5,(0,a.A)({"aria-label":"Меню отправки сообщения",className:u2(null,[t]),color:"error",onClick:function(){s(tK({id:n,reason:"error"})),s(Z(!0)),n9(r)},tagName:"button",type:"button"},i,{"data-t-id":"ui-ReloadIndicator"}))},u6=["className","stage","side","date","reply","withDate","dateView","offset","isLoading","author","children","withUsername","additionalControls","bordered","zoneType","withBackground","message"],u9=b("wrapper",{wrapper:"kx8MD",wrapper_side_main:"YTvbi",wrapper_side_opposite:"jhYfR",wrapper__reply:"dxbXf",wrapper__username:"pMglA",wrapper__content:"AEfjo",wrapper__content_isLoading:"gwom4",wrapper__content_side_main:"py4Vv",wrapper__content_filled:"mlnoJ",wrapper__content_side_opposite:"TmRCj",wrapper__content_offset_small:"oe9dF",wrapper__content_offset_medium:"t5apH",wrapper__content_offset_none:"emR8X",wrapper__indicator:"C8fBy",wrapper__date:"bqK8L",wrapper__date_view_inside:"aVxjt",wrapper__date_view_block:"a0Hw2","wrapper__date_view_img-block":"aEYmH"}),u8=(0,c.forwardRef)(function(e,t){var n,r=e.className,i=e.stage,o=void 0===i?s0.UNKNOWN:i,s=e.side,d=void 0===s?"opposite":s,f=e.date,g=e.reply,m=e.withDate,p=e.dateView,v=void 0===p?"inside":p,h=e.offset,y=e.isLoading,b=e.author,w=e.children,M=e.withUsername,A=e.additionalControls,E=e.bordered,O=e.zoneType,I=e.withBackground,C=e.message,N=(0,u.A)(e,u6),k=(0,c.useRef)(null),D=(0,c.useRef)(null),S=(0,ux.W)(D),T=iH().scrollToInnerNode,_=(0,c.useContext)(uH);(0,c.useEffect)(function(){S&&_(C.messageId)},[S]);var j=(0,c.useCallback)(function(){if(g){var e=tI(g.message.messageId);e&&T(e)}},[g]),x=rM(),L=function(){x(Z(!0)),x(tK({id:C.messageId,reason:"menu"}))},z=(n=(0,eb.A)(eM().mark(function e(){var t;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=tO(C).fileUrl)){e.next=6;break}return e.next=4,x(uB({url:t,message:C}));case 4:ry(C.message.type===e_.Img?aT.IMAGE:aT.FIlE);case 6:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),P="opposite"===d&&C.message.type!==e_.CAPTCHA&&M&&!!(null!=b&&b.name),R=C.messageStatus===eT.refresh&&tE(C.message.type);return l().createElement("div",{className:u9({side:d}),ref:(0,nr.k)([t,D]),"data-t-id":"ui-Wrapper"},l().createElement("div",(0,a.A)({className:u9("content",{offset:void 0===h?"small":h,side:d,bordered:void 0===E||E,filled:void 0===I||I,isLoading:y},[r]),onContextMenu:function(e){tE(C.message.type)||(e.preventDefault(),L())},onKeyDown:function(e){("Enter"===e.code||"Space"===e.code)&&(e.stopPropagation(),e.preventDefault(),L())},ref:k},N),P&&l().createElement(ns.E,{className:u9("username"),color:"tertiary",variant:"caption-medium"},b.name),y?l().createElement(uR,null):l().createElement(l().Fragment,null,g&&l().createElement(u1,{className:u9("reply"),onReplyClick:j,reply:g,side:d}),w,o!==s0.REJECTED&&(void 0===m||m)&&l().createElement(uX,{className:u9("date",{view:v}),date:f,side:d,stage:o,view:v}))),A,o===s0.REJECTED&&C.messageStatus!==eT.refresh&&l().createElement(u3,{className:u9("indicator"),messageId:C.messageId,zoneType:O}),R&&l().createElement(uF,{buttonLabel:"Повторить загрузку файла",onClick:z}))}),u7=["side","stage","className","additionalControls","bordered","dateView","isLoading","message","withUsername","offset","withBackground","withDate","reply","zoneType","wrapperProps","author"],ce=function(e){var t=e.bordered,n=e.withDate,r=e.withBackground,i=e.dateView,o=e.offset,s=e.wrapperClassName,d=void 0===s?"":s;return function(e){return(0,c.forwardRef)(function(s,c){var f,g=s.side,m=void 0===g?"opposite":g,p=s.stage,v=s.className,h=s.additionalControls,y=s.bordered,b=s.dateView,w=s.isLoading,M=s.message,A=s.withUsername,E=s.offset,O=s.withBackground,I=s.withDate,C=s.reply,N=s.zoneType,k=s.wrapperProps,D=s.author,S=(0,u.A)(s,u7);return l().createElement(u8,(0,a.A)({additionalControls:h,author:D,bordered:null!=(f="function"==typeof t?t(m):t)?f:y,className:[d,void 0===v?"":v].join(" "),date:M.date,dateView:i||b,isLoading:w,message:M,offset:o||E,ref:c,reply:C,side:m,stage:p,withBackground:null!=r?r:O,withDate:null!=n?n:I,withUsername:A,zoneType:N},void 0===k?{}:k,{"data-t-id":"hocs-withMessageWrapper"}),l().createElement(e,(0,a.A)({message:M,side:m,stage:p},S,{"data-t-id":"hocs-withMessageWrapper"})))})}},ct=function(){return null},cn=b("cells",{cells:"uXrWS","cells__image-wrapper":"LENyK","cells__image-wrapper_isImage":"q6r20",cells__image:"rRLG",cells__text:"AWmgM"}),cr=ce({offset:"medium",wrapperClassName:cn()})(function(e){var t=e.items,n=e.description,r=tA(e.message);return l().createElement(l().Fragment,null,r&&l().createElement(ns.E,{className:cn("text"),variant:"body-small","data-t-id":"ui-CellsView"},r),null==t?void 0:t.map(function(e,n){return l().createElement(ct,(0,a.A)({},e,{key:cn("item",{i:n}),withDivider:n!==t.length-1}))}),n&&l().createElement(ns.E,{className:cn("text"),color:"tertiary",variant:"body-paragraph-small"},n))}),ci=ce({bordered:!0,dateView:"block",offset:"none",wrapperClassName:b("location",{location:"MxW2R"})()})(function(){return l().createElement("div",{"data-t-id":"ui-LocationView"})}),ca=n(23511),co=function(e){var t,n,r=e.message,i=e.setImgUrl,a=e.setImgPreview,o=rM(),s=rA(es).authZoneConfig.zoneType,u=r.messageStatus===eT.refresh,l=r.message,d=l.imageSettings,f=l.fileUrl,g=l.filePreviewUrl,m=r.messageStatus===eT.download||r.messageStatus===eT.sent,p=tO(r),v=(t=(0,eb.A)(eM().mark(function e(){var t,n;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g?null==p?void 0:p.filePreviewUrl:null==p?void 0:p.fileUrl){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,o(uB({url:t,message:r}));case 5:return n=e.sent,e.abrupt("return",n.payload);case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),h=(n=(0,eb.A)(eM().mark(function e(){var t,n,r;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(rp(aT.IMAGE,s),!(null!=p&&p.filePreviewUrl&&null!=p&&p.fileUrl&&(!f||!g))){e.next=12;break}return e.next=6,v();case 6:n=(t=e.sent).srcFile,r=t.imageSettings,i({fileUrl:f||!g&&n,filePreviewUrl:g||g&&n,imageSettings:d||r}),e.next=13;break;case 12:i({fileUrl:f,filePreviewUrl:g,imageSettings:d});case 13:g&&a({isImgPreviewOpen:!0,type:i9.show});case 14:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,c.useEffect)(function(){r.messageStatus===eT.download&&v()},[]),{filePreviewUrl:g,isLoading:m,isRefresh:u,handleCLick:h}},cs=b("image",{image__wrapper:"cuqo3",image__wrapper_loading:"LBKfK",image__empty_loading:"pHYUL",image__spinner:"aqpRM",image__image:"WLOit",image__image_loading:"YzIEO",image__empty:"n3IOR",image__empty_refresh:"lM8dz","loader-animation":"voQd5"}),cu=function(){return l().createElement(ca.y,{className:cs("spinner"),view:"yellow-white","data-t-id":"ui-ImageView"})},cc=function(e){return e.isRefresh?l().createElement(ns.E,{align:"center",color:"secondary",size:"xs"},"не удалось<br/>загрузить фото"):l().createElement(I.xsz,{className:cs("empty_icon"),color:"primary-invert",size:"m"})},cl=(0,rH.Zz)((0,d.Ng)(null,function(e){return{setImgPreview:function(t){return e(tJ(t))},setImgUrl:function(t){return e(r0(t))}}}),ce({bordered:!0,dateView:"img-block",offset:"none",wrapperClassName:cs()}))(function(e){var t=co({message:e.message,setImgPreview:e.setImgPreview,setImgUrl:e.setImgUrl}),n=t.filePreviewUrl,r=t.handleCLick,i=t.isLoading,a=t.isRefresh;return l().createElement("div",{className:cs("wrapper",{loading:i}),onClick:r},i&&l().createElement(cu,null),n?l().createElement("img",{alt:"",className:cs("image",{loading:i}),src:n}):l().createElement("div",{className:cs("empty",{loading:i,refresh:a&&!!n})},!i&&l().createElement(cc,{isRefresh:a})))}),cd=function(e){if(e)return"".concat(Math.ceil(e/1024)," Кб")},cf=function(e){if(!e)return{name:"",type:""};var t=e.lastIndexOf(".");return{name:e.slice(0,t),type:e.slice(t+1)}},cg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.style.display="none",n.click(),n.remove()};function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cv=function(e){var t,n=rM(),r=rA(es).authZoneConfig.zoneType,i=tO(e),a=i.name,o=i.size,u=e.message.name||a,l=cd(e.message.size||o),d=(0,c.useState)(!1),f=(0,s.A)(d,2),g=f[0],m=f[1],p=!e.message.fileUrl,v=e.messageStatus===eT.sent||g,h=e.message.fileUrl&&u?{download:a,href:e.message.fileUrl}:{},y=(t=(0,eb.A)(eM().mark(function t(){var i,a;return eM().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(rp(aT.FIlE,r),!e.message.fileUrl){t.next=4;break}return cg(e.message.fileUrl,u),t.abrupt("return");case 4:if(!((i=tO(e).fileUrl)&&!e.message.fileUrl)){t.next=12;break}return m(!0),t.next=9,n(uU({url:i,message:e}));case 9:a=t.sent,(uU.rejected.match(a)||uU.fulfilled.match(a))&&m(!1),uU.fulfilled.match(a)&&cg(a.payload,u);case 12:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)});return cp(cp({},cf(u)),{},{size:l,isLoading:v,handleCLick:y,configDownload:h,isDownloadStep:p})},ch=b("file",{file__wrapper:"sUNNg",file__icon:"qC3hI",file__icon_loading:"wcH5U",file__info:"Q2hMw",file__text:"dIIY0",file__name:"IhhLi",file__size:"bVXxb","loader-animation":"c4IzR"}),cy=ce({bordered:!0,offset:"none",wrapperClassName:ch()})(function(e){var t=e.message,n=e.side,r=cv(t),i=r.name,a=r.size,o=r.type,s=r.isLoading,u=r.isDownloadStep,c=r.handleCLick;return l().createElement("div",{className:ch("wrapper"),onClick:c},l().createElement("div",{className:ch("icon",{loading:s})},s?l().createElement(ca.y,{view:"dark-white","data-t-id":"ui-FileView"}):u?l().createElement(I.xsz,null):l().createElement(I.Vdr,null)),l().createElement("div",{className:ch("info")},l().createElement("div",{className:ch("text")},l().createElement(ns.E,{className:ch("name"),color:"main"===n?"primary":"primary-invert",variant:"body-small"},i),l().createElement(ns.E,{color:"main"===n?"primary":"primary-invert",variant:"body-small"},".",o)),l().createElement(ns.E,{className:ch("size"),tagName:"span",variant:"body-small"},a)))}),cb=b("message-text",{"message-text":"Q5yDq","message-text_side_main":"RUSnV","message-text_side_opposite":"gWlLW","message-text__text":"nRseA"}),cw=ce({bordered:function(e){return"opposite"===e},withDate:!1})(function(e){var t=e.className,n=e.message,r=e.side,i=e.stage;return l().createElement("p",{className:cb({side:r},[t]),"data-t-id":"ui-TextView"},l().createElement(ns.E,{className:cb("text"),color:"main"===r?"primary":"primary-invert","data-is-text":!0,tagName:"span",variant:"body-small"},tA(n)),l().createElement(uX,{date:n.date,side:r,stage:i,view:"inside"}))}),cM=b("captcha",{captcha:"VDlHi"}),cA=["activeCaptchaMessageId","isValidating","message","recreateCount","processedCaptchas","targetCaptcha","onClick","className","dispatch"],cE=(0,d.Ng)(function(e){return{activeCaptchaMessageId:oZ(e).activeCaptchaMessageId,isValidating:oZ(e).validateStatus,recreateCount:oX(e),processedCaptchas:o$(e),targetCaptcha:oK(e)}})(function(e){var t=e.activeCaptchaMessageId,n=e.isValidating,r=e.message.messageId,i=e.recreateCount,o=e.processedCaptchas,s=e.targetCaptcha,c=e.onClick,d=(e.className,e.dispatch,(0,u.A)(e,cA)),f=o.includes(r),g=ih().stage,m=sT(),p=m.captchaStage,v=m.captchaUpdate,h=g===ia.CAPTCHA_NEEDED&&"blocked"===p;return f||i>=5||n===ey.loading||r!==t||!h&&"retry"!==p&&"start"!==p?null:l().createElement(uF,(0,a.A)({buttonLabel:"Отправить капчу повторно",onClick:function(e){null==c||c(e),v((null==s?void 0:s.captchaId)||r)}},d,{"data-t-id":"ui-ReloadButton"}))}),cO=["message"],cI=["message","reply"],cC=ce({withDate:!1})(function(e){var t=e.message,n=t.message.content,r=t.captcha;return r?l().createElement("img",{alt:"Капча",className:cM(),src:r,"data-t-id":"ui-Captcha"}):l().createElement(ns.E,{color:"primary-invert",variant:"body-small"},n)}),cN=function(e){var t=e.message,n=(0,u.A)(e,cO),r=rA(o$).includes(t.messageId);return l().createElement(cC,(0,a.A)({additionalControls:l().createElement(cE,{message:t,"data-t-id":"ui-MessageContent"}),isLoading:r,message:t,offset:r||!t.captcha?"small":"none"},n))},ck=function(e){var t=e.message,n=e.reply,r=(0,u.A)(e,cI),i=t.message.type;return i===e_.File?l().createElement(cr,(0,a.A)({message:t,reply:n},r)):i===e_.Geolocation?l().createElement(ci,(0,a.A)({lat:0,lng:0,message:t,reply:n},r)):i===e_.CAPTCHA?l().createElement(cN,(0,a.A)({message:t},r)):i===e_.Img?l().createElement(cl,(0,a.A)({message:t,withDate:t.messageStatus!==eT.sent},r)):i===e_.FileDoc?l().createElement(cy,(0,a.A)({message:t},r)):l().createElement(cw,(0,a.A)({message:t,reply:n},r))},cD=["green","teal","blue","violet","magenta","red","orange","yellow"],cS=function(e){var t;return{image:null==e?void 0:e.image,name:null!=(t=null==e?void 0:e.name)?t:"Бот",color:(0,sj.isNil)(null==e?void 0:e.color)?null!=e&&e.name?cD[e.name.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%9]:void 0:cD[Number(e.color)]}},cT=["message","side","author","withRejectedMessage","rejectedMessage","stage","withAvatar","className","reply","withUsername"],c_=b("message",{message:"VckMM",message_leftOffset:"ZukdU",message__menu:"Ic6Xm",message__container:"BqIXG",message__image:"c87zA",message__image_view_default:"afuvz",message_side_main:"pCvrx",message_side_opposite:"YJGEc",message__wrapper:"qjiHG",message__wrapper_side_main:"wg8yR",message__wrapper_side_opposite:"aCiR7",message__wrapper_text:"mJAUV",message__username:"b2RYH",message__description:"ebxB1"}),cj=(0,c.forwardRef)(function(e,t){var n=e.message,r=e.side,i=void 0===r?"main":r,s=e.author,c=(e.withRejectedMessage,e.rejectedMessage,e.stage),d=void 0===c?s0.REJECTED:c,f=e.withAvatar,g=e.className,m=e.reply,p=e.withUsername,v=(0,u.A)(e,cT),h="opposite"===i&&f,y="opposite"===i&&!f,b=u_(n,d),w=rA(ap),M=(null==w?void 0:w.id)===n.messageId,A=uj(M,w,i),E=A.messageRef,O=A.transform,I=A.menuRef,C=A.menuOffset,N=A.wrapperRef,k=n.message.type!==e_.Img,D=cS(s);return l().createElement(iz.P.div,(0,a.A)({animate:{y:O,zIndex:3*!!M,pointerEvents:M?"none":"all"},className:c_({side:i,leftOffset:y},[g]),"data-message-id":n.messageId,ref:(0,nr.k)([t,E]),transition:{y:{duration:.2}}},v),h&&l().createElement(rL.e,(0,a.A)({className:c_("image",{view:D.color||"default"})},D,{"data-t-id":"ui-Message"})),l().createElement("div",{className:c_("wrapper",{side:i,text:k}),ref:N},l().createElement(ck,{author:s,message:n,reply:m,side:i,stage:d,withUsername:p})),M&&w.reason&&"reply"!==w.reason&&l().createElement("div",{className:c_("container")},l().createElement(rB,{className:c_("menu"),items:"error"===w.reason?b.rejectMenu:b.menu,ref:I,style:(0,o.A)((0,o.A)({},"--offset-top","".concat(C.top,"px")),"--offset-left","".concat(C.left,"px")),theme:"dark",view:"default"})))}),cx=["className","date","list","dividerRef"],cL=["message"],cz=b("message-group",{"message-group":"dfwxg","message-group__date":"vdnJx"}),cP=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.date,i=e.list,o=e.dividerRef,s=(0,u.A)(e,cx);return l().createElement("section",(0,a.A)({className:cz(null,[n]),ref:t},s,{"data-t-id":"ui-MessageGroup"}),l().createElement(oF,{className:cz("date"),dateTime:r,label:r,ref:o,tagName:"time",view:"accent"}),i.map(function(e){var t=e.message,n=(0,u.A)(e,cL);return l().createElement(cj,(0,a.A)({key:t.messageId,message:t},n))}))}),cR=b("skeleton",{skeleton:"exo3g",skeleton_side_main:"WeaOR",skeleton_side_opposite:"hHRRl",skeleton__avatar:"USVwN","skeleton-animation":"c6119",skeleton__message:"ux6Ao",skeleton__message_side_main:"yBxKk",skeleton__message_side_opposite:"WQ1Av"}),cY=function(e){var t=e.side,n=void 0===t?"main":t;return l().createElement("div",{className:cR({side:n}),"data-t-id":"ui-Skeleton"},"opposite"===n&&l().createElement("div",{className:cR("avatar")}),l().createElement("div",{className:cR("message",{side:n}),style:(0,o.A)({},"--message-width","".concat(200+50*Math.random(),"px"))}))},cU=b("skeleton-list",{"skeleton-list":"tHyWH"}),cB=function(){return l().createElement("div",{className:cU(),"data-t-id":"ui-SkeletonList"},Array.from({length:10}).map(function(e,t){return l().createElement(cY,{key:t,side:t%2==0?"main":"opposite"})}))},cH=["className","isLoading","sortType","searchString","isEmptyPopularBtn","welcomeText","dispatch","isLastSessionFinished","systemProblems"],cV=b("message-list",{"message-list":"b3z05","message-list_empty":"QD3wA","message-list__button":"ABFcr","message-list__loader":"qjqCW","message-list__actions":"oS2Qj"}),cW=(0,d.Ng)(function(e){var t;return{isLoading:ao(e),searchString:ay(e),sortType:ah(e),welcomeText:aB(e),systemProblems:aU(e),isLastSessionFinished:an(e),isEmptyPopularBtn:!(aH(e).length||null!=(t=ed(e))&&t.length)}})(function(e){var t=e.className,n=e.isLoading,r=(e.sortType,e.searchString),i=e.isEmptyPopularBtn,o=e.welcomeText,s=(e.dispatch,e.isLastSessionFinished),d=e.systemProblems,f=(0,u.A)(e,cH),g=s8(),m=ut(g),p=m.dividerRefs,v=m.sessionSectionRefs,h=iH(),y=h.containerRef,b=h.onListMount,w=aL(),M=w.addNotification,A=w.removeNotification,E=!n&&0===g.length&&!(null!=r&&r.trim()),O=s&&i&&E;return(0,c.useEffect)(function(){n||b()},[n]),(0,c.useEffect)(function(){s&&null!=d&&d.content?M({key:aP,label:d.content,mode:"button",view:"warning"}):A(aP)},[s,d]),l().createElement("section",(0,a.A)({className:cV({empty:O},[t]),ref:y},f,{"data-t-id":"ui-MessageList"}),n?l().createElement(cB,null):l().createElement(l().Fragment,null,g.map(function(e,t){return l().createElement(cP,(0,a.A)({dividerRef:p[t],key:cV("group",{i:t}),ref:v[t]},e))}),E&&l().createElement(oF,{label:o||"В любой непонятной ситуации пишите сюда",view:"default"})),l().createElement(sQ,{className:cV("actions")}),l().createElement(uN,null))}),cG=n(82485),cF={reconnectCount:0,socketStatus:r7.idle},cQ=(0,L.Z0)({name:"socket",initialState:cF,reducers:{setReconnectCount:function(e,t){e.reconnectCount=t.payload},setSocketStatus:function(e,t){e.socketStatus=t.payload}}}),cZ=cQ.actions,cq=cZ.setReconnectCount,cK=cZ.setSocketStatus,cJ=function(){var e=rA(ep),t=rA(em),n=rA(ef).zoneType,r=void 0===n?"unauthorized":n,i=sT(),a=i.captchaStage,o=i.handleChangeStage,s=ic(),u=rA(ev),l=ih().changeStage,d=rM(),f=(0,c.useCallback)(function(){if(d(ee(u+1)),s){if(d(et()),e===B.CONTENT_LOAD||e===B.HISTORY_LOAD){d($(!1)),l(ia.LOAD_DATA);return}if(e===B.VALIDATE_CAPTCHA)return void l(ia.CAPTCHA_NEEDED);if(e===B.REFRESH_TOKEN){o("start"),l(ia.CAPTCHA_NEEDED);return}if(e===B.WEBSOCKET_CONNECTION){d(cq(0)),l(ia.CONNECTING);return}"authorized"===r||"end"===a?(d($(!1)),l(ia.LOAD_DATA)):l(ia.CAPTCHA_NEEDED)}},[e,a,r,s]);return(0,c.useEffect)(function(){u>=10&&(d(J(U.BLOCK)),d(X(B.UNKNOWN)))},[u]),(0,c.useMemo)(function(){var e;return{content:(e=u>=10?U.BLOCK:t)===U.LOAD||e===U.OFFLINE?{icon:I.HGy,title:`ничего не загрузилось —
обновите чат`,subTitle:"&nbsp;",isOnlyTitle:!0}:e===U.ERROR?{icon:I.HGy,title:"у нас что-то сломалось",subTitle:`обновите чат или возвращайтесь
через 15 минут`}:{icon:I.HGy,title:"что-то пошло не так",subTitle:`это временно, скоро всё наладим —
зайдите позже`},onUpdateClick:f}},[t,u,f])},cX=["className"],c$=(0,E.G)("error-screen",{"error-screen":"V0Ru7","error-screen__screen":"Vmk27","error-screen__screen_only-title":"rTuB0"}),c0=function(e){var t=e.className,n=(0,u.A)(e,cX),r=rA(es).authZoneConfig,i=rA(em);(0,c.useEffect)(function(){nq(),n6(r.zoneType)},[]);var o=cJ(),s=o.content,d=o.onUpdateClick;return l().createElement("section",(0,a.A)({className:c$(null,[t])},n,{"data-t-id":"ui-ErrorScreen"}),l().createElement(cG._,(0,a.A)({className:c$("screen",{"only-title":!!(null!=s&&s.isOnlyTitle)}),invert:!0},s),i!==U.BLOCK&&l().createElement(k.$,{className:(0,f.HL)("dark"),onClick:d,size:"m",view:"tertiary"},"обновить")))},c1=["className","children"],c4=b("header",{header:"Z23u2",header__container:"RKNwX"}),c2={enter:function(e){return{x:"main"===e?1e3:-1e3,opacity:0}},center:{zIndex:1,x:0,opacity:1},exit:function(e){return{zIndex:0,x:"main"!==e?1e3:-1e3,opacity:0}}},c5=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.children,i=(0,u.A)(e,c1),o=rA(ab)?"main":"search";return l().createElement("header",(0,a.A)({className:c4(null,[n]),ref:t},i,{"data-t-id":"ui-Header"}),l().createElement(iL.N,{custom:o,initial:!1},l().createElement(iz.P.div,{animate:"center",className:c4("container"),custom:o,exit:"exit",initial:"enter",key:o,ref:t,transition:{x:{duration:.5},opacity:{duration:.2}},variants:c2},r)))}),c3=n(50721),c6=(0,L.Z0)({name:"filters",initialState:{isFiltersEnabled:!1,isFiltersVisible:!1,sortType:"none"},reducers:{setIsFiltersVisible:function(e,t){e.isFiltersVisible=t.payload},setSortType:function(e,t){e.sortType=t.payload},setSearch:function(e,t){e.search=t.payload}},extraReducers:function(e){e.addCase(eJ.fulfilled,function(e,t){var n,r;e.isFiltersEnabled=null!=(n=null==(r=t.payload.data)||null==(r=r.FeatureTogglesWeb)||null==(r=r.content)?void 0:r.FeatureTogglesWebSearchEnabled)&&n})}}),c9=c6.actions,c8=c9.setSortType,c7=c9.setSearch,le=c9.setIsFiltersVisible,lt=function(e,t){var n=(0,io.V)(e),r=(0,c.useRef)(null),i=function(){r.current&&clearTimeout(r.current)};return(0,c.useEffect)(function(){return function(){i()}},[t]),(0,c.useCallback)(function(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];i(),r.current=setTimeout(function(){r.current=null,"function"==typeof n.current&&n.current.apply(n,a)},t)},[t])},ln=["clearFilters","setSearchString","cancel","searchString","className"],lr=(0,E.G)("search",{search:"sZlDC",search__input:"s3N75",search__button:"pDpJn"}),li=(0,rH.Zz)((0,d.Ng)(function(e){return{searchString:ay(e),shouldRender:ab(e)}},function(e){return{clearFilters:function(){e(c8("none")),e(c7(void 0))},cancel:function(){return e(le(!1))},setSearchString:function(t){return e(c7(t))}}}),(0,rV.t)())(function(e){var t=e.clearFilters,n=e.setSearchString,r=e.cancel,i=e.searchString,o=e.className,d=(0,u.A)(e,ln),f=(0,c.useState)(),g=(0,s.A)(f,2),m=g[0],p=g[1],v=lt(n,600);return(0,c.useEffect)(function(){v((null==m?void 0:m.trim())!==""?m:void 0)},[m]),(0,c.useEffect)(function(){i&&null!=m&&m.includes(i)||p(null!=i?i:"")},[i]),l().createElement("div",(0,a.A)({className:lr(null,[o])},d,{"data-t-id":"ui-Search"}),l().createElement(c3.L,{autoFocus:!0,className:lr("input"),onChange:p,onClear:t,value:m}),l().createElement(k.$,{className:lr("button"),mode:"inline",onClick:r},"отмена"))}),la=(0,rH.Zz)((0,d.Ng)(function(e){return{iconLeft:ag(e)?I.gu7:I.maM,onlyIcon:!0,size:"m",view:"tertiary-invert"}},{onClick:function(){return function(e){e(function(e){e(tJ({isImgPreviewOpen:!1,type:null})),e(r0(null))})}}}),(0,rV.t)())(x),lo=["setVisible","isFiltersEnabled","isFiltersVisible","onClick"],ls=(0,d.Ng)(function(e){return{isFiltersEnabled:av(e).isFiltersEnabled,isFiltersVisible:ab(e)}},function(e){return{setVisible:function(t){return e(le(t))}}})(function(e){var t=e.setVisible,n=e.isFiltersEnabled,r=e.isFiltersVisible,i=e.onClick,o=(0,u.A)(e,lo);return n?l().createElement(x,(0,a.A)({},o,{"aria-label":"Открыть панель сортировки",form:"round",iconLeft:I.sAH,onClick:function(e){null==i||i(e),t(!r)},onlyIcon:!0,size:"m",view:"tertiary-invert","data-t-id":"ui-ShowFilters"})):null}),lu=["title","className","children"],lc=(0,E.G)("title",{title:"GcRcs",title__title:"WpDYV",title__side:"rnEzR"}),ll=(0,E.G)("header-title",{"header-title_reverse":"pW7VP"}),ld=(0,rH.Zz)((0,d.Ng)(function(e,t){var n=af(e),r=al(e);return{children:t.children,title:r?"фото":"чат с поддержкой",className:"".concat(ll("",{reverse:n})),shouldRender:!ab(e)}}),rV.t)(function(e){var t=e.title,n=e.className,r=e.children,i=(0,u.A)(e,lu);return l().createElement("div",(0,a.A)({className:lc(null,[n])},i,{"data-t-id":"ui-Title"}),l().createElement("div",{className:lc("side")},r),l().createElement("div",{className:lc("title")},l().createElement(ns.E,{className:lc("header"),color:"primary-invert",variant:"body-medium"},t)),l().createElement("div",{className:lc("side")},l().createElement(ls,null)))}),lf=(0,E.G)("chat-header",{"chat-header":"o89TC","chat-header_preview":"ZblrV"}),lg=(0,d.Ng)(function(e){return{isImgPreviewOpen:al(e)}})(function(e){var t=e.isImgPreviewOpen;return l().createElement(c5,{className:lf("",{preview:t}),"data-t-id":"ui-ChatHeader"},l().createElement(ld,{"data-t-id":"ui-ChatHeader"},l().createElement(l().Fragment,null,l().createElement(la,{shouldRender:t}),l().createElement(rF,{shouldRender:!t}))),l().createElement(li,null))}),lm=["className","onChatOpen","dispatch","sessions","sortType","search"],lp=b("chat-window",{"chat-window":"D7m60","chat-window__container":"YrVlD","chat-window__container_windowBlocked":"JbLCX","chat-window__error":"BqoRb","chat-window__overlay":"aORG9","chat-window__form":"ISklv"}),lv=function(e){var t,n,r=e.children,i=e.lockScroll,a=iH().scrollRef,s=rM(),u=rA(ec);return l().createElement("div",{className:lp("container",{windowBlocked:u||i}),ref:a,"data-t-id":"ui-ChatWindow"},l().createElement(lg,null),r,l().createElement(oL,{className:lp("scroll")}),l().createElement(iL.N,{custom:u,initial:!1,mode:"wait"},u&&l().createElement(iz.P.div,{animate:{opacity:1},"aria-hidden":"true",className:lp("overlay"),exit:{opacity:0},initial:{opacity:0},onClick:function(){s(Z(!1)),s(tK(void 0))},style:(0,o.A)({},"--overlay-top","".concat(null!=(t=null==(n=a.current)?void 0:n.scrollTop)?t:0,"px"))})))},lh=(0,c.forwardRef)(function(e,t){var n=e.className,r=e.onChatOpen,i=e.dispatch,o=e.sessions,s=e.sortType,d=e.search,f=(0,u.A)(e,lm);(0,c.useEffect)(function(){return tC(r),function(){i(t1(ey.idle))}},[]);var g=ih().stage;return l().createElement("section",(0,a.A)({className:lp(null,[n]),ref:t},f),l().createElement(iQ,{search:d,sessions:o,sortType:s},l().createElement(uV,{"data-t-id":"ui-ChatWindow"},g===ia.ERROR&&l().createElement(c0,{className:lp("error")}),l().createElement(lv,{lockScroll:g===ia.ERROR},l().createElement(cW,{"data-t-id":"ui-ChatWindow"})),l().createElement(oS,{className:lp("form")}),l().createElement(oB,null))))}),ly=(0,d.Ng)(function(e){return{search:ay(e),sortType:ah(e),sessions:ae(e)}})(lh),lb=(0,c.createContext)([!1,function(){},!1]),lw=function(e){var t=(0,c.useContext)(lb),n=(0,s.A)(t,3),r=n[0],i=n[1],a=n[2],o=rA(ei),u=rM(),l=function(e){return u(Q(e))};(0,c.useEffect)(function(){i(o)},[o]),(0,c.useEffect)(function(){a&&l(r)},[r]),(0,c.useEffect)(function(){"boolean"==typeof e&&(null==i||i(e),l(e))},[e])},lM=n(14511),lA={lock:function(e){setTimeout(function(){document.body.style.position="fixed",document.body.style.top="-".concat(e,"px")},200)},unlock:function(e){document.body.style.position="",document.body.style.top="",window.scrollTo(0,e||0)}},lE=function(e,t){var n=(0,lM.O)(),r=(0,c.useState)(!0),i=(0,s.A)(r,2),a=i[0],o=i[1],u=t&&n===nf.ios;(0,c.useEffect)(function(){var t=document.documentElement.scrollTop;return u&&(e?(lA.lock(t),o(!1)):a||lA.unlock(t)),function(){lA.unlock(t||0)}},[e,t,u])},lO=function(e){var t=e.socketRef,n=e.socketStatus,r=e.connect,i=e.config,a=rM(),o=ic(),s=ih(),u=s.stage,l=s.changeStage,d=ak(),f=d.resendMessage,g=d.resendImageMessage,m=d.sendFileMessage,p=rA(ir)||0,v=(0,io.V)(rA(ar)),h=function(e){var t,n,r=e.message,a=e.messageId,o=tA(e);o&&f(o,r.replyId,null==a?void 0:a.toString(),{value:null==r?void 0:r.value,messageType:r.type}),r.type===e_.FileDoc&&r.fileId&&(m(r.fileId,e,!0),rh(aT.FIlE,null==(t=i.authZoneConfig)?void 0:t.zoneType)),r.type===e_.Img&&r.fileId&&r.filePreviewId&&(g({imageId:r.fileId,imagePreviewId:r.filePreviewId},e.messageId),rh(aT.IMAGE,null==(n=i.authZoneConfig)?void 0:n.zoneType))},y=function(){v.current.forEach(h)};return(0,c.useEffect)(function(){var e;return o&&u===ia.CONNECTING&&(n===r7.idle&&r({onSuccess:y}),n===r7.closed&&p<=10&&(a(cq(p+1)),e=setTimeout(r,1e3*Number(!!p)))),function(){return clearTimeout(e)}},[n,o,u]),(0,c.useEffect)(function(){if(!o){var e;null==(e=t.current)||e.close()}return function(){var e;null==(e=t.current)||e.close()}},[o]),(0,c.useEffect)(function(){if(p>10){var e;(null==(e=i.authZoneConfig)?void 0:e.zoneType)==="unauthorized"?l(ia.CAPTCHA_NEEDED):l(ia.RECONNECT)}},[p]),e},lI=n(88766),lC=function(){return(0,lI.G)({method:"post",baseURL:void 0,url:eI.tokenAuthZone.gettoken,withCredentials:!0})},lN=function(){var e=(0,eb.A)(eM().mark(function e(){var t,n,r,i=arguments;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>0&&void 0!==i[0]&&i[0]){e.next=7;break}return e.next=4,eE.post(eI.captcha.refresh,{},ej);case 4:return n=e.sent.data,e.abrupt("return",null==n?void 0:n.accessToken);case 7:return e.next=9,lC();case 9:return r=e.sent,e.abrupt("return",null==r||null==(t=r.View)?void 0:t.token);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),lk=(0,c.createContext)([void 0,function(){}]),lD=function(e){var t=e.children,n=e.value;return l().createElement(lk.Provider,{value:n},t)},lS=["open","close","error","message"],lT=function(e,t){var n,r,i=e.baseUrl,a=e.authType,o=e.authZoneConfig,u=(0,c.useState)(r7.idle),l=(0,s.A)(u,2),d=l[0],f=l[1],g=rM(),m=(0,c.useRef)({open:[],close:[],message:[],error:[]}),p=(0,c.useRef)(null),v=(0,c.useContext)(lk),h=(0,s.A)(v,2),y=(h[0],h[1]),b=eQ({baseUrl:eF(i).ws,token:t,authType:a}),w=function(e){f(e),g(cK(e))},M=(0,c.useCallback)(function(e){return new Promise(function(t,n){try{w(r7.connecting);var r,i,a=new WebSocket(b);lS.forEach(function(e){a.addEventListener(e,function(t){("open"===e||"close"===e)&&w("open"===e?r7.open:r7.closed),m.current[e].forEach(function(e){return e(t)})})}),t(a),null==e||null==(i=e.onSuccess)||i.call(e)}catch(t){null==e||null==(r=e.onFailure)||r.call(e),n(t)}})},[b]),A=function(){var e;null==(e=p.current)||e.close(),g(cq(0)),M().catch(console.error)},E=(0,c.useCallback)((n=(0,eb.A)(eM().mark(function e(t){var n,r,i,a,s;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==o?void 0:o.zoneType)!=="authorized"){e.next=16;break}return e.prev=1,e.next=4,lC();case 4:(a=null==(i=e.sent)||null==(n=i.View)?void 0:n.token)&&y&&(y(a),A()),null==t||null==(r=t.onSuccess)||r.call(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),null==t||null==(s=t.onFailure)||s.call(t),console.error(e.t0);case 14:e.next=17;break;case 16:A();case 17:case"end":return e.stop()}},e,null,[[1,10]])})),function(e){return n.apply(this,arguments)}),[o]),O=(0,c.useCallback)(function(e,t){m.current[e].push(t)},[]),I=(0,c.useCallback)((r=(0,eb.A)(eM().mark(function e(t){return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:p.current=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),w(r7.closed),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return r.apply(this,arguments)}),[M]);return(0,c.useMemo)(function(){return{addEventHandler:O,socketRef:p,reconnect:E,setStatus:w,connect:I,socketStatus:d,config:e}},[d,E,e,I])},l_=(0,c.createContext)({socketRef:{current:null},addEventHandler:function(){},socketStatus:r7.idle,reconnect:function(){},setStatus:function(){}}),lj=function(e){var t=e.children,n=e.token,r=lO(lT(e.config,n));return l().createElement(l_.Provider,{value:r},t)},lx=function(){return(0,c.useContext)(l_)},lL=function(){var e=lx(),t=e.socketRef,n=e.socketStatus,r=(0,io.V)(n),i=rM(),a=function(){return!!t.current&&r.current===r7.open};return{submitToSocket:(0,c.useCallback)(function(e){var n=function(){if(a()){var n;null==(n=t.current)||n.send(JSON.stringify(e))}};a()?n():setTimeout(n,1e3)},[n]),checkMessageStatus:function(e){setTimeout(function(){i(tX(e))},1e4)}}},lz=function(){var e=sT().captchaStage,t=ih().stage,n=rA(es),r=n.authZoneConfig,i=n.welcomeMessage,a=r||{},o=a.showMessageBeforeInput,s=a.zoneType,u=a.startMessage,l=rM(),d=(tM(rA(i7))||{messages:[]}).messages;(0,c.useEffect)(function(){if(i){var n=ts(null!=i?i:u),r=null==d?void 0:d.find(function(e){return e.messageId===n.messageId});"unauthorized"===s&&t===ia.CAPTCHA_NEEDED&&"init"===e&&!r&&o&&l(tW(n))}},[t,e,d.length,i,s])},lP=function(){var e=(0,eb.A)(eM().mark(function e(t,n){var r,i,a;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t(t1(ey.loading)),"authorized"!==n){e.next=9;break}return e.next=4,t(eK());case 4:return r=e.sent,e.next=7,t(eJ());case 7:return i=e.sent,e.abrupt("return",[r,i]);case 9:return e.next=11,t(eK());case 11:return a=e.sent,e.abrupt("return",[a,null]);case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),lR=function(e){var t,n=e.sendMessage,r=e.sendSocketMessage,i=rM(),a=rA(oJ),o=rA(eo),u=rA(es),l=u.authType,d=u.userData,f=u.authZoneConfig.zoneType,g=(0,io.V)(n),m=rA(o0),p=lx(),v=p.reconnect,h=p.socketStatus,y=p.setStatus,b=sT().captchaStage,w=ih(),M=w.stage,A=w.changeStage,E="authorized"===f?!!(null!=d&&d.token)&&!!l:!!m,O=h===r7.open,I=ic(),C=(t=(0,eb.A)(eM().mark(function e(){var t,n,r,a;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i($(!0)),e.next=3,lP(i,f);case 3:t=e.sent,r=(n=(0,s.A)(t,2))[0],a=n[1],eK.fulfilled.match(r)&&(!a||eJ.fulfilled.match(a))&&A(ia.CONNECTING);case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),N=(0,c.useCallback)(function(){a.forEach(function(e){var t,n=ti(null!=(t=tA(e))?t:"",{id:e.messageId,replyId:e.message.replyId}),i=n.historyMessage;r(n.socketMessage,i)})},[a]),k=function(){A(ia.ERROR),i(J(U.ERROR)),i(X(B.WEBSOCKET_CONNECTION))};(0,c.useEffect)(function(){var e=function(e){g.current(e.detail,void 0)};return window.addEventListener(iM,e),function(){i($(!1)),window.removeEventListener(iM,e)}},[]),(0,c.useEffect)(function(){I&&E&&!o&&M===ia.LOAD_DATA&&C(),M===ia.CAPTCHA_NEEDED&&"unauthorized"===f&&i(r$([]))},[E,M,I]),(0,c.useEffect)(function(){M===ia.ACTIVE&&O&&"end"===b&&N(),M===ia.RECONNECT&&"authorized"===f&&v({onFailure:k}),h===r7.closed&&M===ia.CAPTCHA_NEEDED&&y(r7.idle)},[M,f,O]),lz()},lY=function(e){var t=rM(),n=sT(),r=n.sendCaptchaMessage,i=n.handleChangeStage,a=n.generateCaptchaMessage,o=n.captchaStage,s=(0,io.V)(rA(oK));return(0,c.useCallback)(function(n,u){if("init"===o){t(t3(!0)),t(st(u)),i("start"),rn(e);return}if(!s.current){t(st(u)),a("captcha");return}n&&r(n.data.message.text)},[e,o])};function lU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lU(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lH=function(){var e=rM(),t=iH().scrollToBottom,n=sT().captchaStage,r=rA(ai),i=rA(aV),a=rA(es).authZoneConfig.zoneType,o=ic(),s=(0,io.V)(o),u=ih().stage,l=(0,io.V)(u),d=lL(),f=d.submitToSocket,g=d.checkMessageStatus,m=lY(a),p=(0,c.useCallback)(function(t,o){if(!s.current)return void g(o);var u="unauthorized"===a&&l.current===ia.CAPTCHA_NEEDED;o.message.type!==e_.Link&&(e(tQ({id:o.messageId,status:u?eT.delivered:eT.sent})),e(tq(void 0)));var c="authorized"===a&&r&&i;if((u&&"init"===n||c)&&n7(a),u)return void m(t,o);f(t),o.message.type!==e_.Link&&g(o)},[f,u,a,m,r]),v=(0,c.useCallback)(function(t,n,r,i){var a=ti(t,{id:r,replyId:n,messageType:null==i?void 0:i.messageType,value:null==i?void 0:i.value}),o=a.socketMessage,s=a.historyMessage;e(tQ({id:s.messageId,status:eT.sent})),p(o,s)},[f]),h=(0,c.useCallback)(function(n,r,i,o){if(n.trim()){var u,c,d=ti(n,lB({replyId:r,status:(u=l.current,c=s.current,"unauthorized"===a&&u===ia.CAPTCHA_NEEDED&&c?eT.delivered:eT.sent),onlyClient:"unauthorized"===a&&l.current===ia.CAPTCHA_NEEDED},o||{})),f=d.socketMessage,g=d.historyMessage;(null==o?void 0:o.messageType)!==e_.Link&&(e(tW(g)),e(r$([]))),p(f,g),tC(i),t(100)}},[p,u,a]),y=(0,c.useCallback)(function(t,n,r,i){var a=tt(t,{id:n});f(a),e(tF({id:n,messageStatus:eT.sent,message:{fileId:t.imageId,filePreviewId:t.imagePreviewId,imageSettings:t.imageSettings}})),r&&i&&(f(te(r,{id:i})),e(tQ({id:i,status:eT.delivered}))),g(lB(lB({},a.data),{},{messageId:a.data.requestId}))},[f]);return lR({sendMessage:h,sendSocketMessage:p}),{sendMessage:h,resendMessage:v,resendImageMessage:function(t,n){var r=tt(t,{id:n});f(r),e(tQ({id:n,status:eT.sent})),g(lB(lB({},r.data),{},{messageId:r.data.requestId}))},sendImgMessage:y,sendFileMessage:function(t,n,r){f(tn(t,{id:n.messageId})),r?e(tQ({id:n.messageId,status:eT.sent})):e(tF({id:n.messageId,message:{fileId:t}})),g(n)}}},lV=function(e){var t=e.children,n=lH();return l().createElement(aN,(0,a.A)({},n,{"data-t-id":"context-CommunicationService"}),t)},lW=["children"],lG=(0,d.Ng)(function(e){return{reconnectCount:ir(e),config:es(e)}},function(e){return{addMessage:function(t){return e(tW(t))},updateMessage:function(t){return e(tF(t))},setIsNoNAuthCaptchaStage:function(t){return e(t3(t))}}})(function(e){var t=e.children,n=(0,u.A)(e,lW);return l().createElement(sS,(0,a.A)({},n,{"data-t-id":"context-CaptchaService"}),t)}),lF=function(e,t){(0,c.useEffect)(function(){var n,r=new MutationObserver(function(){var n;null!=(n=document)&&n.title.includes(e)||t(document.title)}),i=null==(n=document)?void 0:n.querySelector("title");return i&&r.observe(i,{childList:!0}),function(){r.disconnect()}},[])},lQ=function(){var e;return null==(e=document)?void 0:e.querySelectorAll("link[rel~='icon']")},lZ=function(e){var t,n=e.isActive,r=e.title,i=void 0===r?"Новое сообщение":r,a=e.interval,o=void 0===a?1500:a,s=e.count,u=e.favicon,l=(0,c.useRef)([]),d=(0,c.useRef)([]),f=(0,c.useRef)(null==(t=document)?void 0:t.title),g=(0,c.useRef)(i),m=function(e){d.current.forEach(function(t){var n=t.originalLink;t.element.href=e||e?n:null!=u?u:n})};lF(i,function(e){f.current=e}),(0,c.useEffect)(function(){g.current="".concat(s||""," ").concat(i).trim()},[s,i]),(0,c.useEffect)(function(){var e=[];lQ().forEach(function(t){e.push({element:t,originalLink:t.href})}),d.current=e},[]),(0,c.useEffect)(function(){if(!n)return function(){};var e=!1,t=l.current,r=f.current,i=setInterval(function(){l.current&&u&&m(!e),document.title=e?g.current:f.current,e=!e},o);return function(){clearInterval(i),t&&m(!0),document.title=r}},[n])},lq=function(){var e;return(null==(e=window)||null==(e=e.Notification)?void 0:e.permission)==="granted"},lK=function(){var e;return null!=(e=window)&&!!e.Notification&&window.Notification.requestPermission()},lJ=function(){var e,t=(0,c.useState)(lq()),n=(0,s.A)(t,2),r=n[0],i=n[1],a=(e=(0,eb.A)(eM().mark(function e(){return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lK();case 2:i("granted"===e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return(0,c.useEffect)(function(){r||a()},[]),r};function lX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lX(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l0="https://static.beeline.ru/upload/images/icons/18161-img-1.png",l1=function(e){lJ();var t,n=null!=(t=rA(au))?t:[],r=(0,c.useState)(!0),i=(0,s.A)(r,2),a=i[0],o=i[1],u=rM(),l=(0,c.useCallback)(function(t,n){if("remove"===n.type)return t.filter(function(e){if(e.id===n.id){var t;return null==(t=e.notification)||t.close(),!1}return!0});if("add"===n.type){var r,i;return lq()&&"visible"!==document.visibilityState&&(r=new Notification(null!=e?e:"Новое сообщение",{body:null==(i=tA(n.item.message))?void 0:i.replace(/<[^>]*>?/gm," "),vibrate:1,silent:!1,image:l0,icon:l0})),[].concat((0,p.A)(t),[l$(l$({},n.item),{},{notification:r})])}return"clear"===n.type?(t.forEach(function(e){var t;return null==(t=e.notification)?void 0:t.close()}),[]):t},[]),d=(0,c.useReducer)(l,[]),f=(0,s.A)(d,2),g=f[0],m=f[1];return lZ({isActive:!a&&!!g.length&&!!n.length,favicon:"https://static.beeline.ru/upload/images/icons/18161-img-2.png",title:sf(n.length,["новый ответ","новых ответа","новых ответов"]),count:n.length}),(0,c.useEffect)(function(){var e=function(){return o("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[]),(0,c.useEffect)(function(){a&&(m({type:"clear"}),u(t5()))},[a]),{addNotification:function(e){m({type:"add",item:{message:e,id:(0,e1.A)()}})},closeNotification:function(e){m({type:"remove",id:e})}}},l4=(0,L.Z0)({name:"user",initialState:{apperList:[]},reducers:{setCurrentApper:function(e,t){e.currentApper=t.payload},setApperData:function(e,t){e.apperData=t.payload},setApperList:function(e,t){e.apperList=t.payload}},extraReducers:function(e){e.addCase(eJ.fulfilled,function(e,t){var n,r;e.apperList=null!=(n=null==(r=t.payload.data.AnimalWeb)?void 0:r.content)?n:[]})}}),l2=l4.actions,l5=(l2.setApperData,l2.setCurrentApper);l2.setApperList;var l3=function(){var e=lx().addEventHandler,t=rM(),n=rA(es).authZoneConfig,r=(0,io.V)(iH()),i=ih().changeStage,a=l1("Новый ответ в чате поддержки").addNotification,o=(0,io.V)(rA(oJ)),s=(0,io.V)(ic()),u=function(){return i(ia.ACTIVE)},l=function(){s.current&&i(ia.CONNECTING)},d=function(e){var i=JSON.parse(e.data);if(i.type===e6.SocketConnectionResult&&t(l5(i.data.assistantCodeName||aD.fluffy)),i.type===e6.OperationResult){var s=i.data.text;s===ie.sessionInitialized&&(n_(nh.WebChatStart),t(t0(i)));var u=i.data;if(s===ie.messageSent||s===ie.fileMessageSent){o.current.find(function(e){return e.messageId===u.requestId})&&t(ss(u.requestId));var c=i.data.code===eS.success&&1===i.data.action?eT.delivered:eT.failed;t(tF({id:u.requestId,date:u.timestamp,messageStatus:s===ie.fileMessageSent?c:eT.delivered}))}}if(i.type===e6.IncomingMessage||i.type===e6.OutgoingMessage){var l=to(i),d=l.historyMessage,f=l.quickReplies,g=i.data.message.text;if(g&&t(tW(d)),i.type===e6.IncomingMessage&&(a(d),t(t2(d)),t(r$(f)),g&&rf(g,null==n?void 0:n.zoneType)),!r.current.isScrollButtonVisible){var m=tI(d.messageId);m&&r.current.scrollToInnerNode(m)}}};(0,c.useEffect)(function(){e("close",l),e("open",u),e("message",function(e){return d(e)})},[])},l6=function(e){var t=e.children;return l3(),t},l9=function(e){var t,n=sessionStorage.getItem(tc);return n?(t=JSON.parse(n)).filter(function(e,n){return t.findIndex(function(t){return t.messageId===e.messageId})===n}).filter(function(t){var n=t.messageId;return!(null!=e&&e.messages.find(function(e){return e.messageId===n}))}):null},l8=function(){var e=sessionStorage.getItem(tv);return e?JSON.parse(e):[]},l7=[tc,tm,tv],de=[tg,tp,tl],dt=function(){l7.forEach(function(e){return sessionStorage.removeItem(e)}),de.forEach(function(e){return(0,z.Yj)(e)})},dn=function(e){sessionStorage.setItem(eY,aM(e))},dr=["children","config","addMessages","setIsNoNAuthStage","captchaToken","setQueuedMessages","lastSession","isOpen"],di=(0,d.Ng)(function(e){return{config:es(e),isOpen:ei(e),lastSession:at(e),loadingStatus:aa(e),isHistoryEmpty:!ae(e).length,captchaToken:o0(e)}},function(e){return{addMessages:function(t){return e(tG(t))},setIsNoNAuthStage:function(t){return e(t3(t))},setQueuedMessages:function(t){return e(sr(t))}}})(function(e){var t,n,r=e.children,i=e.config,o=e.addMessages,s=e.setIsNoNAuthStage,d=e.captchaToken,f=e.setQueuedMessages,g=e.lastSession,m=(e.isOpen,(0,u.A)(e,dr)),p=(null==(t=i.authZoneConfig)?void 0:t.zoneType)||"unauthorized",v=ih().stage;return(0,c.useEffect)(function(){var e=l9(g),t=l8(),n=sessionStorage.getItem(eY);f(t),s(v===ia.BLOCKED||v===ia.CAPTCHA_NEEDED),e&&n===p?o(e):p&&(dt(),dn(p))},[]),l().createElement(az,{"data-t-id":"context-СontextWrapper"},l().createElement(iB,(0,a.A)({zoneType:p},m,{"data-t-id":"context-СontextWrapper"}),l().createElement(lG,{"data-t-id":"context-СontextWrapper"},l().createElement(lj,{config:i,token:"authorized"===p?null==(n=i.userData)?void 0:n.token:d,"data-t-id":"context-СontextWrapper"},l().createElement(l6,{"data-t-id":"context-СontextWrapper"},l().createElement(lV,{"data-t-id":"context-СontextWrapper"},r))))))}),da=function(){var e=(0,g.Eo)(),t=(0,lM.O)(),n=e&&t===nf.ios,r=(0,c.useState)(window.visualViewport?window.visualViewport.height:window.innerHeight),i=(0,s.A)(r,2),a=i[0],o=i[1],u=function(){var e;o((null==(e=window)||null==(e=e.visualViewport)?void 0:e.height)||window.innerHeight)};return(0,c.useEffect)(function(){return window.addEventListener("resize",u),window.visualViewport&&(window.visualViewport.addEventListener("resize",u),u()),function(){window.removeEventListener("resize",u),window.visualViewport&&window.visualViewport.removeEventListener("resize",u)}},[]),{height:n?"100dvh":"".concat(a,"px"),isMobile:e}},ds=b("img-preview",{"img-preview":"qEYaB","img-preview_upload":"G9Ahr","img-preview__img":"kOlVD","img-preview__img_orientation_horizontal":"czaI4","img-preview__img_orientation_vertical":"dNJaF"}),du=(0,rH.Zz)((0,d.Ng)(function(e){return{dynamicFormHeight:aY(e).dynamicFormHeight,imageUrlGroup:aW(e),isTypeUpload:ag(e),shouldRender:al(e)}}),rV.t)(function(e){var t=e.imageUrlGroup,n=e.dynamicFormHeight,r=e.isTypeUpload,i=da(),a=i.height,s=i.isMobile,u=t||{},c=u.filePreviewUrl,d=u.fileUrl,f=u.imageSettings,g=!r&&d?d:c;return l().createElement("div",{className:ds({upload:r}),style:(0,o.A)((0,o.A)((0,o.A)({},"--img-wrapper-height",a),"--img-top-margin",s?"76px":"92px"),"--img-bottom-margin","".concat(r?n:0,"px")),"data-t-id":"ui-ImgPreview"},g&&l().createElement("img",{alt:"прикрепленное фото",className:ds("img",{orientation:((null==f?void 0:f.ratio)||1)>=1?"horizontal":"vertical"}),src:g}))}),dc=function(e){var t=e.children;return ij(e.enableQueriesParams),t},dl=(0,c.forwardRef)(function(e,t){var n=e.isOpen,r=e.callOfflineScreen,i=e.errorScreenType,a=e.enableQueriesParams,o=e.onChatOpen,s=e.isChatOpen;lw(n),lE(s,(0,g.Eo)());var u=ih().changeStage,d=ic();return(0,c.useEffect)(function(){i!==U.UNKNOWN&&u(ia.ERROR)},[i]),(0,c.useEffect)(function(){d||(r(),u(ia.ERROR))},[d]),l().createElement(di,{"data-t-id":"ui-Chat"},l().createElement(dc,{enableQueriesParams:void 0===a||a,"data-t-id":"ui-Chat"},l().createElement(du,{"data-t-id":"ui-Chat"}),l().createElement(ly,{onChatOpen:o,ref:t})))}),dd=(0,d.Ng)(function(e){var t=es(e);return{isMenuOpen:ea(e),isChatOpen:ei(e),messengers:t.messengers,errorScreenType:em(e),zoneType:t.authZoneConfig.zoneType}},function(e){return{closeChat:function(){return e(Q(!1))},callOfflineScreen:function(){e(X(B.OFFLINE)),e(J(U.OFFLINE))}}})(dl),df=["children","isChatOpen","isMenuOpen","view","isDesktop","menuItemsCount","className"],dg={menu:function(e){var t=e.isDesktop,n=e.menuItemsCount;return{height:t?"".concat(96+64*n+4*(n-1),"px"):"100%"}},chat:function(e){return{height:e.isDesktop?"min(644px, calc(100dvh - 80px))":"100%"}}},dm=(0,E.G)("chat-widget",ix),dp=function(e){var t=e.children,n=e.isChatOpen,r=e.isMenuOpen,i=e.view,s=e.isDesktop,c=void 0===s||s,d=e.menuItemsCount,f=void 0===d?1:d,g=(e.className,(0,u.A)(e,df)),m=n||f<2,p=da(),v=p.height,h=p.isMobile;return l().createElement(iL.N,{custom:n||r,initial:!1,mode:"wait","data-t-id":"ui-ChatWidget"},l().createElement(iz.P.div,(0,a.A)({},g,{animate:m?"chat":"menu",className:dm("content",{view:i}),custom:{menuItemsCount:f,isDesktop:c},initial:"menu",style:(0,o.A)((0,o.A)({},"--chat-widget-height",h?v:dg.chat({isDesktop:c}).height),"--chat-menu-height",dg.menu({isDesktop:c,menuItemsCount:f}).height),variants:dg}),t))},dv=["isOpen","isChatOpen","isMenuOpen","enableQueriesParams","onChatWidgetClick","onChatOpen","className","messengers","closeWidget","zoneType"];function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var dy=b("chat-widget",ix),db=(0,c.forwardRef)(function(e,t){var n=e.isOpen,r=e.isChatOpen,i=e.isMenuOpen,d=e.enableQueriesParams,p=void 0===d||d,v=e.onChatWidgetClick,h=e.onChatOpen,y=e.className,b=e.messengers,w=void 0===b?[]:b,M=e.closeWidget,E=e.zoneType,O=(0,u.A)(e,dv),I=(0,c.useRef)(null),C=(0,g.Gu)(),N=(0,s.A)(C,1)[0],k=A();r9({isChatOpen:r,isMenuOpen:i,messengers:w,zoneType:E}),i_(p);var D=r||i,S=r||w.length<2,T=(0,c.useMemo)(function(){return N===m.e.TABLET?i?"block":"fullscreen":N===m.e.DESKTOP?"block":"fullscreen"},[N,i]);return l().createElement("section",(0,a.A)({className:dy("wrapper",[y,(0,f.HL)("light")]),id:"chat-widget",onClick:v,ref:t,style:{zIndex:k}},O,{"data-t-id":"ui-ChatWidget"}),l().createElement(ne,{className:dy("button"),ref:I}),l().createElement("div",{"aria-hidden":"true",className:dy("overlay",{isOpen:D})}),l().createElement(no,{anchorRef:I,className:dy("window",{view:T}),"data-portal-type":"widgetChat",direction:"leftStartDown",isOpen:D,offsetHorizontal:8,onClickOutside:M,position:"fixed",style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,o.A)({},"--chat-zindex",k+1),"block"===T?(0,o.A)((0,o.A)({},"--popover-top","auto"),"--popover-bottom","".concat(I.current?window.innerHeight-I.current.getBoundingClientRect().y-I.current.offsetHeight:0,"px")):{})},l().createElement(dp,{isChatOpen:r,isDesktop:N===m.e.DESKTOP,isMenuOpen:i,menuItemsCount:w.length,view:T,"data-t-id":"ui-ChatWidget"},S&&l().createElement(dd,{anchorRef:I,enableQueriesParams:p,isOpen:n,onChatOpen:h}),i&&l().createElement(rq,{messengers:w,title:"ответим везде"}))))}),dw=(0,d.Ng)(function(e){return{isChatOpen:ei(e),isMenuOpen:ea(e),messengers:es(e).messengers,zoneType:es(e).authZoneConfig.zoneType}},function(e){return{closeWidget:function(){e(Q(!1)),e(q(!1)),e(tJ({isImgPreviewOpen:!1,type:null})),e(r0(null))}}})(db),dM=(0,rH.HY)({socket:cQ.reducer,user:l4.reducer,settings:G.reducer,filters:c6.reducer,message:tH.reducer,captcha:o9.reducer,content:rJ.reducer}),dA=(0,L.U1)({reducer:dM}),dE=[eI.file.download,eI.file.sent],dO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"V5",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"V2",r=eI.chat.history(t),i=eC(n);return!e||[].concat(dE,[r,i]).every(function(t){return!e.includes(t)})},dI=function(e,t){var n=e.authZoneConfig;return(null==n?void 0:n.zoneType)==="authorized"||ez.AuthScheme in t.headers||Number((0,z.Ri)("isAuthorized"))?"authorized":"unauthorized"},dC=function(e,t){var n,r,i=t.authZoneConfig,a=t.apiSettings,o=eI.chat.history((null==a?void 0:a.apiHistoryVersion)||"V5"),s=null==(n=e.config)?void 0:n.url,u=(null==(r=e.response)?void 0:r.status)||200;return(null!=s&&s.includes(o)||null!=s&&s.includes(eC((null==a?void 0:a.apiContentVersion)||"v1")))&&u>=400&&401!==u?[!0,U.LOAD,null!=s&&s.includes(o)?B.HISTORY_LOAD:B.CONTENT_LOAD]:(null==i?void 0:i.zoneType)==="authorized"?[!1,void 0,void 0]:null!=s&&s.includes(eI.captcha.validate)&&u>=400&&401!==u?[!0,U.ERROR,B.VALIDATE_CAPTCHA]:null!=s&&s.includes(eI.captcha.refresh)&&u>=400&&401!==u?[!0,U.LOAD,B.REFRESH_TOKEN]:[!1,void 0,void 0]};function dN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dN(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dD=function(){var e=rM(),t=ih().changeStage,n=rA(o0),r=rA(es),i=rA(ei),a=(0,io.V)(r),o=(0,io.V)(n),s=function(e){var t=a.current,n=t.userData,r=t.authType,i=t.authZoneConfig;return dk(dk({},eG({token:null!=e?e:"unauthorized"===i.zoneType?o.current:null==n?void 0:n.token,authType:r,zoneType:null==i?void 0:i.zoneType})),eW())},u=function(t,n){n?e(K(dk(dk({},a.current),{},{userData:{token:t}}))):e(sn(t))};(0,c.useEffect)(function(){var n,r;eE.interceptors.request.use((n=(0,eb.A)(eM().mark(function e(t){var n,r,i,o;return eM().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null==(n=t.url)?void 0:n.includes(eI.tokenAuthZone.gettoken))?window.location.origin:eF(a.current.baseUrl).http,t.baseURL=i,null!=(r=t.url)&&r.includes(eI.file.download)&&t.url&&(o=new URL(t.url),t.url="".concat(i).concat(o.pathname).concat(o.search||"")),t.headers=s(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),function(e){return Promise.reject(e)}),eE.defaults.headers=s(),eE.defaults.baseURL=eF(a.current.baseUrl).http,eE.interceptors.response.use(function(e){return e},(r=(0,eb.A)(eM().mark(function n(r){var i,o,c,l,d,f,g,m,p;return eM().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(d="authorized"===dI(a.current,r.config),f=r.config,g=dC(r,a.current),null!=(i=r.config.url)&&i.includes(eI.captcha.refresh)&&(0,z.Yj)(tu),!g[0]){n.next=10;break}return t(ia.ERROR),e(J(g[1])),e(X(g[2])),n.abrupt("return",Promise.reject(r));case 10:if(!((null==r||null==(o=r.response)?void 0:o.status)!==401||f._retry||dO(r.config.url,null==(c=a.current)||null==(c=c.apiSettings)?void 0:c.apiHistoryVersion,null==(l=a.current)||null==(l=l.apiSettings)?void 0:l.apiContentVersion))){n.next=12;break}return n.abrupt("return",Promise.reject(r));case 12:return f._retry=!0,n.prev=13,n.next=16,lN(d);case 16:if(!(m=n.sent)){n.next=23;break}return f.headers=dk(dk({},f.headers),s(m)),u(m,d),n.next=22,(0,eA.A)(f);case 22:return n.abrupt("return",n.sent);case 23:throw Error("token is undefined");case 26:n.prev=26,n.t0=n.catch(13),d?(t(ia.ERROR),e(J(U.LOAD)),e(X(B.HISTORY_LOAD))):(p=dC(n.t0,a.current))[0]?(t(ia.ERROR),e(J(p[1])),e(X(p[2]))):t(ia.CAPTCHA_NEEDED);case 29:return n.abrupt("return",Promise.reject(r));case 30:case"end":return n.stop()}},n,null,[[13,26]])})),function(e){return r.apply(this,arguments)}))},[i,r.authZoneConfig,r.authType,n,r.userData])},dS=function(e){var t=rM(),n=iE(),r=function(e){var r=e.detail,i=r.flag,a=r.initialMessage;t(Q(i)),t(q(!1)),n(a)},i=function(n){var r=n.detail.flag,i=e.length>1;t(Q(!i&&r)),t(q(i&&r))};(0,c.useEffect)(function(){return window.addEventListener(ib,r),window.addEventListener(iw,i),function(){window.removeEventListener(ib,r),window.removeEventListener(iw,i)}},[])},dT=function(e){var t=e.children;return dD(),t},d_=function(e){var t=e.children;return dS(e.messengers),t},dj=(0,d.Ng)(function(e){return{isOpen:ei(e)}},function(e){return{setConfig:function(t){return e(K(t))},setOperatorWelcomeMessage:function(t){return e(t$(t))}}})(function(e){var t=e.children,n=e.authType,r=e.authZoneConfig,i=void 0===r?Y:r,a=e.attachmentsConfig,o=e.baseUrl,u=e.charsLimit,d=void 0===u?6e3:u,f=e.enableQueriesParams,g=void 0===f||f,m=e.messengers,p=void 0===m?[]:m,v=e.startButtonsConfig,h=e.userData,y=e.isOpen,b=e.welcomeMessage,w=e.setConfig,M=e.setOperatorWelcomeMessage,A=e.apiSettings,E=(0,c.useState)(null==h?void 0:h.token),O=(0,s.A)(E,2),I=O[0],C=O[1];return(0,c.useEffect)(function(){!I&&null!=h&&h.token&&C(h.token)},[null==h?void 0:h.token]),(0,c.useEffect)(function(){w({authType:n,authZoneConfig:i,baseUrl:o,charsLimit:d,enableQueriesParams:g,messengers:p,startButtonsConfig:v,userData:{token:I},attachmentsConfig:a,apiSettings:A,welcomeMessage:b}),M(b)},[n,i,o,d,g,p,I,a,A,v]),l().createElement(iv,{baseUrl:o,isOpen:y,zoneType:i.zoneType||"unauthorized","data-t-id":"ui-ConfigWrapper"},l().createElement(d_,{messengers:p,"data-t-id":"ui-ConfigWrapper"},l().createElement(dT,{"data-t-id":"ui-ConfigWrapper"},l().createElement(lD,{value:[I,C],"data-t-id":"ui-ConfigWrapper"},void 0===t?null:t))))}),dx=function(e){return(0,c.forwardRef)(function(t,n){return l().createElement(d.Kq,{store:dA,"data-t-id":"hocs-withStoreProvider"},l().createElement(dj,(0,a.A)({},t,{"data-t-id":"hocs-withStoreProvider"}),l().createElement(e,{enableQueriesParams:t.enableQueriesParams,isOpen:t.isOpen,onChatOpen:t.onChatOpen,ref:n,"data-t-id":"hocs-withStoreProvider"})))})};dx(dw),dx(dd);let dL=dx(dw)},23807:function(e){e.exports=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){var n,a,o;n=t,a=e,o=r[e],(a=i(a))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var a,o,s,u,c,l,d,f={exports:{}};o=(a=window).HTMLCanvasElement&&a.HTMLCanvasElement.prototype,u=(s=a.Blob&&function(){try{return new Blob,!0}catch(e){return!1}}())&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,l=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,d=(s||c)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(e){var t,n,r,i,a,o,d,f,g;if(!(t=e.match(l)))throw Error("invalid data URI");for(f=0,n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),r=!!t[4],i=e.slice(t[0].length),d=new Uint8Array(o=new ArrayBuffer((a=r?atob(i):decodeURIComponent(i)).length));f<a.length;f+=1)d[f]=a.charCodeAt(f);return s?new Blob([u?d:o],{type:n}):((g=new c).append(o),g.getBlob(n))},a.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(e,t,n){var r=this;setTimeout(function(){n&&o.toDataURL&&d?e(d(r.toDataURL(t,n))):e(r.mozGetAsFile("blob",t))})}:o.toDataURL&&d&&(o.msToBlob?o.toBlob=function(e,t,n){var r=this;setTimeout(function(){(t&&"image/png"!==t||n)&&o.toDataURL&&d?e(d(r.toDataURL(t,n))):e(r.msToBlob(t))})}:o.toBlob=function(e,t,n){var r=this;setTimeout(function(){e(d(r.toDataURL(t,n)))})})),f.exports?f.exports=d:a.dataURLtoBlob=d;var g=f.exports,m={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},p=void 0!==window.document?window:{},v=function(e){return e>0&&e<1/0},h=Array.prototype.slice;function y(e){return Array.from?Array.from(e):h.call(e)}var b=/^image\/.+$/;function w(e){return b.test(e)}var M=String.fromCharCode,A=p.btoa;function E(e,t){for(var n=[],r=new Uint8Array(e);r.length>0;)n.push(M.apply(null,y(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat(t,";base64,").concat(A(n.join("")))}var O=/\.\d*(?:0|9){12}\d*$/;function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return O.test(e)?Math.round(e*t)/t:e}function C(e){var t=e.aspectRatio,n=e.height,r=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=v(r),o=v(n);if(a&&o){var s=n*t;("contain"===i||"none"===i)&&s>r||"cover"===i&&s<r?n=r/t:r=n*t}else a?n=r/t:o&&(r=n*t);return{width:r,height:n}}var N=p.ArrayBuffer,k=p.FileReader,D=p.URL||p.webkitURL,S=/\.\w+$/,T=p.Compressor;return function(){var e,i;function a(e,n){if(!(this instanceof a))throw TypeError("Cannot call a class as a function");this.file=e,this.exif=[],this.image=new Image,this.options=t(t({},m),n),this.aborted=!1,this.result=null,this.init()}return e=[{key:"init",value:function(){var e=this,t=this.file,n=this.options;if(!("undefined"!=typeof Blob&&(t instanceof Blob||"[object Blob]"===Object.prototype.toString.call(t))))return void this.fail(Error("The first argument must be a File or Blob object."));var i=t.type;if(!w(i))return void this.fail(Error("The first argument must be an image File or Blob object."));if(!D||!k)return void this.fail(Error("The current browser does not support image compression."));N||(n.checkOrientation=!1,n.retainExif=!1);var a="image/jpeg"===i,o=a&&n.checkOrientation,s=a&&n.retainExif;if(!D||o||s){var u=new k;this.reader=u,u.onload=function(n){var a=n.target.result,u={},c=1;o&&(c=function(e){var t=new DataView(e);try{if(255===t.getUint8(0)&&216===t.getUint8(1))for(var n=t.byteLength,r=2;r+1<n;){if(255===t.getUint8(r)&&225===t.getUint8(r+1)){l=r;break}r+=1}if(l){var i=l+4,a=l+10;if("Exif"===function(e,t,n){var r,i="";for(n+=t,r=t;r<n;r+=1)i+=M(e.getUint8(r));return i}(t,i,4)){var o=t.getUint16(a);if(((c=18761===o)||19789===o)&&42===t.getUint16(a+2,c)){var s=t.getUint32(a+4,c);s>=8&&(d=a+s)}}}if(d){var u,c,l,d,f,g,m=t.getUint16(d,c);for(g=0;g<m;g+=1)if(f=d+12*g+2,274===t.getUint16(f,c)){f+=8,u=t.getUint16(f,c),t.setUint16(f,1,c);break}}}catch(e){u=1}return u}(a))>1&&r(u,function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(c)),s&&(e.exif=function(e){for(var t=y(new Uint8Array(e)),n=t.length,r=[],i=0;i+3<n;){var a=t[i],o=t[i+1];if(255===a&&218===o)break;if(255===a&&216===o)i+=2;else{var s=256*t[i+2]+t[i+3],u=i+s+2,c=t.slice(i,u);r.push(c),i=u}}return r.reduce(function(e,t){return 255===t[0]&&225===t[1]?e.concat(t):e},[])}(a)),o||s?!D||c>1?u.url=E(a,i):u.url=D.createObjectURL(t):u.url=a,e.load(u)},u.onabort=function(){e.fail(Error("Aborted to read the image with FileReader."))},u.onerror=function(){e.fail(Error("Failed to read the image with FileReader."))},u.onloadend=function(){e.reader=null},o||s?u.readAsArrayBuffer(t):u.readAsDataURL(t)}else this.load({url:D.createObjectURL(t)})}},{key:"load",value:function(e){var n=this,r=this.file,i=this.image;i.onload=function(){n.draw(t(t({},e),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(Error("Aborted to load the image."))},i.onerror=function(){n.fail(Error("Failed to load the image."))},p.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(p.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=r.name,i.src=e.url}},{key:"draw",value:function(e){var t=this,n=e.naturalWidth,r=e.naturalHeight,i=e.rotate,a=void 0===i?0:i,o=e.scaleX,s=e.scaleY,u=this.file,c=this.image,l=this.options,d=document.createElement("canvas"),f=d.getContext("2d"),m=Math.abs(a)%180==90,p=("contain"===l.resize||"cover"===l.resize)&&v(l.width)&&v(l.height),h=Math.max(l.maxWidth,0)||1/0,b=Math.max(l.maxHeight,0)||1/0,M=Math.max(l.minWidth,0)||0,A=Math.max(l.minHeight,0)||0,O=n/r,N=l.width,D=l.height;if(m){var S=[b,h];h=S[0],b=S[1];var T=[A,M];M=T[0],A=T[1];var _=[D,N];N=_[0],D=_[1]}p&&(O=N/D);var j=C({aspectRatio:O,width:h,height:b},"contain");h=j.width,b=j.height;var x=C({aspectRatio:O,width:M,height:A},"cover");if(M=x.width,A=x.height,p){var L=C({aspectRatio:O,width:N,height:D},l.resize);N=L.width,D=L.height}else{var z=C({aspectRatio:O,width:N,height:D}),P=z.width;N=void 0===P?n:P;var R=z.height;D=void 0===R?r:R}N=Math.floor(I(Math.min(Math.max(N,M),h))),D=Math.floor(I(Math.min(Math.max(D,A),b)));var Y=-N/2,U=-D/2,B=N,H=D,V=[];if(p){var W=0,G=0,F=n,Q=r,Z=C({aspectRatio:O,width:n,height:r},{contain:"cover",cover:"contain"}[l.resize]);F=Z.width,Q=Z.height,W=(n-F)/2,G=(r-Q)/2,V.push(W,G,F,Q)}if(V.push(Y,U,B,H),m){var q=[D,N];N=q[0],D=q[1]}d.width=N,d.height=D,w(l.mimeType)||(l.mimeType=u.type);var K="transparent";u.size>l.convertSize&&l.convertTypes.indexOf(l.mimeType)>=0&&(l.mimeType="image/jpeg");var J="image/jpeg"===l.mimeType;if((J&&(K="#fff"),f.fillStyle=K,f.fillRect(0,0,N,D),l.beforeDraw&&l.beforeDraw.call(this,f,d),!this.aborted)&&(f.save(),f.translate(N/2,D/2),f.rotate(a*Math.PI/180),f.scale(void 0===o?1:o,void 0===s?1:s),f.drawImage.apply(f,[c].concat(V)),f.restore(),l.drew&&l.drew.call(this,f,d),!this.aborted)){var X=function(e){if(!t.aborted){var i=function(e){return t.done({naturalWidth:n,naturalHeight:r,result:e})};if(e&&J&&l.retainExif&&t.exif&&t.exif.length>0){var a=function(e){return i(g(E(function(e,t){var n=y(new Uint8Array(e));if(255!==n[2]||224!==n[3])return e;var r=256*n[4]+n[5];return new Uint8Array([255,216].concat(t,n.slice(4+r)))}(e,t.exif),l.mimeType)))};if(e.arrayBuffer)e.arrayBuffer().then(a).catch(function(){t.fail(Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var o=new k;t.reader=o,o.onload=function(e){a(e.target.result)},o.onabort=function(){t.fail(Error("Aborted to read the compressed image with FileReader."))},o.onerror=function(){t.fail(Error("Failed to read the compressed image with FileReader."))},o.onloadend=function(){t.reader=null},o.readAsArrayBuffer(e)}}else i(e)}};d.toBlob?d.toBlob(X,l.mimeType,l.quality):X(g(d.toDataURL(l.mimeType,l.quality)))}}},{key:"done",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=e.result,i=this.file,a=this.image,o=this.options;if(D&&0===a.src.indexOf("blob:")&&D.revokeObjectURL(a.src),r)if(o.strict&&!o.retainExif&&r.size>i.size&&o.mimeType===i.type&&!(o.width>t||o.height>n||o.minWidth>t||o.minHeight>n||o.maxWidth<t||o.maxHeight<n))r=i;else{var s,u,c=new Date;r.lastModified=c.getTime(),r.lastModifiedDate=c,r.name=i.name,r.name&&r.type!==i.type&&(r.name=r.name.replace(S,("jpeg"===(u=w(s=r.type)?s.substr(6):"")&&(u="jpg"),".".concat(u))))}else r=i;this.result=r,o.success&&o.success.call(this,r)}},{key:"fail",value:function(e){var t=this.options;if(t.error)t.error.call(this,e);else throw e}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],i=[{key:"noConflict",value:function(){return window.Compressor=T,a}},{key:"setDefaults",value:function(e){r(m,e)}}],e&&n(a.prototype,e),i&&n(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a}()}()},29098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(19727),i=function(e){var t=(0,r.useRef)();return(0,r.useEffect)(function(){t.current=e},[e]),t.current}},47691:(e,t,n)=>{"use strict";n.d(t,{WY:()=>o,_d:()=>u,mx:()=>s,yC:()=>c,zi:()=>a});var r=n(33128),i=n(44133);(0,i.Y)({url:"".concat(r.Y,"/logos/Logo2GisRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/Logo2GisSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoAkbars.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoAlfabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoApplemusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoApplemusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoArvand.svg"),defaultSize:44,multiColor:!1});var a=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBeelineColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBeelineMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBspb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoDomrfbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoEnergobank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoEnergotransbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoFinambank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGazprombank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGoskey.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGosuslugiRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGosuslugiSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoHomecredit.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoHumo.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoKinopoiskRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoKinopoiskSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMaestro.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMastercard.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMaxMessengerRound.png"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMaxMessengerSquare.png"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMinbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMir.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMkb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoModulbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMosEnergoSbit.svg"),defaultSize:46,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoNationalStandardBank.svg"),defaultSize:44,multiColor:!1});var o=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiRoundColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiRoundMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiSquareColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiSquareMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOpen.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOzonbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoPochtabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoPrimsotsbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRaiffeisen.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRencredit.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRosbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRosselkhozbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRsb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRutubeRoundColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRutubeRoundMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRutubeSquareColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRutubeSquareMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberPayFilled.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberPayStroked.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSdco.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSnapchatRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSnapchatSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSovcombank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSpb.svg"),multiColor:!1});var s=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramRoundFilled.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramRoundStroked.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramSquareFilled.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramSquareStroked.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTiktokRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTiktokSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTinkoff.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTkbbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTochkabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUnicreditbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUnionPay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUralsib.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKMusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKMusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKPlayRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKPlaySquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKVideoRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKVideoSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVisa.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkClipsRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkClipsSquare.svg"),defaultSize:56,multiColor:!1});var u=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkRoundColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkRoundMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkSquareColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkSquareMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkpay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVtb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWbBank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWebmoney.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWechatRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWechatSquare.svg"),defaultSize:56,multiColor:!1});var c=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWhatsappRound.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWhatsappSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoX5PointsReceived.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoX5PointsSpent.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaDiskRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaDiskSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMapsRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMapsSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMarketRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMarketSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexMusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexMusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexNavigatorRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexNavigatorSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexPay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexProRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexProSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexTaxiRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexTaxiSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexZenRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexZenSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYoomoney.svg"),defaultSize:44,multiColor:!1})},63049:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(58168),i=n(19727),a=n.n(i),o=n(97903),s=n(88810),u=function(e){return(0,i.forwardRef)(function(t,n){var u=(0,i.useContext)(s.w);return a().createElement(o.D,(0,r.A)({},e,t,{activeIndex:u,ref:n,"data-t-id":"utils-defineAnimatedIcon"}))})}},77232:(e,t,n)=>{var r;!function(i,a){"use strict";var o="function",s="undefined",u="object",c="string",l="major",d="model",f="name",g="type",m="vendor",p="version",v="architecture",h="console",y="mobile",b="tablet",w="smarttv",M="wearable",A="embedded",E="Amazon",O="Apple",I="ASUS",C="BlackBerry",N="Browser",k="Chrome",D="Firefox",S="Google",T="Huawei",_="Microsoft",j="Motorola",x="Opera",L="Samsung",z="Sharp",P="Sony",R="Xiaomi",Y="Zebra",U="Facebook",B="Chromium OS",H="Mac OS",V=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},W=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},G=function(e,t){return typeof e===c&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},Q=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,500)},Z=function(e,t){for(var n,r,i,s,c,l,d=0;d<t.length&&!c;){var f=t[d],g=t[d+1];for(n=r=0;n<f.length&&!c&&f[n];)if(c=f[n++].exec(e))for(i=0;i<g.length;i++)l=c[++r],typeof(s=g[i])===u&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):void 0:this[s[0]]=l?s[1].call(this,l,s[2]):void 0:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(G(t[n][r],e))return"?"===n?a:n}else if(G(t[n],e))return"?"===n?a:n;return e},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,p],[/opios[\/ ]+([\w\.]+)/i],[p,[f,x+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[f,x]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[f,"UC"+N]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[f,"Smart Lenovo "+N]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+N],p],[/\bfocus\/([\w\.]+)/i],[p,[f,D+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[f,x+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[f,x+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[f,"MIUI "+N]],[/fxios\/([-\w\.]+)/i],[p,[f,D]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+N]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+N],p],[/samsungbrowser\/([\w\.]+)/i],[p,[f,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,U],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[f,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,k+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[f,"Android "+N]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[p,q,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[f,D+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,p],[/(cobalt)\/([\w\.]+)/i],[f,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,F]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[m,L],[g,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[m,L],[g,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[m,O],[g,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[m,O],[g,b]],[/(macintosh);/i],[d,[m,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[m,z],[g,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[m,T],[g,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[m,T],[g,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[m,R],[g,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[m,R],[g,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[m,"OPPO"],[g,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[m,"Vivo"],[g,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[m,"Realme"],[g,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[m,j],[g,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[m,j],[g,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[m,"LG"],[g,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[m,"LG"],[g,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[m,"Lenovo"],[g,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[m,"Nokia"],[g,y]],[/(pixel c)\b/i],[d,[m,S],[g,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[m,S],[g,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[m,P],[g,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[m,P],[g,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[m,"OnePlus"],[g,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[m,E],[g,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[m,E],[g,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,m,[g,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[m,C],[g,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[m,I],[g,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[m,I],[g,y]],[/(nexus 9)/i],[d,[m,"HTC"],[g,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[d,/_/g," "],[g,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[m,"Acer"],[g,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[m,"Meizu"],[g,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[m,"Ulefone"],[g,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,d,[g,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,d,[g,b]],[/(surface duo)/i],[d,[m,_],[g,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[m,"Fairphone"],[g,y]],[/(u304aa)/i],[d,[m,"AT&T"],[g,y]],[/\bsie-(\w*)/i],[d,[m,"Siemens"],[g,y]],[/\b(rct\w+) b/i],[d,[m,"RCA"],[g,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[m,"Dell"],[g,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[m,"Verizon"],[g,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[m,"Barnes & Noble"],[g,b]],[/\b(tm\d{3}\w+) b/i],[d,[m,"NuVision"],[g,b]],[/\b(k88) b/i],[d,[m,"ZTE"],[g,b]],[/\b(nx\d{3}j) b/i],[d,[m,"ZTE"],[g,y]],[/\b(gen\d{3}) b.+49h/i],[d,[m,"Swiss"],[g,y]],[/\b(zur\d{3}) b/i],[d,[m,"Swiss"],[g,b]],[/\b((zeki)?tb.*\b) b/i],[d,[m,"Zeki"],[g,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],d,[g,b]],[/\b(ns-?\w{0,9}) b/i],[d,[m,"Insignia"],[g,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[m,"NextBook"],[g,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],d,[g,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],d,[g,y]],[/\b(ph-1) /i],[d,[m,"Essential"],[g,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[m,"Envizen"],[g,b]],[/\b(trio[-\w\. ]+) b/i],[d,[m,"MachSpeed"],[g,b]],[/\btu_(1491) b/i],[d,[m,"Rotor"],[g,b]],[/(shield[\w ]+) b/i],[d,[m,"Nvidia"],[g,b]],[/(sprint) (\w+)/i],[m,d,[g,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[m,_],[g,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[m,Y],[g,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[m,Y],[g,y]],[/smart-tv.+(samsung)/i],[m,[g,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[m,L],[g,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,"LG"],[g,w]],[/(apple) ?tv/i],[m,[d,O+" TV"],[g,w]],[/crkey/i],[[d,k+"cast"],[m,S],[g,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[m,E],[g,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[m,z],[g,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[m,P],[g,w]],[/(mitv-\w{5}) bui/i],[d,[m,R],[g,w]],[/Hbbtv.*(technisat) (.*);/i],[m,d,[g,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,Q],[d,Q],[g,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,d,[g,h]],[/droid.+; (shield) bui/i],[d,[m,"Nvidia"],[g,h]],[/(playstation [345portablevi]+)/i],[d,[m,P],[g,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[m,_],[g,h]],[/((pebble))app/i],[m,d,[g,M]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[m,O],[g,M]],[/droid.+; (glass) \d/i],[d,[m,S],[g,M]],[/droid.+; (wt63?0{2,3})\)/i],[d,[m,Y],[g,M]],[/(quest( 2| pro)?)/i],[d,[m,U],[g,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[g,A]],[/(aeobc)\b/i],[d,[m,E],[g,A]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[g,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[g,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[p,q,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,q,K],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,H],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,p],[/\(bb(10);/i],[p,[f,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[f,D+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[f,k+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,p],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,p]]},X=function(e,t){if(typeof e===u&&(t=e,e=a),!(this instanceof X))return new X(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),h=n&&n.userAgentData?n.userAgentData:a,w=t?V(J,t):J,M=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[f]=a,t[p]=a,Z.call(t,r,w.browser),t[l]=typeof(e=t[p])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:a,M&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[v]=a,Z.call(e,r,w.cpu),e},this.getDevice=function(){var e={};return e[m]=a,e[d]=a,e[g]=a,Z.call(e,r,w.device),M&&!e[g]&&h&&h.mobile&&(e[g]=y),M&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[g]=b),e},this.getEngine=function(){var e={};return e[f]=a,e[p]=a,Z.call(e,r,w.engine),e},this.getOS=function(){var e={};return e[f]=a,e[p]=a,Z.call(e,r,w.os),M&&!e[f]&&h&&"Unknown"!=h.platform&&(e[f]=h.platform.replace(/chrome os/i,B).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>500?Q(e,500):e,this},this.setUA(r),this};X.VERSION="1.0.37",X.BROWSER=W([f,p,l]),X.CPU=W([v]),X.DEVICE=W([d,m,g,h,y,w,b,M,A]),X.ENGINE=X.OS=W([f,p]),typeof t!==s?(e.exports&&(t=e.exports=X),t.UAParser=X):n.amdO?a===(r=(function(){return X}).call(t,n,t,e))||(e.exports=r):typeof i!==s&&(i.UAParser=X);var $=typeof i!==s&&(i.jQuery||i.Zepto);if($&&!$.ua){var ee=new X;$.ua=ee.getResult(),$.ua.get=function(){return ee.getUA()},$.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)$.ua[n]=t[n]}}}(window)},88810:(e,t,n)=>{"use strict";n.d(t,{u:()=>o,w:()=>a});var r=n(19727),i=n.n(r),a=(0,r.createContext)(0),o=function(e){return i().createElement(a.Provider,{value:e.activeIndex||0},e.children)}}}]);
//# sourceMappingURL=4588.9e06845.js.map