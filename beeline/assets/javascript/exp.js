"use strict";(()=>{(function(l,b){let T=l.ymab;if("ymab"in l&&typeof T=="function"&&T.inited)return;let O=l.requestAnimationFrame,v=l.location,Y=l.history,Te=10,Ie=5e3,B=100,Se=10*1e3/B,G={},x={},W={},E={enableRedir:!0,enableVisual:!0,enableHTML:!0,enableJS:!1,enableWatch:!1,enableAdv:!0,enableIntegrations:!0,storeRedirParam:!0,removeAbRedirParam:!1,metrikaTimeout:100,cookieDomain:void 0,nonce:void 0,storeReferer:!1,enableSendYmUid:!0,enableSetYmUid:!1},Re={enableRedir:["boolean"],enableVisual:["boolean"],enableHTML:["boolean"],enableJS:["boolean"],enableWatch:["boolean"],enableAdv:["boolean"],enableIntegrations:["boolean"],cookieDomain:["string"],metrikaTimeout:["number"],storeRedirParam:["boolean","string"],removeAbRedirParam:["boolean"],storeReferer:["boolean"],nonce:["string"],enableSendYmUid:["boolean"],enableSetYmUid:["boolean"]},R={},_e="https://uaas.yandex.ru/v1/exps/",K="_ymab_param",M="_ym_uid",U=60,ke=U*60*24*365,Ae="wSIKtymTfos,",X=/\/$/,I;function L({name:t,value:r,domain:e,ttl:n=ke}){let i=`${t}=${r}; path=/;`;if(v.protocol==="https:"&&(i+="SameSite=None; Secure;"),e){let s=e[0]==="."?1:0;v.hostname.indexOf(e.slice(s))>=0?i+=`domain=${e};`:console.error(`cookieDomain=${e} is not valid for current hostname`)}b.cookie=i+`max-age=${n};`}function H(t){let r=new RegExp(`(?:^|; )${t}=([^;]*)`,"g"),e,n;for(;(n=r.exec(b.cookie))!==null;)e=n[1];return e}function P(t,r){let e=t.indexOf(r);if(e===-1)return[];let n=t.slice(0,e).trim(),i=t.slice(e+1);return[n,i]}function Ee(t){return t.t==="integration"}function Pe(t,r){return t.reduce((e,n)=>{let{t:i,n:s,v:a}=n;if(r.enableIntegrations&&Ee(n))return e.integrations.push(n),e;if(i==="visual"&&r.enableVisual){let[c,u]=P(a,"|");if(!c||u===void 0)return e;switch(s){case"css-insert":return e.cssInsert.unshift({selector:c,value:u}),e;case"text-insert":return e.textInsert.unshift({selector:c,value:u}),e;case"href-insert":return e.hrefInsert.unshift({selector:c,value:u}),e;case"image-insert":return e.imageSrcInsert.unshift({selector:c,value:u}),e;case"html-replace":if(!r.enableHTML)break;return e.htmlReplace.unshift({selector:c,value:u}),e;case"js-insert":if(!r.enableJS)break;return e.jsInsert.unshift({selector:c,value:u}),e}}if(i==="redir"&&r.enableRedir)return e.redirect.push(a),e;if(i==="adv"&&r.enableAdv)return e.adv.push({type:s,value:a}),e;if(i==="advReplaceId"&&r.enableAdv)return e.advReplaceId[s]=a,e;let o=e.flags[s];return o||(e.flags[s]=o=[]),o.push(a),e},{cssInsert:[],textInsert:[],redirect:[],hrefInsert:[],imageSrcInsert:[],htmlReplace:[],jsInsert:[],adv:[],advReplaceId:{},flags:{},integrations:[]})}function xe(t){return t?b.querySelector(t):void 0}function Me(t,r){let e=[];for(let{selector:n,value:i}of t){let s=i.trim();e.push(`${n} {${s}}`)}try{let n=b.createElement("style");n.nonce=r,n.setAttribute("type","text/css"),n.textContent=e.join(`
`).replace(/;/g," !important;"),b.body.appendChild(n)}catch(n){}}function Ue(t,r){try{let n=r.trim().split(";");for(let i of n)if(i){let[s,a]=P(i,":");s&&a!==void 0&&(t.style[s]=a)}}catch(e){}}function Le(t,r,e,n){try{let i=b.createElement("script");i.nonce=t,i.setAttribute("type","text/javascript"),i.innerHTML=`(function(element){${e}})(document.querySelector('${n}'));`,b.body.appendChild(i)}catch(i){}}let z={};function w(t,r){if(z[t])return;let e=b.createElement("script");e.async=!0,e.type="text/javascript",e.src=t,r&&e.addEventListener("load",r);let n=b.head;n.insertBefore(e,n.firstChild),z[t]=!0}let Fe=new Set(["js-insert","css-insert"]),Z={cache:{},getItem(t,r){let e=this.cache[t];e||(e=this.cache[t]={});let n=e[r.selector];n||(n=e[r.selector]={});let i=n[r.value];return i||(i=n[r.value]=new Set),i},has(t,r,e){return Fe.has(t)&&this.getItem(t,r).has(e)},add(t,r,e){return this.getItem(t,r).add(e)}};function Q(t,r,e,n){let{selector:i,value:s}=e;if(!i||s===void 0)return;let a=xe(i);if(!a){n>0&&setTimeout(()=>Q(t,r,e,n-1),B);return}Z.has(t,e,a)||(r(a,s,i),Z.add(t,e,a))}function _(t,r,e,n){e.forEach(i=>Q(t,r,i,n?Se:0))}class Ve{constructor(){this.callbacks={};this.MAX_DEPTH=1e3;this.depth=0;this.started=!1;this.item=new l.MutationObserver(()=>{if(this.depth++>=this.MAX_DEPTH){this.item.disconnect(),O(()=>this.observe());return}Object.values(this.callbacks).forEach(r=>r()),clearTimeout(this.depthTimeout),this.depthTimeout=setTimeout(()=>{this.depth=0},0)})}observe(){this.item.observe(b.body,{subtree:!0,childList:!0,characterData:!0,attributes:!0,attributeFilter:["class"]})}start(r,e){this.callbacks[r]=e,this.started||(this.observe(),this.started=!0)}}let Oe=new Ve,He=_.bind(null,"text-insert",(t,r)=>t.textContent===r||(t.textContent=r)),De=_.bind(null,"href-insert",(t,r)=>t.getAttribute("href")===r.trim()||t.setAttribute("href",r.trim())),Ne=_.bind(null,"image-insert",(t,r)=>t.getAttribute("src")===r.trim()||t.setAttribute("src",r.trim())),je=_.bind(null,"html-replace",(t,r)=>t.innerHTML===r||(t.innerHTML=r)),$e=_.bind(null,"css-insert",Ue),Je=(t,r,e)=>{_("js-insert",Le.bind(null,r),t,e)};function ee(t){var n,i;let r=`yaCounter${t}`,e=l[r];if(!e)try{let s=((i=(n=l.Ya)==null?void 0:n._metrika)==null?void 0:i.counters)||{},a=Object.keys(s).find(o=>o.indexOf(`${t}:`)===0);return s[a||""]}catch(s){}return e}let te=!1;function D(t,r){return new Promise(e=>{var s;let n=P(t,".")[1];if(n)try{(s=l.ym)==null||s.call(l,n,"experiments",r)}catch(a){}function i(){if(!n){console.error(`Bad clientId = ${t}`);return}let a=ee(n);if(!a){setTimeout(i,10);return}try{a.experiments(r)}catch(o){}te=!0,e(!0)}i()})}function qe(t,r){var n;let e=P(t,".")[1];if(e){let i=ee(e);i?i.hit(v.href,{referer:r}):(n=l.ym)==null||n.call(l,e,"hit",v.href,{referer:r})}}function Ye(t,r=v.href){if(t.length===0)return;let e=new URL(r),n=new URL(t,e.toString()),i=n.searchParams;n.protocol=e.protocol,n.hostname=e.hostname;let s=0,a=!0;if(e.searchParams.forEach((o,c)=>{if(c==="ab__exp_flags"||c==="vq__redir_param"){i.delete(c);return}let u=c==="ab_redir"||c==="vq__ab_redir",y=i.get(c);if(y===null){if(u)return;i.set(c,o)}else a&&!u&&y!==o&&(a=!1);s++}),a&&(a=s===Array.from(i.keys()).length),!a||e.pathname.replace(X,"")!==n.pathname.replace(X,""))return n}function Be(t,r,e){let n;for(let y of t)if(n=Ye(y),n)break;if(!n)return!1;let i=0;try{ne(r,e,n,()=>i=r.metrikaTimeout)}catch(y){i=r.metrikaTimeout}let s=n.toString(),a,o;function c(){clearTimeout(o),clearTimeout(a),v.replace(s)}o=setTimeout(c,i);function u(){if(!te){a=setTimeout(u,10);return}c()}return u(),!0}function ne(t,r,e,n){if(r){if(t.storeReferer&&b.referrer)try{let i={referer:b.referrer,url:v.href,ts:Date.now()};l.sessionStorage.setItem("vq__referer",JSON.stringify(i))}catch(i){}switch(t.storeRedirParam){case!0:case"localstorage":let i={experiments:r,ts:Date.now(),target:e.toString()};l.localStorage.setItem("vq__redir_param",JSON.stringify(i));break;case"cookie":L({name:"vq__redir_param",value:r,ttl:5*U,domain:t.cookieDomain});break;case"get":e.searchParams.set("vq__redir_param",r);break;default:n()}}}function Ge(t,r,e){if(typeof e!="string"||e.length===0)return;let n=e;try{let i=new URL(e,v.href);ne(t,r,i,()=>console.error("storeRedirParam is required")),n=i.toString()}catch(i){console.error(i)}return n}function We(t){if(!I||typeof I!="object")return;I[t]===!0&&(I[t]=!1);let{callback:r}=I;if(r){for(let[e,n]of Object.entries(I)){let[i,s]=P(e,".");if(!(!i||!s)&&n===!0&&i.length>0&&!isNaN(Number(s)))return}setTimeout(r,0)}}function Ke(t){l.addEventListener("load",()=>{var y,S;let r=(S=(y=l.Ya)==null?void 0:y.Context)==null?void 0:S.AdvManager;if(!r)return;let e=r.getPlatform(),n=t[e];if(!n||!n.id)return;let i=d=>{l.yaContextCb.push(()=>{r.render({type:"inImage",blockId:n.id,renderTo:d})})},s=d=>new Promise((p,g)=>{l.yaContextCb.push(()=>{r.render({type:"inImage",blockId:n.id,renderTo:d,onRender:p,onError:g,altCallback:g})})}),a="img";n.target_ids&&n.target_ids.length?a=`#${n.target_ids.join(", #")}`:n.target_classes&&n.target_classes.length&&(a=`.${n.target_classes.join(", .")}`);let o=d=>{let p=d.id=`yandex_rtb_${n.id}-${Math.random().toString(16).slice(2)}`;return d.tagName==="IMG"&&!d.complete?new Promise((g,m)=>{d.addEventListener("load",()=>g(p)),d.addEventListener("error",m)}):Promise.resolve(p)},c=d=>{let{width:p,height:g}=d.getBoundingClientRect();return n.min_image_width&&p<n.min_image_width||n.min_image_height&&g<n.min_image_height},u=Array.from(b.querySelectorAll(a));if(n.max_ad_images===void 0||n.max_ad_images>=u.length)for(let d of u)c(d)||o(d).then(i).catch(()=>{});else{let d=p=>{if(p<=0||!u.length)return;let g=u.shift();if(g){if(c(g))return d(p);o(g).then(s).then(()=>d(p-1)).catch(()=>d(p))}};d(n.max_ad_images)}},{once:!0})}let Xe=(t,r)=>l.Math.floor(l.Math.random()*(r-t))+t,ze=()=>[l.Math.round(l.Date.now()/1e3),Xe(1e6,999999999)].join("");function we(t){let r=H(M);if(r)return r;try{let e=l.localStorage.getItem(M);if(e)return e}catch(e){}if(t.enableSetYmUid){let e=ze();try{l.localStorage.setItem(M,e)}catch(n){}return L({name:M,value:e,domain:t.cookieDomain}),e}return""}function Ze(t,r){let e=6;function n(){var i;try{for(;r.length;)(i=r[0])==null||i.call(null,t),r.shift()}catch(s){e-- >0?setTimeout(n,50):console.error(s)}}n()}function re(t,r,e){(R[t]||E).removeAbRedirParam&&(N("ab_redir"),N("vq__ab_redir")),e.length&&Ze(r,e),We(t)}function Qe(t,r,e,n,i){let s=new URL(_e),a=s.searchParams;return a.set("client_id",String(t)),a.set("url",v.href),a.set("i",r||H(K)||""),n.enableSendYmUid&&a.set("duid",we(n)),e&&a.set("client_features",JSON.stringify(e)),i&&a.set("cuid",i),s.toString()}function N(t){let r=new URL(v.href),e=r.searchParams;if(e.has(t)){let n=e.get(t);try{e.delete(t),Y.replaceState(Y.state,"",r.toString())}catch(i){}return n||void 0}}function et(t){try{switch(t.storeRedirParam){case"cookie":{let r=H("vq__redir_param");return L({name:"vq__redir_param",value:"",ttl:0,domain:t.cookieDomain}),r}case"get":return N("vq__redir_param");case"localstorage":case!0:{let r=l.localStorage,e=r.getItem("vq__redir_param"),n;if(e){let i=JSON.parse(e);i.ts>Date.now()-5*U*1e3&&(n=i.experiments)}return r.removeItem("vq__redir_param"),n||void 0}}}catch(r){}}function k(t,r,e,n,i){if(typeof t!="string")throw new Error("clientId: should be string");W[t]=!0;let s=Te,a=R[t]||E,o=Qe(t,r,e,a,i),c=G[o]||(G[o]=[]);c.push(n);let u=x[o];if(u)return d(u);if(c.length>1)return;function y(){if(x[o])return;let g={flags:{},i:r,experiments:void 0,prepareUrl:m=>typeof m=="string"?m:void 0,getBlockId:m=>typeof m=="string"?m:void 0};D(t,Ae),re(t,g,c)}let S=setTimeout(y,Ie);function d(g){var he,be;let m=R[t]||E,{flags:nt,redirect:le,htmlReplace:ce,adv:ue,advReplaceId:rt,integrations:it,cssInsert:F,textInsert:de,hrefInsert:fe,jsInsert:ge,imageSrcInsert:me}=Pe(g.flags,m),$=Object.assign({},g,{flags:nt,prepareUrl:Ge.bind(null,m,g.experiments),getBlockId:ot});g.i&&(r=g.i);let J=et(m),A=Promise.resolve();J&&J!==g.experiments&&(A=A.then(()=>D(t,J))),A=A.then(()=>D(t,g.experiments));try{let f=l.sessionStorage,C=f.getItem("vq__referer");if(C){let h=JSON.parse(C);h&&h.ts>Date.now()-5*U*1e3&&h.url===b.referrer&&(A=A.then(()=>{qe(t,h.referer),f.removeItem("vq__referer")}))}}catch(f){}x[o]||(x[o]=g,clearTimeout(S)),$.i&&L({name:K,value:$.i,domain:m.cookieDomain});function pe(f=!1){ce.length&&je(ce,f),fe.length&&De(fe,f),me.length&&Ne(me,f),de.length&&He(de,f),F.length&&$e(F,f),ge.length&&Je(ge,m.nonce,f)}function st(f){try{return JSON.parse(f)}catch(C){}}it.forEach(f=>{let C=st(f.v);C&&oe(f.n,C.version,()=>{l.dispatchEvent(new CustomEvent("init-plugin",{detail:{t:f.t,n:f.n,v:C}}))})});function at(){m.enableVisual&&(F.length&&Me(F,m.nonce),m.enableWatch&&Oe.start(t,pe),pe(!m.enableWatch)),re(t,$,c)}function ot(f){var C;try{let h=JSON.parse((C=rt[f])!=null?C:"");return(h==null?void 0:h.toId)||f}catch(h){return f}}function lt(){for(let{type:f,value:C}of ue)try{let h=JSON.parse(C);if(typeof h!="object"||h===null)continue;if(f==="in_image"){Ke(h);continue}l.yaContextCb.push(()=>{var Ce,ve;let q=(ve=(Ce=l.Ya)==null?void 0:Ce.Context)==null?void 0:ve.AdvManager;if(!q)return;let ye=q.getPlatform(),V=h[ye];V&&V.id&&q.render({type:f,platform:ye,blockId:V.id,renderTo:V.renderTo})})}catch(h){}}(!le.length||!Be(le,m,g.experiments))&&(O(at),ue.length&&(l.yaContextCb||(l.yaContextCb=[]),(be=(he=l.Ya)==null?void 0:he.Context)!=null&&be.AdvManager||w("https://yandex.ru/ads/system/context.js"),O(lt)))}function p(){if(--s>0)return ie(o,d,p);clearTimeout(S),y()}try{localStorage.removeItem("vq__redirect_param")}catch(g){}ie(o,d,p)}function ie(t,r,e){let n=new XMLHttpRequest;return n.open("GET",t),n.addEventListener("load",function(){if(n.status===200){try{let i=JSON.parse(n.responseText);r(i)}catch(i){i instanceof Error&&e(i.message)}return}e(n.statusText)}),n.addEventListener("error",()=>e(n.statusText)),n.send()}let se={init:(t,r,e,n)=>{k(t,r,e,i=>n&&n(i))},getFlags:(t,r,e,n)=>{k(t,r,e,i=>n&&n(i.flags))},getExperiments:(t,r,e,n)=>{k(t,r,e,i=>n&&n(i.experiments))},getParam:(t,r,e,n)=>{k(t,r,e,i=>n&&n(i.i))},setConfig:(t,r,e,n)=>{ae(t,e),n&&n()},getConfig:(t,r,e,n)=>{let i=R[t]||E,s=Object.assign({},i);delete s.nonce,n&&n(s)},adv:(t,r,e,n)=>{k(t,r,e,i=>n&&n(i))}};function ae(t,r){var e;if(typeof r=="object"){let n=R[t]||(R[t]=Object.assign({},E)),i=Object.keys(r);for(let s of i)if(s in n){let a=s,o=r[a];(e=Re[a])!=null&&e.includes(typeof o)&&(n[a]=o)}}}function tt(t){let{clientId:r,config:e}=t;if(!r)throw new Error("clientId is required");ae(r,e),k(r,t.i,t.clientFeatures,n=>t.callback&&t.callback(n),t.cuid)}function oe(t,r,e){let n=r==="beta";(n||/^(\d\.)+\d+$/.test(r)&&/^[a-z0-9-]+$/ig.test(t))&&w(`https://abt.s3.yandex.net/${t}/${n?"":"v"}${r}/main.js`,e)}function j(t,r,e,n,i){if(typeof t=="object")return tt(t);if(!r)throw new Error("method not specified");if(!(r in se))throw new Error("unknown method");typeof n=="function"&&(i=n,n={}),typeof e=="function"&&(i=e,e=void 0),typeof e=="object"&&(n=e,e=void 0),n||(n={}),se[r](t,e,n,i)}T&&(Array.isArray(T.a)&&T.a.forEach(t=>j.apply(null,t)),typeof T.antiFlicker=="object"&&(I=T.antiFlicker)),j.inited=!0,l.ymab=j,function(t){let r=["ru","ua","by","kz","com","com.tr"];function e(s){if(!s)return null;if(typeof s!="string")return s;try{return JSON.parse(s)}catch(a){return null}}function n(s){let a=new URL(s),{hostname:o,protocol:c}=a,u=(o==null?void 0:o.split("."))||[];u[1]==="test"&&u.splice(1,1);let[y,S]=u,p=u.slice(2).join(".");return c==="https:"&&y==="ab"&&S==="yandex"&&r.indexOf(p)!==-1}function i(s){let a=s.origin;if(!a||!n(a))return;let o=e(s.data);if(!(!o||!W[o.clientId]))switch(o.type){case"appendplugin":oe(o.plugin,o.version);break}}t.addEventListener("message",i)}(l)})(window,document);})();
