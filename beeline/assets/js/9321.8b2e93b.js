(self.webpackChunkbeeline_adaptive=self.webpackChunkbeeline_adaptive||[]).push([[9321],{4003:(e,t,n)=>{"use strict";n.d(t,{E:()=>c});var r=n(58168),i=n(19727),a=n.n(i),o=n(86667),s=n(90852),c=function(e){return(0,i.forwardRef)(function(t,n){var c=(0,i.useContext)(s.w);return a().createElement(o.D,(0,r.A)({},e,t,{activeIndex:c,ref:n}))})}},23807:function(e){var t;t=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){var n,a;n=e,a=r[e],(n=i(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var a,o,s,c,u,l,d,f={exports:{}};o=(a=window).HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=(s=a.Blob&&function(){try{return new Blob,!0}catch(e){return!1}}())&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),u=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,l=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,d=(s||u)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(e){var t,n,r,i,a,o,d,f,g;if(!(t=e.match(l)))throw Error("invalid data URI");for(f=0,n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),r=!!t[4],i=e.slice(t[0].length),d=new Uint8Array(o=new ArrayBuffer((a=r?atob(i):decodeURIComponent(i)).length));f<a.length;f+=1)d[f]=a.charCodeAt(f);return s?new Blob([c?d:o],{type:n}):((g=new u).append(o),g.getBlob(n))},a.HTMLCanvasElement&&!o.toBlob&&(o.mozGetAsFile?o.toBlob=function(e,t,n){var r=this;setTimeout(function(){n&&o.toDataURL&&d?e(d(r.toDataURL(t,n))):e(r.mozGetAsFile("blob",t))})}:o.toDataURL&&d&&(o.msToBlob?o.toBlob=function(e,t,n){var r=this;setTimeout(function(){(t&&"image/png"!==t||n)&&o.toDataURL&&d?e(d(r.toDataURL(t,n))):e(r.msToBlob(t))})}:o.toBlob=function(e,t,n){var r=this;setTimeout(function(){e(d(r.toDataURL(t,n)))})})),f.exports?f.exports=d:a.dataURLtoBlob=d;var g=f.exports,m={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},p=void 0!==window.document?window:{},v=function(e){return e>0&&e<1/0},h=Array.prototype.slice;function y(e){return Array.from?Array.from(e):h.call(e)}var b=/^image\/.+$/;function w(e){return b.test(e)}var M=String.fromCharCode,E=p.btoa;function A(e,t){for(var n=[],r=new Uint8Array(e);r.length>0;)n.push(M.apply(null,y(r.subarray(0,8192)))),r=r.subarray(8192);return"data:".concat(t,";base64,").concat(E(n.join("")))}var O=/\.\d*(?:0|9){12}\d*$/;function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return O.test(e)?Math.round(e*t)/t:e}function N(e){var t=e.aspectRatio,n=e.height,r=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",a=v(r),o=v(n);if(a&&o){var s=n*t;("contain"===i||"none"===i)&&s>r||"cover"===i&&s<r?n=r/t:r=n*t}else a?n=r/t:o&&(r=n*t);return{width:r,height:n}}var C=p.ArrayBuffer,k=p.FileReader,D=p.URL||p.webkitURL,T=/\.\w+$/,S=p.Compressor;return function(){var e,i;function a(e,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,a),this.file=e,this.exif=[],this.image=new Image,this.options=t(t({},m),n),this.aborted=!1,this.result=null,this.init()}return e=[{key:"init",value:function(){var e=this,t=this.file,n=this.options;if(!("undefined"!=typeof Blob&&(t instanceof Blob||"[object Blob]"===Object.prototype.toString.call(t)))){this.fail(Error("The first argument must be a File or Blob object."));return}var i=t.type;if(!w(i)){this.fail(Error("The first argument must be an image File or Blob object."));return}if(!D||!k){this.fail(Error("The current browser does not support image compression."));return}C||(n.checkOrientation=!1,n.retainExif=!1);var a="image/jpeg"===i,o=a&&n.checkOrientation,s=a&&n.retainExif;if(!D||o||s){var c=new k;this.reader=c,c.onload=function(n){var a=n.target.result,c={},u=1;o&&(u=function(e){var t=new DataView(e);try{if(255===t.getUint8(0)&&216===t.getUint8(1))for(var n=t.byteLength,r=2;r+1<n;){if(255===t.getUint8(r)&&225===t.getUint8(r+1)){l=r;break}r+=1}if(l){var i=l+4,a=l+10;if("Exif"===function(e,t,n){var r,i="";for(n+=t,r=t;r<n;r+=1)i+=M(e.getUint8(r));return i}(t,i,4)){var o=t.getUint16(a);if(((u=18761===o)||19789===o)&&42===t.getUint16(a+2,u)){var s=t.getUint32(a+4,u);s>=8&&(d=a+s)}}}if(d){var c,u,l,d,f,g,m=t.getUint16(d,u);for(g=0;g<m;g+=1)if(f=d+12*g+2,274===t.getUint16(f,u)){f+=8,c=t.getUint16(f,u),t.setUint16(f,1,u);break}}}catch(e){c=1}return c}(a))>1&&r(c,function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(u)),s&&(e.exif=function(e){for(var t=y(new Uint8Array(e)),n=t.length,r=[],i=0;i+3<n;){var a=t[i],o=t[i+1];if(255===a&&218===o)break;if(255===a&&216===o)i+=2;else{var s=256*t[i+2]+t[i+3],c=i+s+2,u=t.slice(i,c);r.push(u),i=c}}return r.reduce(function(e,t){return 255===t[0]&&225===t[1]?e.concat(t):e},[])}(a)),o||s?!D||u>1?c.url=A(a,i):c.url=D.createObjectURL(t):c.url=a,e.load(c)},c.onabort=function(){e.fail(Error("Aborted to read the image with FileReader."))},c.onerror=function(){e.fail(Error("Failed to read the image with FileReader."))},c.onloadend=function(){e.reader=null},o||s?c.readAsArrayBuffer(t):c.readAsDataURL(t)}else this.load({url:D.createObjectURL(t)})}},{key:"load",value:function(e){var n=this,r=this.file,i=this.image;i.onload=function(){n.draw(t(t({},e),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(Error("Aborted to load the image."))},i.onerror=function(){n.fail(Error("Failed to load the image."))},p.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(p.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=r.name,i.src=e.url}},{key:"draw",value:function(e){var t=this,n=e.naturalWidth,r=e.naturalHeight,i=e.rotate,a=void 0===i?0:i,o=e.scaleX,s=e.scaleY,c=this.file,u=this.image,l=this.options,d=document.createElement("canvas"),f=d.getContext("2d"),m=Math.abs(a)%180==90,p=("contain"===l.resize||"cover"===l.resize)&&v(l.width)&&v(l.height),h=Math.max(l.maxWidth,0)||1/0,b=Math.max(l.maxHeight,0)||1/0,M=Math.max(l.minWidth,0)||0,E=Math.max(l.minHeight,0)||0,O=n/r,C=l.width,D=l.height;if(m){var T=[b,h];h=T[0],b=T[1];var S=[E,M];M=S[0],E=S[1];var _=[D,C];C=_[0],D=_[1]}p&&(O=C/D);var j=N({aspectRatio:O,width:h,height:b},"contain");h=j.width,b=j.height;var x=N({aspectRatio:O,width:M,height:E},"cover");if(M=x.width,E=x.height,p){var L=N({aspectRatio:O,width:C,height:D},l.resize);C=L.width,D=L.height}else{var z=N({aspectRatio:O,width:C,height:D}),P=z.width;C=void 0===P?n:P;var R=z.height;D=void 0===R?r:R}C=Math.floor(I(Math.min(Math.max(C,M),h))),D=Math.floor(I(Math.min(Math.max(D,E),b)));var U=-C/2,Y=-D/2,B=C,H=D,V=[];if(p){var G=0,Z=0,F=n,W=r,Q=N({aspectRatio:O,width:n,height:r},{contain:"cover",cover:"contain"}[l.resize]);F=Q.width,W=Q.height,G=(n-F)/2,Z=(r-W)/2,V.push(G,Z,F,W)}if(V.push(U,Y,B,H),m){var q=[D,C];C=q[0],D=q[1]}d.width=C,d.height=D,w(l.mimeType)||(l.mimeType=c.type);var K="transparent";c.size>l.convertSize&&l.convertTypes.indexOf(l.mimeType)>=0&&(l.mimeType="image/jpeg");var J="image/jpeg"===l.mimeType;if(J&&(K="#fff"),f.fillStyle=K,f.fillRect(0,0,C,D),l.beforeDraw&&l.beforeDraw.call(this,f,d),!this.aborted&&(f.save(),f.translate(C/2,D/2),f.rotate(a*Math.PI/180),f.scale(void 0===o?1:o,void 0===s?1:s),f.drawImage.apply(f,[u].concat(V)),f.restore(),l.drew&&l.drew.call(this,f,d),!this.aborted)){var X=function(e){if(!t.aborted){var i=function(e){return t.done({naturalWidth:n,naturalHeight:r,result:e})};if(e&&J&&l.retainExif&&t.exif&&t.exif.length>0){var a=function(e){return i(g(A(function(e,t){var n=y(new Uint8Array(e));if(255!==n[2]||224!==n[3])return e;var r=256*n[4]+n[5];return new Uint8Array([255,216].concat(t,n.slice(4+r)))}(e,t.exif),l.mimeType)))};if(e.arrayBuffer)e.arrayBuffer().then(a).catch(function(){t.fail(Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var o=new k;t.reader=o,o.onload=function(e){a(e.target.result)},o.onabort=function(){t.fail(Error("Aborted to read the compressed image with FileReader."))},o.onerror=function(){t.fail(Error("Failed to read the compressed image with FileReader."))},o.onloadend=function(){t.reader=null},o.readAsArrayBuffer(e)}}else i(e)}};d.toBlob?d.toBlob(X,l.mimeType,l.quality):X(g(d.toDataURL(l.mimeType,l.quality)))}}},{key:"done",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=e.result,i=this.file,a=this.image,o=this.options;if(D&&0===a.src.indexOf("blob:")&&D.revokeObjectURL(a.src),r){if(o.strict&&!o.retainExif&&r.size>i.size&&o.mimeType===i.type&&!(o.width>t||o.height>n||o.minWidth>t||o.minHeight>n||o.maxWidth<t||o.maxHeight<n))r=i;else{var s,c,u=new Date;r.lastModified=u.getTime(),r.lastModifiedDate=u,r.name=i.name,r.name&&r.type!==i.type&&(r.name=r.name.replace(T,("jpeg"===(c=w(s=r.type)?s.substr(6):"")&&(c="jpg"),".".concat(c))))}}else r=i;this.result=r,o.success&&o.success.call(this,r)}},{key:"fail",value:function(e){var t=this.options;if(t.error)t.error.call(this,e);else throw e}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],i=[{key:"noConflict",value:function(){return window.Compressor=S,a}},{key:"setDefaults",value:function(e){r(m,e)}}],e&&n(a.prototype,e),i&&n(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a}()},e.exports=t()},54361:(e,t,n)=>{"use strict";n.d(t,{WY:()=>o,_d:()=>c,mx:()=>s,yC:()=>u,zi:()=>a});var r=n(80174),i=n(52559);(0,i.Y)({url:"".concat(r.Y,"/logos/LogoAkbars.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoAlfabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoApplemusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoApplemusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoArvand.svg"),defaultSize:44,multiColor:!1});var a=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBeelineColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBeelineMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoBspb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoDomrfbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoEnergobank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoEnergotransbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoFinambank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGazprombank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGoskey.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGosuslugiRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoGosuslugiSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoHomecredit.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoHumo.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoKinopoiskRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoKinopoiskSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMaestro.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMastercard.svg"),multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMinbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMir.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMkb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoModulbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoMosEnergoSbit.svg"),defaultSize:46,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoNationalStandardBank.svg"),defaultSize:44,multiColor:!1});var o=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiRoundColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiRoundMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiSquareColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOdnoklassnikiSquareMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOpen.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoOzonbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoPochtabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoPrimsotsbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRaiffeisen.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRencredit.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRosbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRosselkhozbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoRsb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberPayFilled.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberPayStroked.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSberbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSdco.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSnapchatRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSnapchatSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSovcombank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoSpb.svg"),multiColor:!1});var s=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramRoundFilled.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramRoundStroked.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramSquareFilled.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTelegramSquareStroked.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTiktokRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTiktokSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTinkoff.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTkbbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoTochkabank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUnicreditbank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUnionPay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoUralsib.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKPlayRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKPlaySquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKVideoRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKVideoSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKMusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVKMusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVisa.svg"),ratio:1.9166666666666667,multiColor:!1});var c=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkRoundColor.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkRoundMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkSquareColor.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkSquareMonochrome.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkpay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkClipsRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVkClipsSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoVtb.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWbBank.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWebmoney.svg"),defaultSize:44,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWechatRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWechatSquare.svg"),defaultSize:56,multiColor:!1});var u=(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWhatsappRound.svg"),defaultSize:56,multiColor:!1});(0,i.Y)({url:"".concat(r.Y,"/logos/LogoWhatsappSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaDiskRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaDiskSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMapsRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMapsSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMarketRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYaMarketSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexMusicRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexMusicSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexPay.svg"),ratio:1.9166666666666667,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexTaxiRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexTaxiSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexZenRound.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYandexZenSquare.svg"),defaultSize:56,multiColor:!1}),(0,i.Y)({url:"".concat(r.Y,"/logos/LogoYoomoney.svg"),defaultSize:44,multiColor:!1})},57e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(19727),i=function(e){var t=(0,r.useRef)();return(0,r.useEffect)(function(){t.current=e},[e]),t.current}},69321:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>dj});var r,i,a,o=n(58168),s=n(64467),c=n(5544),u=n(80045),l=n(19727),d=n.n(l),f=n(61225),g=n(82279),m=n(12670),p=n(32980),v=n(60148),h=n(60436),y=n(57726),b=n.n(y),w={b:"",e:"__",m:"_"},M=function(e,t){var n=b().bind(t),r=function(e,t,n,r){var i=t?w.b+e+w.e+t:w.b+e,a=[i];if(n){var o="".concat(i).concat(w.m);Object.keys(n).forEach(function(e){if(Object.prototype.hasOwnProperty.call(n,e)){var t=n[e];t&&a.push(!0===t?o+e:"".concat(o+e).concat(w.m).concat(t.toString()))}})}return void 0!==r&&(Array.isArray(r)?r:[r]).forEach(function(e){e&&"string"==typeof e&&e.split(" ").forEach(function(e){e!==i&&a.push(e)})}),a};return function(t,i,a){var o;return o="string"==typeof t?"string"==typeof i||Array.isArray(i)?r(e,t,void 0,i):r(e,t,i,a):r(e,void 0,t,i),n.apply(void 0,(0,h.A)(o))}},E=n(24423),A=function(e){var t;return(null===(t=e.dataset)||void 0===t?void 0:t[E.qd])===E.Cc},O=function(){var e=(0,l.useState)(500),t=(0,c.A)(e,2),n=t[0],r=t[1];return(0,l.useEffect)(function(){var e=new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.forEach(function(e){A(e)&&r(500)}),e.addedNodes.forEach(function(e){if(A(e)){var t=Number(getComputedStyle(e).zIndex);r(!t||Number.isNaN(t)?1:t-1)}})})}),t=document.querySelector("body");return t&&e.observe(t,{childList:!0}),function(){e.disconnect()}},[]),n},I=n(61106),N=n(4003),C=n(62771),k=n(90852),D=n(41231),T=n(16324),S=["className","onlyIcon","iconColor","view","children"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x=M("button",{button_onlyIcon:"LG4UX","button_view_tertiary-invert":"wslBw",button_view_tertiary:"WhsVz"}),L={tertiary:"--color-icon-primary-invert",primary:"--color-constant-01","secondary-invert":"--color-icon-primary",secondary:"--color-icon-primary","tertiary-invert":"--color-icon-primary-invert"},z=(0,D.B)(function(e,t){var n=e.className,r=e.onlyIcon,i=e.iconColor,a=e.view,c=void 0===a?"primary":a,l=e.children,f=(0,u.A)(e,S);return d().createElement(T.$,(0,o.A)({},f,"button"!==f.tagName&&f.tagName?{}:{type:"button"},{className:x({onlyIcon:r,view:c},n),onlyIcon:r,ref:t,style:j(j({},f.style),i?(0,s.A)({},L[c],"var(--color-icon-".concat(i,")")):{}),view:"tertiary-invert"===c?"tertiary":c}),l)}),P=n(60258),R=n(62011),U=function(e){return e[e.Unknown=0]="Unknown",e[e.Wifi=1]="Wifi",e[e.M_2G=2]="M_2G",e[e.M_2G_EDGE=3]="M_2G_EDGE",e[e.M_2G_GPRS=4]="M_2G_GPRS",e[e.M_3G=5]="M_3G",e[e.M_3G_HSUPA=6]="M_3G_HSUPA",e[e.M_3G_HSDPA=7]="M_3G_HSDPA",e[e.M_LTE=8]="M_LTE",e[e.M_5G=9]="M_5G",e}({}),Y={http:"https",websocket:"wss"},B={zoneType:"unauthorized",showMessageBeforeInput:!0},H=function(e){return e.LOAD="LOAD",e.ERROR="ERROR",e.OFFLINE="OFFLINE",e.BLOCK="BLOCK",e.UNKNOWN="UNKNOWN",e}({}),V=function(e){return e.HISTORY_LOAD="HISTORY_LOAD",e.CONTENT_LOAD="CONTENT_LOAD",e.VALIDATE_CAPTCHA="VALIDATE_CAPTCHA",e.OFFLINE="OFFLINE",e.REFRESH_TOKEN="REFRESH_TOKEN",e.WEBSOCKET_CONNECTION="WEBSOCKET_CONNECTION",e.UNKNOWN="UNKNOWN",e}({});function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F={isChatOpen:!1,isDateBlockVisible:!1,isMenuOpen:!1,windowBlocked:!1,isHistoryCalled:!1,widgetConfig:{authZoneConfig:{},charsLimit:6e3},errorScreen:{retryCount:0,reason:V.UNKNOWN,type:H.UNKNOWN}},W=(0,P.Z0)({name:"settings",initialState:F,reducers:{setWidgetConfig:function(e,t){var n,r,i=t.payload;null!==(n=i.authZoneConfig)&&void 0!==n&&n.zoneType&&(0,R.TV)({name:"chat_auth_zone",value:null===(r=i.authZoneConfig)||void 0===r?void 0:r.zoneType}),e.widgetConfig=Z(Z({},e.widgetConfig),i)},setIsDateBlockVisible:function(e,t){var n=t.payload;e.isDateBlockVisible=n},setChatOpen:function(e,t){var n=t.payload;e.isChatOpen=n},setMenuOpen:function(e,t){var n=t.payload;e.isMenuOpen=n},setWindowBlocked:function(e,t){var n=t.payload;e.windowBlocked=n},setIsHistoryCalled:function(e,t){var n=t.payload;e.isHistoryCalled=n},setErrorScreenType:function(e,t){var n=t.payload;e.errorScreen.type!==H.BLOCK&&(e.errorScreen.type=n),(n===H.UNKNOWN||void 0===n)&&(e.errorScreen.reason=V.UNKNOWN)},setErrorReason:function(e,t){var n=t.payload;e.errorScreen.type!==H.BLOCK&&(e.errorScreen.reason=n)},clearErrorScreenData:function(e){e.errorScreen.reason=V.UNKNOWN,e.errorScreen.type=H.UNKNOWN},setErrorRetryCount:function(e,t){var n=t.payload;e.errorScreen.retryCount=n}}}),Q=W.actions,q=Q.setChatOpen,K=Q.setWindowBlocked,J=(Q.setIsDateBlockVisible,Q.setMenuOpen),X=Q.setWidgetConfig,$=Q.setErrorScreenType,ee=Q.setErrorReason,et=Q.setIsHistoryCalled,en=Q.setErrorRetryCount,er=Q.clearErrorScreenData,ei=n(77284),ea=function(e){return e.settings},eo=function(e){return ea(e).isChatOpen},es=function(e){return ea(e).isMenuOpen},ec=function(e){return ea(e).isHistoryCalled},eu=function(e){return ea(e).widgetConfig},el=function(e){return eu(e).apiSettings||ei.vs},ed=function(e){return ea(e).windowBlocked},ef=function(e){return eu(e).startButtonsConfig},eg=function(e){var t;return null===(t=ef(e))||void 0===t?void 0:t.list},em=function(e){return eu(e).authZoneConfig},ep=function(e){return ea(e).errorScreen},ev=function(e){return ep(e).type},eh=function(e){return ep(e).reason},ey=function(e){return ep(e).retryCount},eb=function(e){var t,n,r=eu(e).attachmentsConfig||ei.vs,i=e.content.ShowAttachments&&el(e).isAttachmentsEnabled;return{image:(null===(t=r.settings)||void 0===t?void 0:t.find(function(e){return"Image"===e.type}))||ei.vs,file:(null===(n=r.settings)||void 0===n?void 0:n.find(function(e){return"File"===e.type}))||ei.vs,isEnabled:i}},ew=function(e){return e.idle="idle",e.loading="loading",e.failed="failed",e.fulfilled="fulfilled",e}({}),eM=n(10467),eE=n(54756),eA=n.n(eE),eO=n(35475),eI=eO.A.create({headers:{"Content-Type":"application/json"}}),eN={request:"/request/1",UAT:"https://api.beeline.ru/mwuat",auth:"/auth/api/commands",gettokenAuthZone:"/login/gettoken"},eC={captcha:{create:"".concat(eN.auth,"/createCaptcha"),validate:"".concat(eN.auth,"/validateCaptcha"),refresh:"".concat(eN.auth,"/refresh")},chat:{history:function(e){return"/api/".concat(e,"/history")}},request:{constructor:"".concat(eN.request,"/constructor")},tokenAuthZone:{gettoken:"".concat(eN.gettokenAuthZone)},file:{sent:"/file/api/commands/upload",download:"/file/api/queries"},UAT:{auth:"".concat(eN.UAT,"/auth/1/auth")}},ek=function(e){return"/api/".concat(e,"/content")},eD=function(e){return e[e.Unknown=0]="Unknown",e[e.Client=1]="Client",e[e.External=2]="External",e[e.Bot=3]="Bot",e[e.Operator=4]="Operator",e}({}),eT=function(e){return e[e.Unknown=0]="Unknown",e[e.Web=1]="Web",e[e.App=2]="App",e}({}),eS=function(e){return e[e.Unknown=0]="Unknown",e[e.Created=1]="Created",e[e.Started=2]="Started",e[e.Enqueued=3]="Enqueued",e[e.Finished=4]="Finished",e}({}),e_=function(e){return e[e.success=1]="success",e[e.error=2]="error",e}({}),ej=function(e){return e[e.sent=1]="sent",e[e.delivered=2]="delivered",e[e.failed=3]="failed",e[e.refresh=4]="refresh",e[e.download=5]="download",e}({}),ex=function(e){return e[e.Unknown=0]="Unknown",e[e.Text=1]="Text",e[e.File=2]="File",e[e.Contact=3]="Contact",e[e.Geolocation=4]="Geolocation",e[e.WIDGET=5]="WIDGET",e[e.CAPTCHA=6]="CAPTCHA",e[e.Button=9]="Button",e[e.FileDoc=10]="FileDoc",e[e.Img=11]="Img",e[e.Link=12]="Link",e}({}),eL={withCredentials:!0},ez=n(77232),eP=n.n(ez),eR=function(e){return e.Ctn="X-Ctn",e.Auth="X-Auth-Token",e.BisToken="X-Bis-Token",e.Environment="X-Api-Environment",e.AuthScheme="X-Auth-Scheme",e.AccessToken="X-Access-Token",e.Scheme="X-Scheme",e.IsWeb="isWeb",e.IdpIdToken="X-IDP-ID-Token",e.OsVersion="X-Mobile-OsVersion",e.PhoneModel="X-Mobile-PhoneModel",e.ConnectionType="X-Mobile-ConnectionType",e.Platform="X-Platform",e.Source="X-Source",e}({}),eU=function(e){return e.BisToken="BisToken",e.BisIdToken="BisToken",e.IdpIdToken="IdpIdToken",e.Captcha="Captcha",e}({}),eY={BisToken:eR.BisToken,IdpIdToken:eR.IdpIdToken,Captcha:eR.AccessToken},eB="__prev_zone_type_key",eH=function(e){return e.android="android",e.ios="ios",e}({}),eV=function(e){return e.android="Webview2",e.ios="Webview1",e}({}),eG=function(){if(navigator){var e,t=null!==(e=navigator.connection)&&void 0!==e?e:{},n=t.effectiveType;if("wifi"===t.type)return U.Wifi;if("slow-2g"===n)return U.M_2G_EDGE;if("2g"===n)return U.M_2G;if("3g"===n)return U.M_3G;if("4g"===n)return U.M_LTE}return U.Unknown},eZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toLowerCase();return t.includes(eH.android)?eV.android:t.includes(eH.ios)?eV.ios:e},eF=function(){var e={},t=new(eP())().getResult(),n=t.browser,r=t.device,i=t.os,a=eG();return null!=n&&n.name&&(e[eR.Source]=n.name),i.name&&(e[eR.Platform]=eZ(i.name)),i.version&&(e[eR.OsVersion]=i.version),(r&&"tablet"===r.type||"mobile"===r.type)&&(e[eR.PhoneModel]="".concat(r.vendor," ").concat(r.model)),a&&(e[eR.ConnectionType]=null==a?void 0:a.toString()),e},eW=function(e){var t=e.token,n=e.authType,r=void 0===n?eU.Captcha:n,i=e.zoneType,a={};if(t&&r){var o=eU[r];a[eY[o]]=t,a["unauthorized"===(void 0===i?"unauthorized":i)?eR.Scheme:eR.AuthScheme]=o}return a},eQ=function(e){var t,n=null!=e?e:null===(t=window)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.origin;return{http:"".concat(Y.http,"://").concat(n),ws:"".concat(Y.websocket,"://").concat(n,"/api/v1/session?channel=").concat(eT.App)}},eq=function(e){var t=e.baseUrl,n=e.token,r=e.authType,i=void 0===r?eU.Captcha:r,a=e.zoneType,o=new URL(t),s=eF();if(n&&i){var c=eU[i];o.searchParams.append(eY[c],n),o.searchParams.append("unauthorized"===(void 0===a?"unauthorized":a)?eR.Scheme:eR.AuthScheme,c)}return Object.keys(s).forEach(function(e){o.searchParams.append(e,s[e])}),o.searchParams.append(eR.IsWeb,"true"),o.href},eK=function(e){var t=null!=e?e:{},n=t.status,r=t.data;return t.response,{status:null!=n?n:400,message:null==r?void 0:r.message}},eJ=function(e){return eI.get(e,{responseType:"arraybuffer"}).then(function(e){return new Blob([e.data],{type:e.headers["content-type"]})})},eX=(0,P.zD)("session/getHistory",function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=el((0,n.getState)()).apiHistoryVersion||"V5",e.next=5,eI.post(eC.chat.history(r),{},{params:{channel:eT.App}});case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e$=(0,P.zD)("content/getContent",function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=el((0,n.getState)()).apiContentVersion||"V2",e.next=5,eI.get(ek(r),{params:{channel:eT.Web}});case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e0=(0,P.zD)("captcha/validateCaptcha",function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r,i;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,eI.post(eC.captcha.validate,t,eL);case 4:return i=e.sent.data,e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(eK(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,n){return e.apply(this,arguments)}}()),e1=(0,P.zD)("captcha/generateCapthca",function(){var e=(0,eM.A)(eA().mark(function e(t){return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI.post(eC.captcha.create,t,eL);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e4=(0,P.zD)("file/generateFile",function(){var e=(0,eM.A)(eA().mark(function e(t){return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI.post(eC.file.sent,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e2=new Uint8Array(16);let e6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var e3=[],e5=0;e5<256;++e5)e3.push((e5+256).toString(16).substr(1));let e9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(e3[e[t+0]]+e3[e[t+1]]+e3[e[t+2]]+e3[e[t+3]]+"-"+e3[e[t+4]]+e3[e[t+5]]+"-"+e3[e[t+6]]+e3[e[t+7]]+"-"+e3[e[t+8]]+e3[e[t+9]]+"-"+e3[e[t+10]]+e3[e[t+11]]+e3[e[t+12]]+e3[e[t+13]]+e3[e[t+14]]+e3[e[t+15]]).toLowerCase();if(!("string"==typeof n&&e6.test(n)))throw TypeError("Stringified UUID is invalid");return n},e8=function(e,t,n){var i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(e2)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=i[a];return t}return e9(i)};var e7=function(){return new Date().toISOString()},te=function(e,t){var n=new Date(e).getTime(),r=new Date(t).getTime();return n===r?0:n>r?1:-1},tt=function(e,t){return -1!==te(e,t)},tn=function(e,t,n){var r=new Date(e).getDay(),i=new Date(t).getDay(),a=new Date(e).getTime(),o=new Date(n).getTime();return r!==i&&a===o?1:0},tr=function(e){return e.OutgoingMessage="OutgoingMessage",e.OperationResult="OperationResult",e.SocketConnectionResult="SocketConnectionResult",e.IncomingMessage="IncomingMessage",e}({}),ti=["id"];function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ts=function(e,t){var n=t.id,r=void 0===n?e8():n,i=t.replyId,a=t.messageType,o=void 0===a?ex.Text:a,s=t.value,c=t.link;return{type:tr.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:o,text:e,replyId:i,value:s,link:c},author:{type:eD.Client}}}},tc=function(e,t){var n=t.id,r=void 0===n?e8():n;return{type:tr.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:ex.Img,filePreviewId:e.imagePreviewId,fileId:e.imageId}}}},tu=function(e,t){var n=t.id,r=void 0===n?e8():n;return{type:tr.OutgoingMessage,data:{requestId:null==r?void 0:r.toString(),message:{type:ex.FileDoc,fileId:e}}}},tl=function(e,t,n){var r,i,a,o,s,c,u,l,d,f;return{messageId:null!==(r=t.id)&&void 0!==r?r:e8(),messageStatus:null!==(i=t.status)&&void 0!==i?i:ej.sent,date:e7(),message:{type:null!==(a=t.messageType)&&void 0!==a?a:ex.Text,content:e,replyId:t.replyId,fileUrl:t.messageType===ex.FileDoc?null==n||null===(o=n.fileInfo)||void 0===o?void 0:o.fileUrl:null==n||null===(s=n.imageUrlGroup)||void 0===s?void 0:s.fileUrl,filePreviewUrl:null==n||null===(c=n.imageUrlGroup)||void 0===c?void 0:c.filePreviewUrl,imageSettings:null==n||null===(u=n.imageUrlGroup)||void 0===u?void 0:u.imageSettings,name:null==n||null===(l=n.fileInfo)||void 0===l?void 0:l.name,size:null==n||null===(d=n.fileInfo)||void 0===d?void 0:d.size,chips:t.chips,value:null==t?void 0:t.value},author:{type:null!==(f=t.author)&&void 0!==f?f:eD.Client},captcha:t.captcha,onlyClient:t.onlyClient}},td=function(e,t){var n=t.id,r=(0,u.A)(t,ti),i=null!=n?n:e8();return{socketMessage:ts(e,to({id:i},r)),historyMessage:tl(e,to({id:i},r))}},tf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eS.Created,t=e7();return{id:"",channel:eT.Web,createdAt:t,updatetAt:t,status:e,messages:[]}},tg=function(e){var t,n=e.type===tr.IncomingMessage,r=n?e.data.timestamp:e7(),i=n?eD.Bot:eD.Client;return{historyMessage:{date:r,messageId:e8(),messageStatus:ej.delivered,message:{type:ex.Text,content:e.data.message.text},author:e.data.author||{type:i}},quickReplies:(null===(t=e.data.message)||void 0===t?void 0:t.quickReplies)||[]}},tm=function(e){return{author:{type:eD.Operator},date:new Date().toISOString(),message:{content:e,type:ex.Text},messageId:"mock-operator-message",messageStatus:ej.delivered}},tp="__captcha-access-token",tv="__captcha-bb-history",th="__captcha_retry_key",ty="__captcha_recreate_key",tb="__captcha_blocked_timeout",tw="__captcha_stage_key",tM="__captcha_target",tE="__captcha_active_message_id",tA="__captcha_queued_messages",tO="blocked-message",tI="There is no valid cookie in request",tN=function(e,t){if(e){var n=e.filter(function(e){var n=e.messageStatus,r=e.onlyClient;return n===ej.failed||r&&t});sessionStorage.setItem(tv,JSON.stringify(n))}},tC=n(82284),tk=function(e){return e.list.slice(-1)[0]},tD=function(e){var t=e.message.content;return"object"===(0,tC.A)(t)?t.text:t},tT=function(e){return e===ex.Img||e===ex.FileDoc},tS=function(e){var t=e.message.content;return"object"===(0,tC.A)(t)?{fileUrl:null==t?void 0:t.fileUrl,filePreviewUrl:null==t?void 0:t.filePreviewUrl,size:null==t?void 0:t.size,name:null==t?void 0:t.name}:{fileUrl:"",filePreviewUrl:"",size:void 0,name:""}},t_=function(e){"function"==typeof e&&e()};function tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tx=function e(t,n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);return[].concat((0,h.A)(Object.keys(t)),(0,h.A)(Object.keys(n))).filter(function(e,t,n){return n.indexOf(e)===t}).forEach(function(i){var a;(a=n[i])&&"object"===(0,tC.A)(a)&&!Array.isArray(a)?(t[i]||(Object.assign(r,(0,s.A)({},i,{})),Object.assign(t,(0,s.A)({},i,{}))),r[i]=e(t[i],n[i])):void 0!==n[i]&&Object.assign(r,(0,s.A)({},i,n[i]))}),r};function tL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tz=function(e){return!e||e.status===eS.Finished},tP=function(e){var t=tk(e.history);if(t){for(var n,r=t.messages.map(function(e){return e.messageId}),i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(n=t.messages).push.apply(n,(0,h.A)(a.filter(function(e){return!r.includes(e.messageId)})))}},tR=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=n.list.length>11?n.list.length-11:0,i=n.list.splice(r);return i.forEach(function(e,r){t.forEach(function(t){var n,a=null===(n=i[r+1])||void 0===n?void 0:n.createdAt,o=!a||tt(a,t.date),s=i[r].messages.find(function(e){return e.messageId===t.messageId});tt(t.date,e.createdAt)&&o&&!s&&i[r+tn(t.date,e.createdAt,a)].messages.push(t)}),i[r].messages.sort(function(e,t){return te(e.date,t.date)}),n.list.push(i[r])}),n},tU=function(e){for(var t=e.list.slice(-2),n=0;n<t.length;n+=1)for(var r=t[n].messages,i=0;i<r.length;i+=1){var a=r[i];a.message.type===ex.Img&&(a.messageStatus=5)}return e},tY=function(e){var t,n=JSON.parse(null!==(t=sessionStorage.getItem(tv))&&void 0!==t?t:"[]"),r=tU(e);return n&&(null==n?void 0:n.length)!==0?tR(r,n):r},tB=function(e){var t=tk(e.history);null==t||t.messages.sort(function(e,t){return te(e.date,t.date)})},tH=function(e){if(tz(tk(e.history))){var t=tf();e.history.list.push(t)}},tV=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1,r=t.length;r-n>1&&e;){var i,a,o=Math.floor((n+r)/2),s=t[o],c=null===(a=t[o+1])||void 0===a?void 0:a.createdAt,u=e>=s.createdAt&&!c;if(e>=s.createdAt&&c&&e<c||u)return[s,o];e<(null==s?void 0:s.createdAt)?r=o:n=o}return[(null==t||null===(i=t.slice(-1))||void 0===i?void 0:i[0])||{},t.length-1]},tG=function(e,t){var n=null==t?void 0:t.messages.find(function(t){return t.messageId===e});return!!n&&((null==n?void 0:n.messageStatus)!==ej.delivered&&(n.messageStatus=ej.failed),!0)},tZ=["id","date"],tF={history:{count:0,list:[]},resubmitMessages:[],imgStatus:ew.idle,status:ew.idle,unreadedMessages:[],resendMessageId:null,isNoNAuthCaptchaStage:!1,imgPreview:{isImgPreviewOpen:!1,type:null}},tW=(0,P.Z0)({name:"message",initialState:tF,reducers:{addMessage:function(e,t){var n;tH(e),tP(e,t.payload),tN(null===(n=tk(e.history))||void 0===n?void 0:n.messages,e.isNoNAuthCaptchaStage)},addMessages:function(e,t){var n;tH(e),tP.apply(void 0,[e].concat((0,h.A)(t.payload))),tN(null===(n=tk(e.history))||void 0===n?void 0:n.messages,e.isNoNAuthCaptchaStage)},updateMessageStatus:function(e,t){var n=tk(e.history),r=null==n?void 0:n.messages.find(function(e){return e.messageId===t.payload.id});r&&(r.messageStatus=t.payload.status),tN(null==n?void 0:n.messages,e.isNoNAuthCaptchaStage)},updateMessage:function(e,t){var n=t.payload,r=n.id,i=n.date,a=(0,u.A)(n,tZ),o=tV(i,e.history.list),s=(0,c.A)(o,1)[0],l=null==s?void 0:s.messages.find(function(e){return e.messageId===r});l&&(Object.assign(l,tx(l,a)),i&&tB(e)),tN(null==s?void 0:s.messages,e.isNoNAuthCaptchaStage)},deleteMessage:function(e,t){var n=tV(t.payload.date,e.history.list),r=(0,c.A)(n,1)[0];r&&(r.messages=r.messages.filter(function(e){return e.messageId!==t.payload.id})),tN(null==r?void 0:r.messages,e.isNoNAuthCaptchaStage)},deleteMessageFromPreview:function(e,t){var n=e.history.list.slice(-1)[0];n&&(n.messages=n.messages.filter(function(e){return e.messageId!==t.payload})),e.imgPreview={isImgPreviewOpen:!1,type:null},tN(null==n?void 0:n.messages,e.isNoNAuthCaptchaStage)},setReplyMessage:function(e,t){if(!t.payload){e.replyMessage=void 0;return}for(var n=0;n<e.history.list.length;n+=1)for(var r=e.history.list[n].messages,i=0;i<r.length;i+=1){var a=r[i];if(a.messageId===t.payload){e.replyMessage=a;return}}e.replyMessage=void 0},checkIfMessageSent:function(e,t){var n=t.payload,r=n.date,i=n.messageId,a=tV(r,e.history.list),o=(0,c.A)(a,2),s=o[0],u=o[1],l=function(){e.resubmitMessages=e.resubmitMessages.filter(function(e){return e.messageId!==i})};if(tG(i,s)){tN(null==s?void 0:s.messages,e.isNoNAuthCaptchaStage),l();return}var d=e.history.list[u-1];if(d&&tG(i,d)){l();return}tG(i,e.history.list[u+1])?l():e.resubmitMessages.push(n)},setResendMessageId:function(e,t){e.resendMessageId=t.payload},startSession:function(e,t){e.history.list.push(t.payload)},updateSession:function(e,t){var n=tk(e.history);if(n&&(null==n?void 0:n.status)!==eS.Finished){var r=t.payload.data,i=e7();n.id=r.sessionId,n.status=eS.Started,n.updatetAt=i}},updateSessionList:function(e,t){e.history={list:e.history.list.concat(t.payload),count:e.history.count+t.payload.length}},clearErrors:function(e){e.errors=[]},removeUnreadedMessage:function(e,t){e.unreadedMessages=e.unreadedMessages.filter(function(e){return e.messageId!==t.payload})},addUnreadedMessage:function(e,t){e.unreadedMessages.push(t.payload)},clearUnreadedMessages:function(e){e.unreadedMessages=[]},setIsNoNAuthCaptchaStage:function(e,t){e.isNoNAuthCaptchaStage=t.payload},setContext:function(e,t){e.context=t.payload},setStoreImgPreview:function(e,t){e.imgPreview=t.payload},setStatus:function(e,t){e.status=t.payload},setWelcomeMessage:function(e,t){e.welcomeMessage=t.payload}},extraReducers:function(e){e.addCase(eX.fulfilled,function(e,t){var n=tY(t.payload),r=tk(n);if((!r||r.status===eS.Finished)&&e.welcomeMessage){r||n.list.push(tf(eS.Finished));var i=tk(n),a=tm(e.welcomeMessage);i.messages.push(a),i.updatetAt=a.date}e.history=n,e.status=ew.fulfilled}).addCase(eX.rejected,function(e){e.status=ew.failed}).addCase(e4.pending,function(e){e.imgStatus=ew.loading}).addCase(e4.fulfilled,function(e){e.imgStatus=ew.fulfilled}).addCase(e4.rejected,function(e){e.imgStatus=ew.failed})}}),tQ=tW.actions,tq=tQ.addMessage,tK=tQ.addMessages,tJ=tQ.updateMessage,tX=tQ.updateMessageStatus,t$=tQ.deleteMessage,t0=tQ.setReplyMessage,t1=tQ.setContext,t4=tQ.setStoreImgPreview,t2=tQ.checkIfMessageSent,t6=(tQ.setResendMessageId,tQ.setWelcomeMessage),t3=(tQ.startSession,tQ.updateSession),t5=(tQ.updateSessionList,tQ.clearErrors,tQ.setStatus),t9=tQ.removeUnreadedMessage,t8=(tQ.deleteMessageFromPreview,tQ.addUnreadedMessage),t7=tQ.clearUnreadedMessages,ne=tQ.setIsNoNAuthCaptchaStage,nt=["messengers","isChatOpen","isMenuOpen","onClick","dispatch","children"],nn=(0,I.G)("start-button",{"start-button":"TxmEY"}),nr=(0,N.E)({icons:[C.HGy,C.maM]}),ni=(0,l.forwardRef)(function(e,t){var n=e.messengers,r=void 0===n?[]:n,i=e.isChatOpen,a=e.isMenuOpen,s=e.onClick,c=e.dispatch,f=(e.children,(0,u.A)(e,nt)),g=function(e){return c(J(e))},m=function(e){return c(q(e))},p=(0,l.useMemo)(function(){if(r.length<=1)return i?"Закрыть чат":"Открыть чат";var e=a?"Закрыть меню":"Открыть меню";return i?"Закрыть чат":e},[a,r,i]);return d().createElement(k.u,{activeIndex:i||a?1:0},d().createElement(z,(0,o.A)({"aria-label":p,className:nn(null),iconLeft:nr,onClick:function(e){i||a?(m(!1),g(!1),c(t4({isImgPreviewOpen:!1,type:null}))):r.length>1?g(!0):(g(!1),m(!0)),null==s||s(e)},onlyIcon:!0,ref:t,size:"m",tabIndex:0,view:"tertiary"},f)))}),na=(0,f.Ng)(function(e){return{isChatOpen:eo(e),isMenuOpen:es(e),messengers:eu(e).messengers}},null,null,{forwardRef:!0})(ni),no=n(80851),ns=n(41763),nc=n(61311),nu=["isOpen","className","children"],nl=(0,I.G)("popover",{popover:"VZ5gJ",popover_animate_entered:"oRhmt",popover_animate_entering:"TzkWd",popover_animate_exiting:"cT14F",popover_animate_exited:"jsTaj"}),nd=(0,l.forwardRef)(function(e,t){var n=e.isOpen,r=e.className,i=e.children,a=(0,u.A)(e,nu),s=(0,l.useRef)(null);return d().createElement(no.Ay,{in:n,nodeRef:s,timeout:300,unmountOnExit:!0},function(e){return d().createElement(ns.A,(0,o.A)({className:function(t){return nl("",{animate:e},["function"==typeof r?r(t):r])},ref:(0,nc.k)([s,t])},a),i)})}),nf=n(50844),ng=n(52559),nm=n(53282),np=n(54361),nv=function(e){return e.IS_CHAT_CHAT_ENABLED="IS_CHAT_CHAT_ENABLED",e.IS_CHAT_TELEGRAM_ENABLED="IS_CHAT_TELEGRAM_ENABLED",e.IS_CHAT_VK_ENABLED="IS_CHAT_VK_ENABLED",e.IS_CHAT_WHATSAPP_ENABLED="IS_CHAT_WHATSAPP_ENABLED",e.IS_CHAT_OK_ENABLED="IS_CHAT_OK_ENABLED",e}({}),nh=function(e){return e.ios="ios",e}({}),ny={beeline:"beeline",telegram:"telegram",whatsapp:"whatsapp",odnoklassniki:"odnoklassniki",vkontakte:"vkontakte"},nb={IS_CHAT_TELEGRAM_ENABLED:ny.telegram,IS_CHAT_WHATSAPP_ENABLED:ny.whatsapp,IS_CHAT_CHAT_ENABLED:ny.beeline,IS_CHAT_OK_ENABLED:ny.odnoklassniki,IS_CHAT_VK_ENABLED:ny.vkontakte},nw=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},nv.IS_CHAT_CHAT_ENABLED,{tagName:"button",label:"в чате поддержки",icon:np.zi,attributes:{title:"Написать в чат","aria-label":"Написать в чат"}}),nv.IS_CHAT_OK_ENABLED,{tagName:"a",icon:np.WY,label:"в Одноклассники",attributes:{title:"Поддержка в Одноклассниках",href:"https://ok.ru/beeline","aria-label":"Поддержка в Одноклассниках"}}),nv.IS_CHAT_VK_ENABLED,{tagName:"a",icon:np._d,label:"во ВКонтакте",attributes:{title:"Поддержка во ВКонтакте",href:"https://vk.me/beeline","aria-label":"Поддержка во ВКонтакте"}}),nv.IS_CHAT_TELEGRAM_ENABLED,{tagName:"a",icon:np.mx,label:"в Telegram",attributes:{title:"Поддержка в Telegram",href:"https://t.me/BeelineRussia_bot","aria-label":"Поддержка в Telegram"}}),nv.IS_CHAT_WHATSAPP_ENABLED,{tagName:"a",icon:np.yC,label:"в WhatsApp",attributes:{title:"Поддержка в WhatsApp","aria-label":"Поддержка в WhatsApp",href:"https://wa.me/79651100611"}}),nM=function(){var e,t=window.location;return{url:"".concat(t.protocol,"//").concat(t.hostname).concat(t.pathname),path:t.pathname,title:(null===(e=document)||void 0===e?void 0:e.title)||""}},nE={WebChatStart:"WebChatStart"},nA={chatIconAction:"chat_icon_action",chatAction:"chat_action",viewItem:"view_item",chatError:"chat_error",click:"click",close:"close",view:"view",error:"error",fill_in:"fill_in"},nO=function(e){return e.az="az",e.nz="nz",e}({}),nI={open:"open",start:"start",hide:"hide"},nN={startTyping:"start_typing",sendMessage:"send_message",tapFaq:"tap_faq",closeChat:"close_chat"},nC={faqViewed:"view_faq"},nk={socketConnectionFailed:"socket_connection_failed",messageNotSent:"message_not_sent"},nD="__is_start_answer_mes",nT=function(){return window.location.href},nS=function(e,t){return function(n){e()&&t(n)}},n_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,R.TV)({name:nD,value:e})};function nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nj(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nL=function(){return"function"==typeof window.ym},nz=nS(nL,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.ym(26001372,"params",e)}),nP=nS(nL,function(e){window.ym(26001372,"reachGoal",e)}),nR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nz({support:e})},nU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nz({chat:e})},nY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nz({chat_attach:e})},nB=function(e,t){return nR((0,s.A)({},nA.chatIconAction,(0,s.A)({},e,t)))},nH=function(){nB(nI.open,nT())},nV=function(){nB(nI.hide,nT())},nG=function(e){nB(nI.start,(0,s.A)({},e,nT()))},nZ=function(){nR({screen_view:{chat:nT()}})},nF=function(e,t){return nR((0,s.A)({},nA.chatAction,(0,s.A)({},e,t)))},nW=function(){nF(nN.startTyping,nT())},nQ=function(){nF(nN.sendMessage,nT())},nq=function(e){nF(nN.tapFaq,(0,s.A)({},e,nT()))},nK=function(){nF(nN.closeChat,nT())},nJ=function(e,t){nR((0,s.A)({},nA.viewItem,(0,s.A)({},e,t)))},nX=function(e){nJ(nC.faqViewed,[].concat((0,h.A)(e.map(function(e){return{faq:e}})),[{URL:nT()}]))},n$=function(e,t){nR((0,s.A)({},nA.chatError,(0,s.A)({},e,t)))},n0=function(){n$(nk.socketConnectionFailed,nT())},n1=function(){n$(nk.messageNotSent,nT())},n4=function(e){return"authorized"===e?nO.az:nO.nz},n2=function(){var e=nM(),t=e.path;return{page_title:e.title,page_path:t,page_url:e.url}},n6=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"icon",icon_name:"chat",object_type:"floating"}))},n3=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,action_type:nA.close,item_type:"popup",popup_name:"chat"}))},n5=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"popup",popup_name:"chat",object_type:"floating"}))},n9=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"field",field_name:"Ваше сообщение",popup_name:"chat",object_type:"popup"}))},n8=(0,nm.s)(3e3,function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.fill_in,item_type:"field",field_name:"Ваше сообщение",popup_name:"chat",object_type:"popup"}))}),n7=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"widget",widget_title:"ответим везде"}))},re=function(e,t){nU(nx(nx({},n2()),{},{account_type:n4(t),action:nA.click,item_type:"element",element_text:"string"==typeof e?nw[e]:e.title,widget_title:"ответим везде"}))},rt=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,action_type:nA.error,error_title:"Что-то пошло не так",error_code:null,popup_name:"chat",object_type:"popup"}))},rn=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"icon",icon_name:"error",popup_name:"chat",object_type:"popup"}))},rr=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,action_type:nA.error,item_type:"icon",icon_name:"error",popup_name:"chat",object_type:"popup"}))},ri=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"icon",icon_name:"send",popup_name:"chat",object_type:"popup"}))},ra=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"list",list_name:"опции",popup_name:"chat",object_type:"popup"}))},ro=function(e,t){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"element",element_title:t,list_name:"опции"}))},rs=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"step",step:"приветственное сообщение",popup_name:"chat",object_type:"popup"}))},rc=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"element",element_name:"captcha",popup_name:"chat",object_type:"popup"}))},ru=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"step",step:"верный ввод капчи",popup_name:"chat",object_type:"popup"}))},rl=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"step",step:"повторный запрос капчи",popup_name:"chat",object_type:"popup"}))},rd=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,action_type:nA.error,item_type:"step",step:"Неверный ввод капчи",popup_name:"chat",object_type:"popup"}))},rf=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,action_type:nA.error,item_type:"step",step:"трижды неверный ввод капчи",popup_name:"chat",object_type:"popup"}))},rg=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"icon",icon_name:"retry",popup_name:"chat",object_type:"popup"}))},rm=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"step",step:"начало диалога с ботом",popup_name:"chat",object_type:"popup"}))},rp=function(e){nU(nx(nx({},n2()),{},{account_type:n4(e),action:nA.view,item_type:"step",step:"ответ на запрос",popup_name:"chat",object_type:"popup"}))},rv=function(e,t){nU(nx(nx({},n2()),{},{account_type:n4(t),action:nA.view,item_type:"message",message_text:e,step:"спасибо за обращение",popup_name:"chat",object_type:"popup"}))},rh=function(e,t){if(e.includes("Спасибо за обращение!")){rv(e,t);return}if("unauthorized"===t){if((0,R.Ri)(nD))return;e.toLowerCase().includes("здравствуйте")?rm(t):rp(t),n_("active")}},ry=function(e){nY(nx(nx({},n2()),{},{account_type:n4(e),action:nA.click,item_type:"icon",icon_name:"attach"}))},rb=function(e,t){nY(nx(nx({},n2()),{},{account_type:n4(t),action:nA.click,item_type:"element",element_type:e}))},rw=function(e,t){nY(nx(nx({},n2()),{},{account_type:n4(t),action:nA.click,item_type:"message",element_type:e}))},rM=function(e,t){nY(nx(nx({},n2()),{},{account_type:n4(t),action:nA.click,item_type:"icon",icon_type:"send",element_type:e}))},rE=function(e,t){nY(nx(nx({},n2()),{},{account_type:n4(t),action:nA.click,item_type:"message",action_type:"retry",element_type:e}))},rA=function(e){nY(nx(nx({},n2()),{},{account_type:nO.az,action:nA.click,item_type:"icon",action_type:"reload",element_type:e}))},rO=function(e,t,n){nU(nx(nx({},n2()),{},{account_type:n4(n),action:nA.click,item_type:"button",button_text:e,block_name:t,popup_name:"chat",object_type:"popup"}))},rI=function(e,t,n){nU(nx(nx({},n2()),{},{account_type:n4(n),action:nA.view,item_type:"block",button:e,block_name:t,popup_name:"chat",object_type:"popup"}))},rN=f.wA,rC=f.d4;function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rk(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rT=function(e){var t=rN(),n=rC(eu).authZoneConfig.zoneType;return(0,l.useMemo)(function(){return(e||[]).map(function(e){var r,i="string"==typeof e?e:e.featureToggle,a=rD(rD({},nw[i]||{}),{},{key:i,onClick:function(){re(e,n),("string"==typeof e?e:e.featureToggle)===nv.IS_CHAT_CHAT_ENABLED&&(t(J(!1)),t(q(!0)))}});return rD(rD({},null!=a?a:{}),"object"===(0,tC.A)(e)?{label:e.title,icon:e.imageUrl?(r=e.imageUrl,(0,ng.Y)({url:r,multiColor:!1,defaultSize:24,ratio:1})):a.icon,attributes:{title:"Поддержка ".concat(e.title),href:e.url||"","aria-label":"Поддержка ".concat(e.title)}}:{})})},[e])};let rS={menu:"eKOKb",menu_view_default:"o0wjG","menu-item":"Bmw3w","menu-item_theme_dark":"YX06z","menu-item_theme_light":"bNX8W","menu-item_view_default":"cDANG","menu-item__avatar":"vGApR","menu-item__icon":"sCkTx"};function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rx=function(e){return e.label},rL=function(e){return e.icon},rz=function(e){return e.onClick},rP=function(e){return e.attributes},rR=function(e){return e.tagName},rU=function(e){return e.isLogo},rY=n(80012),rB=["view","label","icon","isLogo","className","tagName","theme"],rH=(0,I.G)("menu-item",rS),rV=(0,D.B)(function(e,t){var n=e.view,r=void 0===n?"accent":n,i=e.label,a=e.icon,s=e.isLogo,c=e.className,l=e.tagName,f=e.theme,g=void 0===f?"light":f,m=(0,u.A)(e,rB);return d().createElement(void 0===l?"button":l,(0,o.A)({className:rH({view:r,theme:g},[c]),ref:t},m),a&&"accent"===r&&d().createElement(rY.e,(0,o.A)({className:rH("avatar",{logo:s}),size:"l"},s?{logo:a}:{icon:a})),d().createElement(nf.E,{className:rH("label"),color:"light"===g?"primary-invert":"primary",variant:"body-small"},i),a&&"default"===r&&d().createElement(a,{className:rH("icon"),size:"xs"}))}),rG=["className","items","view","getItemAttributes","getItemIcon","getItemLabel","getItemOnClick","getItemIsLogo","getItemTagName","theme","onItemClick"],rZ=(0,I.G)("menu",rS),rF=(0,l.forwardRef)(function(e,t){var n=rj(rj({},e),{},{getItemLabel:e.getItemLabel||rx,getItemAttributes:e.getItemAttributes||rP,getItemIcon:e.getItemIcon||rL,getItemOnClick:e.getItemOnClick||rz,getItemIsLogo:e.getItemIsLogo||rU,getItemTagName:e.getItemTagName||rR}),r=n.className,i=n.items,a=n.view,s=void 0===a?"accent":a,c=n.getItemAttributes,l=n.getItemIcon,f=n.getItemLabel,g=n.getItemOnClick,p=n.getItemIsLogo,v=n.getItemTagName,h=n.theme,y=void 0===h?"light":h,b=(n.onItemClick,(0,u.A)(n,rG));return d().createElement("ul",(0,o.A)({className:rZ({view:s},[r,(0,m.X)(y)]),ref:t},b),i.map(function(e){var t;return d().createElement("li",{className:rZ("item"),key:f(e)},d().createElement(rV,(0,o.A)({},null!==(t=c(e))&&void 0!==t?t:{},{icon:l(e),isLogo:p(e),label:f(e),onClick:g(e),tagName:v(e),theme:y,view:s})))}))}),rW=n(23546),rQ=n(81849),rq=["setIsChatOpen","setIsMenuOpen","isMenuOpen","messengers"],rK=M("btn-back-menu",{"btn-back-menu":"aDDuT"}),rJ=(0,rW.Zz)((0,f.Ng)(function(e){return{isMenuOpen:es(e),messengers:eu(e).messengers}},function(e){return{setIsChatOpen:function(t){return e(q(t))},setIsMenuOpen:function(t){return e(J(t))}}}),rQ.t)(function(e){var t=e.setIsChatOpen,n=e.setIsMenuOpen,r=e.isMenuOpen,i=e.messengers,a=void 0===i?[]:i,s=(0,u.A)(e,rq),c=(0,p.Eo)();return d().createElement(z,(0,o.A)({},s,{className:rK(null),iconLeft:c||(null==a?void 0:a.length)<2?C.maM:C.gu7,onClick:function(){t(!1),n(!r&&a.length>1)},onlyIcon:!0,size:"m",view:"tertiary-invert"}))}),rX=["messengers","title","className"],r$=(0,I.G)("menu-list",{"menu-list":"mwV5j","menu-list__title":"dVJC0"}),r0=(0,l.forwardRef)(function(e,t){var n=e.messengers,r=e.title,i=e.className,a=(0,u.A)(e,rX),s=rT(n),c=(0,p.Eo)();return d().createElement("div",(0,o.A)({className:r$(null,[i]),ref:t},a),d().createElement(nf.E,{align:"left",className:r$("title"),color:"primary-invert",variant:"body-large"},d().createElement(rJ,{shouldRender:c}),void 0===r?"":r),d().createElement(rF,{items:s}))}),r1=function(e){var t=tk(e),n=(null==t?void 0:t.messages)||[];if(!(null!=n&&n.length))return[];var r=n.slice(-1)[0];return r.author.type===eD.Client?[]:"object"===(0,tC.A)(r.message.content)&&r.message.content.quickReplies||[]},r4=(0,P.Z0)({name:"content",initialState:{FeatureTogglesWeb:null,FrequentQuestions:null,TextMainScreen:null,SystemProblemInternet:null,ShowAttachments:!1,filterNotificationChat:null,quickReplies:[],imageUrlGroup:null,dynamicFormHeight:"auto"},reducers:{addQuickReplies:function(e,t){var n=t.payload||[];e.quickReplies=n},addStoreImageUrlGroup:function(e,t){var n=t.payload;e.imageUrlGroup=n},addStoreDynamicFormHeight:function(e,t){var n=t.payload;e.dynamicFormHeight=n}},extraReducers:function(e){e.addCase(e$.fulfilled,function(e,t){var n=t.payload.data,r=n.FeatureTogglesWeb,i=n.FrequentQuestions,a=n.filterNotificationChat,o=n.SystemProblemInternet,s=n.TextMainScreen,c=n.ShowAttachments;e.FeatureTogglesWeb=r,e.FrequentQuestions=i,e.filterNotificationChat=a,e.SystemProblemInternet=o,e.TextMainScreen=s,e.ShowAttachments=c}).addCase(eX.fulfilled,function(e,t){var n=t.payload;e.quickReplies=r1(n)})}}),r2=r4.actions,r6=r2.addQuickReplies,r3=r2.addStoreImageUrlGroup,r5=r2.addStoreDynamicFormHeight,r9=n(7350),r8=n.n(r9),r7=function(e,t){var n=(0,l.useRef)();(0,l.useEffect)(function(){e?(nZ(),n5(t),n.current=!0):n.current&&(nK(),n3(t))},[e])},ie=function(e){var t=e.isChatOpen,n=e.isMenuOpen,r=e.messengers,i=void 0===r?[]:r,a=e.zoneType,o=(0,l.useRef)();(0,l.useEffect)(function(){i.length>1&&(n?(n7(a),nH(),n6(a),o.current=!0):o.current&&nV())},[i,n]),(0,l.useEffect)(function(){(null==i?void 0:i.length)===1&&t&&(nH(),n6(a),nG(nb["string"==typeof i[0]?i[0]:i[0].featureToggle]))},[i,t])},it=function(){var e=(0,l.useState)([]),t=(0,c.A)(e,2),n=t[0],r=t[1],i=(0,l.useCallback)(function(e,t){r(function(n){return t?[].concat((0,h.A)(n),[e]):n.filter(function(t){return t!==e})})},[]),a=r8()(function(e){nX(e)},1e3),o=(0,l.useCallback)(a,[]);return(0,l.useEffect)(function(){n.length&&o(n)},[n]),i},ir=function(e){ie(e),r7(e.isChatOpen,e.zoneType)},ii=function(e){var t=window.location,n=t.search,r=t.pathname,i=new URLSearchParams(window.location.search.slice(1,n.length));i.delete(e),window.history.pushState({},document.title,i.size?"".concat(r,"?").concat(i.toString()):r)},ia=function(e){return e.idle="idle",e.open="open",e.closed="closed",e.connecting="connecting",e}({}),io=function(e){return e.messageSent="Message sent successfully.",e.fileMessageSent="File is healthy",e.sessionInitialized="Session successfully initialized.",e}({}),is=function(e){return e.socket},ic=function(e){return is(e).reconnectCount},iu=function(e){return is(e).socketStatus===ia.open},il=function(e){return e.IDLE="idle",e.LOAD_DATA="load_data",e.CONNECTING="connecting",e.ACTIVE="active",e.RECONNECT="reconnect",e.CAPTCHA_NEEDED="captcha_needed",e.BLOCKED="blocked",e.ERROR="error",e}({}),id=n(61680),ig=n(66436),im=function(e,t,n){var r=null!=n?n:{},i=r.active,a=void 0===i||i,o=r.target,s=void 0===o?window:o,c=(0,id.V)(t);(0,l.useEffect)(function(){var t=function(e){return c.current(e)},n=s&&"current"in s?s.current:s;return n&&a&&(null==n||n.addEventListener(e,t)),function(){null==n||n.removeEventListener(e,t)}},[e,a,s])},ip=function(){var e,t="boolean"==typeof(null===(e=navigator)||void 0===e?void 0:e.onLine),n=(0,ig._)(!t||navigator.onLine),r=(0,c.A)(n,2),i=r[0],a=r[1],o=function(){t&&a.set(navigator.onLine)};return im("online",o,{active:t}),im("offline",o,{active:t}),i},iv=function(e){var t=e.stage,n=e.newStage,r=e.authZone,i=e.isOpen,a=e.blockTime;return(n===il.BLOCKED||n===il.CAPTCHA_NEEDED)&&"authorized"===r||t===il.BLOCKED&&a&&new Date().getTime()<Number(a)&&"unauthorized"===r||!i&&n!==il.IDLE},ih=function(e){var t=e.onActivate,n=e.onReached,r=e.zoneType,i=(0,l.useRef)(),a=function(){null==n||n(),(0,R.Yj)(tb)},o=function(e){var n=e.timeout,r=e.withSetCookie;n&&(null==t||t(),(void 0===r||r)&&(0,R.TV)({name:tb,value:(new Date().getTime()+n).toString(),maxAge:n}),clearTimeout(i.current),i.current=setTimeout(a,n))};return(0,l.useEffect)(function(){var e=Number((0,R.Ri)(tb)),t=new Date().getTime();if(e&&"unauthorized"===r&&t<e){o({timeout:e-t});return}e<=t&&a()},[r]),(0,l.useEffect)(function(){return function(){return clearTimeout(i.current)}},[]),o},iy=function(e){var t=e.blockedTimeout,n=void 0===t?12e5:t,r=e.isOpen,i=e.zoneType,a=e.baseUrl,o=(0,l.useState)(il.IDLE),s=(0,c.A)(o,2),u=s[0],d=s[1],f=(0,id.V)(u),g=(0,l.useRef)({}),m=(0,id.V)(r),p=ip(),v=ih({onReached:function(){d(il.CAPTCHA_NEEDED),Object.keys(g.current).forEach(function(e){g.current[e]()})},onActivate:function(){d(il.BLOCKED),f.current=il.BLOCKED},zoneType:i}),h=(0,l.useCallback)(function(e){var t=(0,R.Ri)(tb);return iv({stage:f.current,newStage:e,authZone:i,blockTime:t,isOpen:m.current})?{status:"error"}:(e===il.CAPTCHA_NEEDED&&n_(),e===il.BLOCKED&&v({timeout:n}),d(e),{status:"ok"})},[u,n]),y=(0,l.useMemo)(function(){return{blockedTimeout:n}},[n]);return(0,l.useEffect)(function(){if(!p){d(il.ERROR);return}if(!r){h(il.IDLE);return}if(!a){h(il.ERROR);return}if("authorized"===i||(0,R.Ri)(tp)){h(il.LOAD_DATA);return}h(il.CAPTCHA_NEEDED)},[i,r]),{stage:u,changeStage:h,options:y,addReachedHandler:function(e,t){g.current[e]=t}}},ib=["children"],iw=(0,l.createContext)({stage:il.IDLE,changeStage:function(){return{status:"ok"}},options:{blockedTimeout:12e5},addReachedHandler:function(){}}),iM=function(e){var t=e.children,n=iy((0,u.A)(e,ib));return d().createElement(iw.Provider,{value:n},t)},iE=function(){return(0,l.useContext)(iw)};function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var iO="CHAT_WIDGET_EVENT_CHAT",iI="CHAT_WIDGET_EVENT_MENU",iN="CHAT_SEND_MESSAGE_EVENT",iC=function(e){return function(t,n){var r=new CustomEvent("menu"===e?iI:iO,{detail:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({flag:t},n||{})});window.dispatchEvent(r)}};iC("chat"),iC("menu");var ik=function(){var e=(0,l.useState)(),t=(0,c.A)(e,2),n=t[0],r=t[1],i=rC(eu).authZoneConfig.zoneType,a=(0,l.useRef)(!1),o=iE().stage,s=rC(iu),u=rC(eo);return(0,l.useEffect)(function(){n&&u&&("unauthorized"===i?o===il.CAPTCHA_NEEDED:s)&&!a.current&&(window.dispatchEvent(new CustomEvent(iN,{detail:n})),a.current=!0,nQ())},[s,u,n,o]),r};function iD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iD(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iS="is_chat_open",i_="initial_message",ij=function(e){var t={isChatOpen:!0,initialMessage:!0};return"boolean"==typeof e?e?t:{}:iT(iT({},t),e)},ix=function(e,t){return("boolean"==typeof e?e:ij(e)[t])===!0},iL=function(){var e={};return new URLSearchParams(window.location.search).forEach(function(t,n){e[n]=t}),e},iz=function(e){var t=(0,l.useState)({}),n=(0,c.A)(t,2),r=n[0],i=n[1],a=(0,l.useCallback)(function(){i(iL())},[]);return(0,l.useEffect)(function(){if(e&&window){a(),window.addEventListener("popstate",a);var t=window.history.pushState;window.history.pushState=function(){a();for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.call.apply(t,[window.history].concat(n))}}return function(){var e;null===(e=window)||void 0===e||e.removeEventListener("popstate",a)}},[e]),(0,l.useMemo)(function(){return{queries:r}},[r])},iP=function(e){var t=ix(e,"isChatOpen"),n=ij(e),r=rN(),i=iz(t).queries;(0,l.useEffect)(function(){i[iS]&&n.isChatOpen&&t&&r(q("true"===i[iS]))},[t,JSON.stringify(i),JSON.stringify(n)])},iR=function(e){var t=ix(e,"initialMessage"),n=ij(e),r=iz(t).queries,i=ik();(0,l.useEffect)(function(){r[i_]&&n.initialMessage&&t&&(i(r[i_]),ii(i_))},[t,JSON.stringify(r),JSON.stringify(n)])},iU=n(67561),iY=n(1677),iB=function(e){var t=e.loadingStatus,n=e.isHistoryEmpty,r=e.zoneType,i=(0,l.useRef)(null),a=(0,l.useRef)(null),o=(0,iY.K)(i).height,s=(0,iY.K)(a).height,u=iE().stage,d=ip(),f=(0,ig._)(),g=(0,c.A)(f,2),m=g[0],p=g[1],v=(0,ig._)(),h=(0,c.A)(v,2),y=h[0],b=h[1],w=(0,l.useRef)(!1),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth",n=function(){var e,n;return null===(e=a.current)||void 0===e?void 0:e.scrollTo({top:(null===(n=a.current)||void 0===n?void 0:n.scrollHeight)||0,behavior:t})};"number"==typeof e?setTimeout(n,e):n()};return im("scroll",(0,l.useCallback)(function(e){if(w.current){var t=e.currentTarget;setTimeout(function(){t.scrollTop<t.scrollHeight-1.5*t.offsetHeight?b.on():b.off()},500)}},[]),{target:a,active:m}),(0,l.useLayoutEffect)(function(){var e=t===ew.fulfilled||t===ew.failed;("authorized"===r&&e||"unauthorized"===r&&(u!==il.ACTIVE||e)||!d)&&M(0,"auto")},[t,u]),(0,l.useEffect)(function(){w.current=t!==ew.loading&&!n},[t,n]),(0,l.useEffect)(function(){d&&p.off()},[]),{isScrollButtonVisible:y,scrollToBottom:M,onListMount:p.on,containerRef:i,scrollRef:a,scrollHeight:s,containerHeight:o}},iH=["children"],iV=(0,l.createContext)({scrollToBottom:function(){},containerRef:{current:null},isScrollButtonVisible:!1,scrollRef:{current:null},containerHeight:0,scrollHeight:0,onListMount:function(){}}),iG=function(e){var t=e.children,n=iB((0,u.A)(e,iH));return d().createElement(iV.Provider,{value:n},t)},iZ=function(){return(0,l.useContext)(iV)},iF=n(340),iW=function(e,t){var n;return!!(null!==(n=tD(e))&&void 0!==n&&n.toLowerCase().includes(t))},iQ=function(e){var t=e.sessions,n=e.search,r=e.sortType;return(0,l.useMemo)(function(){var e=[],r=[];return t.forEach(function(t){e.push.apply(e,(0,h.A)(t.messages.filter(function(e){return!!e.messageId}).map(function(e){return e.messageId.toString()}))),n&&r.push.apply(r,(0,h.A)(t.messages.filter(function(e){return iW(e,n)})))}),{sessions:t,includedIds:r.sort(function(e,t){return e.date>t.date?1:-1}).map(function(e){return e.messageId.toString()}).reverse(),ids:e}},[void 0===r?"none":r,n,t])},iq=["children"],iK=(0,l.createContext)({sessions:[],includedIds:[],refs:{}}),iJ=function(e){var t=e.children,n=iQ((0,u.A)(e,iq)),r=n.sessions,i=n.ids,a=n.includedIds,o=(0,iF.l)(i),s=(0,l.useMemo)(function(){return{refs:o,includedIds:a,sessions:r}},[r,i,a]);return d().createElement(iK.Provider,{value:s},t)},iX=function(){return(0,l.useContext)(iK)},i$=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],i0=function(e){if(!e)return null;var t,n,r=null!==(t=null===(n=window)||void 0===n?void 0:n.getComputedStyle(e))&&void 0!==t?t:{},i=i$.reduce(function(e,t){return e[t]=r[t],e},{});if(""===i.boxSizing)return null;var a={vertical:parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),horizontal:parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)},o={vertical:parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth),horizontal:parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth)};return{sizingStyle:i,paddingSize:a,borderSize:o}},i1={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},i4=function(e){Object.keys(i1).forEach(function(t){e.style.setProperty(t,i1[t],"important")})},i2=function(e,t){if(t)return t;var n,r=e.current,i=document.createElement("textarea");return i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),null==r||null===(n=r.parentNode)||void 0===n||n.appendChild(i),i4(i),i},i6=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=t.paddingSize,o=t.sizingStyle;Object.keys(o).forEach(function(t){e.style[t]=o[t]}),i4(e),e.value=n;var s=e.scrollHeight;e.value="x";var c=t.sizingStyle.lineHeight?parseFloat(t.sizingStyle.lineHeight):e.scrollHeight-a.vertical,u=c*r+("border-box"===o.boxSizing?a.vertical:0),l=c*i+("border-box"===o.boxSizing?a.vertical:0);return{height:Math.min(l,Math.max(u,s)),isOverflow:s>l}},i3=function(e){var t,n="onfocusin"in e?"focusin":"focus",r="onfocusin"in e;"createEvent"in document?(t=document.createEvent("Event")).initEvent(n,r,!0):"Event"in window&&(t=new Event(n,{bubbles:r,cancelable:!0})),e.focus(),t&&e.dispatchEvent(t)},i5=function(e){var t=e.minRows,n=e.maxRows,r=e.onChange,i=e.value,a=e.autoFocus,o=(0,l.useRef)(0),s=(0,l.useRef)(null),c=(0,iY.K)(s).width,u=(0,l.useRef)(null),d=function(){var e,r,i,a,c,l=i0(s.current);if(l){var d=i2(s,u.current);u.current||(u.current=d);var f=i6(d,l,(null===(e=s.current)||void 0===e?void 0:e.value)||(null===(r=s.current)||void 0===r?void 0:r.placeholder)||"x",t,n),g=f.height;f.isOverflow?null===(i=s.current)||void 0===i||i.style.removeProperty("overflow"):null===(a=s.current)||void 0===a||a.style.setProperty("overflow","hidden","important"),o.current!==g&&(o.current=g,null===(c=s.current)||void 0===c||c.style.setProperty("height","".concat(g,"px"),"important"))}};return(0,l.useEffect)(d,[s,n,t,i,c]),im("resize",d),im("loadingdone",d,{target:document.fonts}),(0,l.useEffect)(function(){a&&setTimeout(function(){s.current&&i3(s.current)},200)},[a]),{textAreaRef:s,onChange:function(e){void 0===i&&d(),null==r||r(e.target.value,e)}}},i9=["className","maxRows","minRows","onChange","status","value","rightSide","placeholder"],i8=M("text-area",{"text-area":"JVZgK","text-area_withSide":"K0RH1","text-area__field":"eoPbw","text-area__field_withSide":"aCBRz","text-area__side":"kAkGs"}),i7=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.maxRows,i=e.minRows,a=e.onChange,s=e.status,c=e.value,l=e.rightSide,f=e.placeholder,g=(0,u.A)(e,i9),m=i5({minRows:void 0===i?1:i,maxRows:r,onChange:a,value:c,autoFocus:null==g?void 0:g.autoFocus}),p=m.onChange,v=m.textAreaRef;return d().createElement("div",{className:i8({withSide:!!l},[n])},d().createElement("textarea",(0,o.A)({className:i8("field",{status:s,withSide:!!l}),onChange:p,placeholder:f,ref:(0,nc.k)([t,v]),value:c},g)),!!l&&d().createElement("div",{className:i8("side")},l))}),ae=n(24537),at=function(e){return e.upload="upload",e.show="show",e}({}),an=function(e){return e.message},ar=function(e){return an(e).history},ai=function(e){return ar(e).list},aa=function(e){return tk(an(e).history)},ao=function(e){return tz(aa(e))},as=function(e){return an(e).resubmitMessages},ac=function(e){var t,n=ao(e),r=!(null!==(t=ai(e))&&void 0!==t&&t.length);return n||r},au=function(e){return an(e).status},al=function(e){return au(e)===ew.loading},ad=function(e){return an(e).replyMessage},af=function(e){return an(e).unreadedMessages},ag=function(e){return an(e).imgPreview},am=function(e){return ag(e).isImgPreviewOpen},ap=function(e){return ag(e).type},av=function(e){return ap(e)===at.show},ah=function(e){return ap(e)===at.upload},ay=(0,ae.Mz)([am,ah],function(e,t){return e&&t}),ab=function(e){return an(e).context},aw=function(e){return e.filters},aM=function(e){return aw(e).sortType},aE=function(e){return aw(e).search},aA=function(e){return aw(e).isFiltersVisible},aO=function(e){return e.imgPreview="подпись",e.textMessage="напишите, чем вам помочь",e}({}),aI=function(e){return"string"==typeof e?e:"number"==typeof e?e.toString():"boolean"==typeof e?e?"true":"false":void 0===e?"undefined":null===e?"null":JSON.stringify(e)},aN=function(e){var t;if("true"===e)t=!0;else if("false"===e)t=!1;else{if("null"===e)return null;t="undefined"===e?void 0:/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(e.replace(/"(\\.|[^"\\])*"/g,""))?/^-?\d+\.?\d*$/.test(e)?Number(e):e:JSON.parse(e)}return t},aC=function(e,t){var n=t||{},r=n.defaultValue,i=n.stateToStore,a=n.storeToState,o=(0,l.useState)(r),s=(0,c.A)(o,2),u=s[0],d=s[1];return(0,l.useEffect)(function(){var t=sessionStorage.getItem(e),n=t?(a||aN)(t):r;d(null!=n?n:void 0)},[]),(0,l.useEffect)(function(){sessionStorage.setItem(e,(i||aI)(u))},[u]),[u,d]},ak=function(){var e=(0,eM.A)(eA().mark(function e(t){var n,r,i;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,createImageBitmap(t);case 2:return r=(n=e.sent).width,i=n.height,n.close(),e.abrupt("return",{width:r,height:i,ratio:r/i});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),aD=["children"],aT=(0,l.createContext)({resendMessage:function(){},sendMessage:function(){},sendImgMessage:function(){},sendFileMessage:function(){},resendImageMessage:function(){}}),aS=function(e){var t=e.children,n=(0,u.A)(e,aD);return d().createElement(aT.Provider,{value:n},t)},a_=function(){return(0,l.useContext)(aT)},aj=function(e){return e.bee="bee",e.drake="drake",e.fluffy="fluffy",e.panda="panda",e}({});aj.bee;var ax={image:"image/*",file:".doc,.docx"},aL=function(e){return e.IMAGE="фото",e.FIlE="файл",e}({});function az(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var aP=function(e,t){switch(t.type){case"add":var n,r,i=e.find(function(e){return e.key===t.item.key});if(i)return null===(n=i.resetTimer)||void 0===n||n.call(i),null===(r=i.startTimer)||void 0===r||r.call(i),e;return[].concat((0,h.A)(e),[function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?az(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):az(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({autoClose:3e3},t.item)]);case"remove":return e.filter(function(e){return e.key!==t.key});case"update":var a=e.findIndex(function(e){return e.key===t.item.key});return a>=0&&(e[a]=Object.assign(e[a],t.item)),e;case"clear":return[];default:return e}},aR=(0,l.createContext)({notifications:[],addNotification:function(){},clearNotifications:function(){},getNotificationQueue:function(){return[]},removeNotification:function(){},updateNotification:function(){}}),aU=function(){return(0,l.useContext)(aR)},aY=function(e){var t=e.children,n=e.initialNotifications,r=(0,l.useReducer)(aP,void 0===n?[]:n),i=(0,c.A)(r,2),a=i[0],o=i[1],s=function(){return o({type:"clear"})},u=function(e){return o({type:"add",item:e})},f=function(){return a},g=function(e){return o({type:"remove",key:e})},m=function(e){return o({type:"update",item:e})},p=(0,l.useMemo)(function(){return{notifications:a,clearNotifications:s,removeNotification:g,updateNotification:m,getNotificationQueue:f,addNotification:u}},[a]);return d().createElement(aR.Provider,{value:p},t)},aB="system_problem_internet",aH="chars_limit",aV=function(e){return e.content},aG=function(e){var t;return null===(t=aV(e))||void 0===t?void 0:t.SystemProblemInternet},aZ=function(e){var t;return null===(t=aV(e))||void 0===t||null===(t=t.TextMainScreen)||void 0===t?void 0:t.content},aF=function(e){var t;return(null===(t=aV(e))||void 0===t||null===(t=t.FrequentQuestions)||void 0===t?void 0:t.content)||[]},aW=function(e){var t;return!!(null!==(t=aF(e))&&void 0!==t&&t.length)},aQ=function(e){return aV(e).imageUrlGroup},aq=n(23807),aK=n.n(aq),aJ=function(e,t){return new Promise(function(n,r){new(aK())(e,{quality:t,success:n,error:r})}).then(function(e){return e}).catch(function(e){throw Error(e.message)})},aX={"300Kb":3e5,"3Mb":3e6,"4Mb":4e6,"5Mb":5e6,"8Mb":8e6,"9Mb":9e6},a$=function(e){if(e){if(e<=aX["4Mb"])return{preview:.4,original:.8};if(e<=aX["8Mb"])return{preview:.2,original:.8};if(e<=aX["9Mb"])return{preview:.2,original:.6}}return null},a0=function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r,i,a,o;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(r=a$(null==t?void 0:t.size))||!t)){e.next=3;break}return e.abrupt("return",null);case 3:if(null==n||n(),!(t.size<=aX["300Kb"])){e.next=6;break}return e.abrupt("return",{image:t,imagePreview:t});case 6:if(!(t.size<=aX["3Mb"])){e.next=11;break}return e.next=9,aJ(t,.8);case 9:return i=e.sent,e.abrupt("return",{image:t,imagePreview:i});case 11:return e.next=13,aJ(t,r.preview);case 13:return a=e.sent,e.next=16,aJ(t,r.original);case 16:return o=e.sent,e.abrupt("return",{image:o,imagePreview:a});case 18:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),a1=function(e,t){if(!e.current)return null;var n=".".concat(e.current.value.split(".").pop()).toLowerCase();return t.includes(n)},a4=function(){var e,t,n=/iP(ad|od|hone)/i.test(null===(e=window)||void 0===e||null===(e=e.navigator)||void 0===e?void 0:e.userAgent),r=!!(null!==(t=window)&&void 0!==t&&null!==(t=t.navigator)&&void 0!==t&&null!==(t=t.userAgent)&&void 0!==t&&t.match(/Version\/[\d.]+.*Safari/));return n&&r},a2=function(){var e=(0,l.useRef)([]),t=a4(),n=(0,l.useRef)(null),r=function(t){var n;null===(n=e.current)||void 0===n||n.forEach(function(e){e.disabled=t})},i=function(){if(t){e.current=[];for(var i=document.querySelectorAll("input,select,textarea"),a=0;a<i.length;a+=1){var o=i.item(a);o.isEqualNode(n.current)||e.current.push(o)}r(!0)}};return(0,l.useEffect)(function(){return i(),function(){return r(!1)}},[t]),{inputRef:n,onFocus:function(){i()},onBlur:function(){r(!1)}}},a6=function(){var e,t,n,r,i=rN(),a=aC("chatCurrentMessage",{storeToState:function(e){return e},stateToStore:function(e){return e||""}}),o=(0,c.A)(a,2),s=o[0],u=o[1],d=(0,l.useState)(),f=(0,c.A)(d,2),g=f[0],m=f[1],p=rC(al),v=rC(ad),h=rC(eu),y=h.charsLimit,b=h.authZoneConfig.zoneType,w=rC(ay),M=rC(aQ),E=a_(),A=E.sendMessage,O=E.sendImgMessage,I=iZ().scrollToBottom,N=iE().stage===il.BLOCKED,C=!w&&(!(s&&(null==s||null===(r=s.trim)||void 0===r?void 0:r.call(s))!=="")||p||N),k=aU(),D=k.addNotification,T=k.removeNotification,S=k.getNotificationQueue,_=a2(),j=_.inputRef,x=_.onFocus,L=_.onBlur,z=(0,l.useRef)(null),P=(e=(0,eM.A)(eA().mark(function e(){var t,n,r,a,o,s,c,u;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=null===(t=z.current)||void 0===t?void 0:t.files)){e.next=17;break}return r=n[0],a=function(){return i(t4({isImgPreviewOpen:!0,type:at.upload}))},e.next=6,a0(r,a);case 6:if(o=e.sent){e.next=10;break}return D({key:"bigSize",label:"большой размер фото",subTitle:"попробуйте загрузить другое",view:"error"}),e.abrupt("return");case 10:return s=URL.createObjectURL(o.image),c=URL.createObjectURL(o.imagePreview),e.next=14,ak(r);case 14:u=e.sent,i(r3({fileUrl:s,filePreviewUrl:c,imageSettings:u})),m({image:o.image,imagePreview:o.imagePreview,imageSettings:u});case 17:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),R=(t=(0,eM.A)(eA().mark(function e(t){var n,r,a,o,c;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(n=j.current)||void 0===n||n.focus(),!(g&&M)){e.next=18;break}return r=new FormData,a=new FormData,r.append("file",g.image),a.append("file",g.imagePreview),o=tl("",{status:ej.sent,messageType:ex.Img},{imageUrlGroup:M}),i(r6([])),i(tq(o)),s&&i(tq(c=tl(s,{status:ej.sent,messageType:ex.Text}))),i(t4({isImgPreviewOpen:!1,type:at.upload})),i(r3(null)),m(null),u(""),I(0),e.next=18,Promise.all([i(e4(r)),i(e4(a))]).then(function(e){var t;O({imageId:e[0].payload.id,imagePreviewId:e[1].payload.id,imageSettings:g.imageSettings},o.messageId,s,null===(t=c)||void 0===t?void 0:t.messageId),rM(aL.IMAGE,b)}).catch(function(){i(tX({id:o.messageId,status:ej.failed})),s&&i(tX({id:c.messageId,status:ej.failed}))});case 18:s&&!M&&(A(s,null==v?void 0:v.messageId,function(){return u("")}),nQ());case 19:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),U=function(e){u(e.slice(0,y)),n8(b);var t=function(){e.length<=y?T(aH):D({key:aH,label:"Ваш текст не может превышать ".concat(y," символов")})};S().find(function(e){return e.key===aB})?setTimeout(function(){T(aB),t()},3e3):t()},Y=(n=(0,eM.A)(eA().mark(function e(t){return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("Enter"===t.key&&!t.shiftKey&&!C)){e.next=3;break}return e.next=3,R(t);case 3:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),B=function(){nW(),n9(b),x()},H=function(){L()};return(0,l.useEffect)(function(){N&&u("")},[N]),{params:(0,l.useMemo)(function(){return{attachmentProps:{imageRef:z,onImageChange:P,disabled:N},inputProps:{maxRows:5,minRows:1,onBlur:H,onFocus:B,onChange:U,onKeyPress:Y,ref:j,value:s,disabled:N},buttonProps:{disabled:C,onClick:R,type:"submit"}}},[s,p,v,C,N,M,g]),isSubmitDisabled:C,inputRef:j}},a3=n(70406);function a5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a9=function(e){var t=(0,a3.Eo)(),n=t?36:28,r=(0,l.useState)(t?80:72),i=(0,c.A)(r,2),a=i[0],o=i[1],s=(0,iY.K)(e).height,u=aC("chatCurrentMessage",{storeToState:function(e){return e},stateToStore:function(e){return e||""}}),d=(0,c.A)(u,1)[0],f=rC(aA);return(0,l.useEffect)(function(){if(e.current){var t=new ResizeObserver(function(e){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a5(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a5(e,void 0):void 0}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value.contentRect.height+24+n;o(i)}}catch(e){r.e(e)}finally{r.f()}});return t.observe(e.current),function(){t.disconnect()}}},[]),(0,l.useEffect)(function(){f&&!d&&o(0)},[s,f]),a};function a8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a8(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oe=function(e){return e.label},ot=function(e){return e.icon},on=function(e){return e.onClick},or=function(e){return e.tagName},oi=function(e){return e.attributes},oa=function(e){var t,n,r,i,a;return a7(a7({},e),{},{getItemLabel:null!==(t=e.getItemLabel)&&void 0!==t?t:oe,getItemIcon:null!==(n=e.getItemIcon)&&void 0!==n?n:ot,getItemOnClick:null!==(r=e.getItemOnClick)&&void 0!==r?r:on,getItemTagName:null!==(i=e.getItemTagName)&&void 0!==i?i:or,getItemAttributes:null!==(a=e.getItemAttributes)&&void 0!==a?a:oi})},oo=["tagName","className","label","active","icon","proportional"],os=M("context-menu-item",{"context-menu-item":"GRnCd","context-menu-item_active":"IvYPe","context-menu-item__text":"GfAp2","context-menu-item_proportional":"yUCTz"}),oc=(0,D.B)(function(e,t){var n=e.tagName,r=e.className,i=e.label,a=e.active,s=e.icon,c=e.proportional,l=(0,u.A)(e,oo);return d().createElement(void 0===n?"button":n,(0,o.A)({className:os({active:a,proportional:c},[r]),ref:t},l),s&&d().createElement(rY.e,{icon:s}),d().createElement(nf.E,{align:"left",className:os("text"),variant:"body-small"},i))}),ou=["ArrowDown","ArrowUp","Space","Enter","Escape"],ol=function(e){var t=e.items,n=e.onEsc,r=e.isOpen,i=e.anchorRef,a=(0,l.useState)(-1),o=(0,c.A)(a,2),s=o[0],u=o[1],d=(0,l.useRef)(null),f=(0,iF.l)(t.length);return(0,l.useEffect)(function(){u(-1),setTimeout(function(){var e;return null===(e=d.current)||void 0===e?void 0:e.focus()},600)},[r]),{refs:f,activeIndex:s,onKeyDown:function(e){var r,a,o=e.code;ou.includes(o)&&(e.preventDefault(),e.stopPropagation(),"ArrowUp"===o&&u(Math.max(s-1,0)),"ArrowDown"===o&&u(Math.min(s+1,t.length-1)),("Enter"===o||"Space"===o)&&s>=0&&(null===(r=f[s].current)||void 0===r||r.click()),"Escape"===o&&(null==n||n(e),null==i||null===(a=i.current)||void 0===a||a.focus()))},containerRef:d}},od=["items","getItemTagName","getItemAttributes","getItemIcon","getItemLabel","getItemOnClick","onEsc","onItemClick","anchorRef","isOpen","className","isProportional"];function of(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var og=M("context-menu",{"context-menu":"ePQPv","focus-visible":"YHJbB"}),om=(0,l.forwardRef)(function(e,t){var n=oa(e),r=n.items,i=void 0===r?[]:r,a=n.getItemTagName,c=n.getItemAttributes,l=n.getItemIcon,f=n.getItemLabel,g=n.getItemOnClick,m=n.onEsc,p=n.onItemClick,v=n.anchorRef,h=n.isOpen,y=n.className,b=n.isProportional,w=(0,u.A)(n,od),M=ol({items:i,anchorRef:v,onEsc:m,isOpen:h}),E=M.refs,A=M.containerRef,O=M.activeIndex,I=M.onKeyDown,N=function(e,t){var n,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?of(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):of(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({tagName:a(e),label:f(e),onClick:function(t){var n;null===(n=g(e))||void 0===n||n(t),null==p||p(t,e)},active:O===t,ref:E[t],icon:l(e),proportional:b},null!==(n=c(e))&&void 0!==n?n:{});return d().createElement(oc,r)};return d().createElement(nd,(0,o.A)({anchorRef:v,className:function(e){return og(null,["function"==typeof y?y(e):y])},isOpen:h,onKeyDown:I,ref:(0,nc.k)([t,A]),tabIndex:0,theme:"dark"},w),i.map(function(e,t){return d().createElement(d().Fragment,{key:f(e)},N(e,t))}))}),op=function(){var e;return(null===(e=document)||void 0===e?void 0:e.querySelector('[data-portal-type="widgetChat"]'))||void 0},ov=function(){var e,t=rN(),n=aU().addNotification,r=(0,l.useRef)(null),i=a_().sendFileMessage,a=iZ().scrollToBottom,o=(e=(0,eM.A)(eA().mark(function e(){var o,s,c,u,l,d,f;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=null===(o=r.current)||void 0===o?void 0:o.files)){e.next=23;break}if(!((c=s[0]).size>aX["5Mb"])){e.next=6;break}return n({key:"bigSize",label:"большой размер файла",subTitle:"попробуйте загрузить другой",view:"error"}),e.abrupt("return");case 6:return u=URL.createObjectURL(c),(l=new FormData).append("file",c),d=tl("",{status:ej.sent,messageType:ex.FileDoc},{fileInfo:{fileUrl:u,name:c.name,size:c.size}}),t(r6([])),t(tq(d)),a(0),e.prev=13,e.next=16,t(e4(l));case 16:(f=e.sent).payload.id&&i(f.payload.id,d),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),t(tX({id:d.messageId,status:ej.failed}));case 23:case"end":return e.stop()}},e,null,[[13,20]])})),function(){return e.apply(this,arguments)});return{fileRef:r,handleFileLoad:o}},oh=function(e){var t=e.imageRef,n=e.fileRef,r=e.acceptImage,i=e.acceptFile,a=e.onImageChange,o=e.handleFileLoad,s=(0,ig._)(),u=(0,c.A)(s,2),d=u[0],f=u[1],g=aU().addNotification,m=rC(eu).authZoneConfig.zoneType,p=function(e,t){t&&(rb(e,m),t.value="",null==t||t.click())};return{items:(0,l.useMemo)(function(){return[{label:aL.IMAGE,icon:C.AKV,onClick:function(){return p(aL.IMAGE,t.current)}},{label:aL.FIlE,icon:C.Vdr,onClick:function(){return p(aL.FIlE,n.current)}}]},[]),isOpen:d,handleImageChange:(0,l.useCallback)(function(){var e=a1(t,r);f.off(),e?a():g({key:"wrongFormat",label:"Тип файла не подходит",subTitle:"попробуйте загрузить другой",view:"error"})},[]),handleFileChange:(0,l.useCallback)(function(){var e=a1(n,i);if(f.off(),e)o(),rM(aL.FIlE,m);else{if(!n.current)return;n.current.value="",g({key:"wrongFormat",label:"Тип файла не подходит",subTitle:"попробуйте загрузить другой",view:"error"})}},[]),handleAttachClick:function(){d||ry(m),f.toggle()},handleClickOutside:function(){f.off()}}},oy=["onChange","className","setImgPreview","addUploadImg","zoneType","attachmentConfig","onImageChange","imageRef"],ob=(0,I.G)("attachment",{attachment__hidden:"KnUdV",attachment__container:"kWX3b"}),ow=(0,rW.Zz)((0,f.Ng)(function(e){var t=eb(e),n=t.isEnabled,r=t.image,i=t.file,a="authorized"===eu(e).authZoneConfig.zoneType;return{attachmentConfig:{image:(null==r?void 0:r.formatList)||ax.image,file:(null==i?void 0:i.formatList)||ax.file},shouldRender:n&&a&&!am(e)}}),rQ.t)(function(e){e.onChange;var t=e.className,n=(e.setImgPreview,e.addUploadImg,e.zoneType,e.attachmentConfig),r=e.onImageChange,i=e.imageRef,a=(0,u.A)(e,oy),s=op(),c=(null==n?void 0:n.file)||".doc,.docx",f=(null==n?void 0:n.image)||"image/*",g=(0,l.useRef)(null),m=ov(),p=m.fileRef,v=oh({imageRef:i,fileRef:p,acceptImage:f,acceptFile:c,onImageChange:r,handleFileLoad:m.handleFileLoad}),h=v.items,y=v.isOpen,b=v.handleImageChange,w=v.handleFileChange,M=v.handleAttachClick,E=v.handleClickOutside;return d().createElement(d().Fragment,null,d().createElement("input",{accept:c,className:ob("hidden"),onChange:w,ref:p,type:"file"}),d().createElement("input",{accept:f,className:ob("hidden"),onChange:b,ref:i,type:"file"}),d().createElement(z,(0,o.A)({},a,{"aria-label":"Прикрепить файлы",className:ob(null,[t]),iconColor:"tertiary",iconLeft:C.ETA,onClick:M,onlyIcon:!0,ref:g,size:"m",view:"tertiary-invert"})),d().createElement(om,{anchorRef:g,className:ob("container"),container:s,direction:"upStartLeft",isOpen:y,isProportional:!0,items:h,offsetVertical:12,onClickOutside:E}))}),oM=["className"],oE=(0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4LjI3NTEgMTAuNzE2NkMxOC4yNTg0IDEwLjg3NSAxOC4yMzM0IDExLjAyNSAxOC4xOTE3IDExLjE3NUMxNy4zMjUxIDEwLjQ0MTYgMTYuMjAwMSA5Ljk5OTk4IDE0Ljk3NTEgOS45OTk5OEMxMi4yMTY3IDkuOTk5OTggOS45NzUwNyAxMi4yNDE2IDkuOTc1MDcgMTVDOS45NzUwNyAxNi4yMjUgMTAuNDE2NyAxNy4zNSAxMS4xNTAxIDE4LjIxNjZDMTEuMDAwMSAxOC4yNTgzIDEwLjg1MDEgMTguMjgzMyAxMC42OTE3IDE4LjNDOS45ODM0MSAxOC4zNjY2IDkuMjU4NDEgMTguMzMzMyA4LjUwODQxIDE4LjIwODNDNS4wODM0MSAxNy42MjUgMi4zMjUwNyAxNC44NSAxLjc1ODQxIDExLjQxNjZDMC44MTY3NCA1LjcwODMxIDUuNjgzNDEgMC44NDE2NDIgMTEuMzkxNyAxLjc4MzMxQzE0LjgyNTEgMi4zNDk5OCAxNy42MDAxIDUuMTA4MzEgMTguMTgzNCA4LjUzMzMxQzE4LjMwODQgOS4yODMzMSAxOC4zNDE3IDEwLjAwODMgMTguMjc1MSAxMC43MTY2WiIgc3Ryb2tlPSIjOThBMEIwIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xOC4xOTE4IDExLjE3NUMxOC4wNzUxIDExLjU4MzMgMTcuODU4NCAxMS45NSAxNy41NTAxIDEyLjI1ODNMMTIuMjMzNCAxNy41NzVDMTEuOTI1MSAxNy44ODMzIDExLjU1ODQgMTguMSAxMS4xNTAxIDE4LjIxNjdDMTAuNDE2OCAxNy4zNSA5Ljk3NTEgMTYuMjI1IDkuOTc1MSAxNUM5Ljk3NTEgMTIuMjQxNyAxMi4yMTY4IDEwIDE0Ljk3NTEgMTBDMTYuMjAwMSAxMCAxNy4zMjUxIDEwLjQ0MTcgMTguMTkxOCAxMS4xNzVaIiBzdHJva2U9IiM5OEEwQjAiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",ratio:1}),oA=M("sticker-button",{"sticker-button":"uARAK"}),oO=(0,l.forwardRef)(function(e,t){var n=e.className,r=(0,u.A)(e,oM),i=(0,ig._)(),a=(0,c.A)(i,2),s=a[0],l=a[1];return d().createElement(oE,(0,o.A)({},r,{className:oA(null,[n]),color:s?"primary-invert":"tertiary",onMouseEnter:l.on,onMouseLeave:l.off,ref:t,size:20,tagName:"button",type:"button"}))});let oI={form:"LGRE0",form_hidden:"E1mXC",form__submit:"eMJvc",form__submit_hidden:"oxEM3","form__text-area":"cmC2r"};var oN=["className"],oC=(0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwIDE2Ljg3NVYzLjEyNSIgc3Ryb2tlPSIjMjgzMDNGIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik00LjM3NSA4Ljc1TDEwIDMuMTI1TDE1LjYyNSA4Ljc1IiBzdHJva2U9IiMyODMwM0YiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cgo=",ratio:1}),ok=function(e){return d().createElement(oC,(0,o.A)({},e,{size:20}))},oD=M("form",oI),oT=function(e){var t=e.className,n=(0,u.A)(e,oN);return d().createElement(T.$,(0,o.A)({},n,{"aria-label":"Отправить сообщение",className:oD("submit",[t]),iconLeft:ok,onlyIcon:!0,size:"m"}))},oS=["isLoading","isImgPreviewOpen","className","isEmojiEnabled","hidden","setDynamicFormHeight","dispatch"],o_=M("form",oI),oj=(0,rW.Zz)((0,f.Ng)(function(e){return{isLoading:al(e),isEmojiEnabled:!1,isImgPreviewOpen:am(e),hidden:aA(e),shouldRender:!av(e)}},function(e){return{setDynamicFormHeight:function(t){return e(r5(t))}}}),rQ.t)(function(e){e.isLoading;var t=e.isImgPreviewOpen,n=e.className,r=e.isEmojiEnabled,i=e.hidden,a=e.setDynamicFormHeight,s=(e.dispatch,(0,u.A)(e,oS)),c=a6(),f=c.params,m=c.isSubmitDisabled,p=a9(c.inputRef);return(0,l.useEffect)(function(){a(p)},[p]),d().createElement(g.P.form,(0,o.A)({animate:{height:p,y:i?200:0},className:o_({hidden:i},[n]),transition:{y:{duration:.4},height:{duration:.01}}},s),d().createElement(ow,f.attachmentProps),d().createElement(i7,(0,o.A)({autoFocus:!0,className:o_("text-area"),placeholder:t?aO.imgPreview:aO.textMessage,rightSide:r?d().createElement(oO,null):void 0},f.inputProps)),d().createElement(oT,(0,o.A)({hidden:m},f.buttonProps)))}),ox=n(99162),oL=["className","onClick"],oz=M("scroll-button",{"scroll-button":"Vx8Iy","scroll-button__button":"eAnUK","scroll-button__button_withoutBadge":"oMTJj","scroll-button__badge":"jficr","scroll-button__action-button":"ro8Tc"}),oP={hidden:{poinerEvents:"none",x:100,opacity:0},visible:{x:0,opacity:1,poinerEvents:"all"}},oR=function(e){var t=e.className,n=(e.onClick,(0,u.A)(e,oL)),r=iZ(),i=r.scrollToBottom,a=r.isScrollButtonVisible;return rC(af).length,d().createElement("div",{className:oz(null,[t])},d().createElement(g.P.div,(0,o.A)({},n,{animate:a?"visible":"hidden",initial:"hidden",transition:{x:{duration:.3},opacity:{duration:.3}},variants:oP}),d().createElement(ox.p,{className:oz("button",{withoutBadge:!0}),content:void 0,offset:{horizontal:-14,vertical:6}},d().createElement(z,{"aria-label":"Проскроллить вниз",className:oz("action-button"),"data-count":void 0,iconLeft:C.rIS,onClick:function(){return i()},onlyIcon:!0,size:"m",view:"tertiary-invert"}))))},oU=function(e,t){var n=e.toLowerCase().indexOf(t.toLowerCase());if(-1!==n){var r=n+t.length-1;return[n,r]}return[0,0]},oY=function(e,t){var n,r=new Range,i=oU(e.childNodes[0].textContent||"",t),a=(0,c.A)(i,2),o=a[0],s=a[1];r.setStart(e.childNodes[0],o),r.setEnd(e.childNodes[0],s);var u=new Highlight(r);null===(n=CSS)||void 0===n||null===(n=n.highlights)||void 0===n||n.set("message-text-highlight",u),u.add(r)},oB=function(){var e=(0,l.useState)(1),t=(0,c.A)(e,2),n=t[0],r=t[1],i=rC(function(e){return e.filters}),a=i.search,o=i.isFiltersVisible,s=iX(),u=s.includedIds,d=s.refs,f=iZ().scrollRef,g=n>=u.length,m=n<=1,p=!a||!o;return(0,l.useEffect)(function(){if(!p&&a){var e=d[u[n-1]];if(null!=e&&e.current){var t,r=e.current.querySelector("[data-is-text]");r&&oY(r,a),null===(t=f.current)||void 0===t||t.scrollTo({top:e.current.offsetTop-100,behavior:"smooth"})}}},[n,a,u]),(0,l.useEffect)(function(){return function(){var e;null===(e=CSS)||void 0===e||null===(e=e.highlights)||void 0===e||e.delete("message-text-highlight")}},[p]),{position:n,setPosition:r,hidden:p,upDisabled:g,downDisabled:m,count:u.length}},oH=["className"],oV=(0,I.G)("navigation",{navigation:"zUy5L",navigation_hidden:"zBHjR",navigation__controls:"emsnb",navigation__button:"eZvIu"}),oG=function(e){var t=e.className,n=(0,u.A)(e,oH),r=oB(),i=r.upDisabled,a=r.downDisabled,s=r.count,c=r.hidden,l=r.position,f=r.setPosition;return d().createElement(g.P.div,(0,o.A)({animate:{height:c?0:70,y:c?100:0},className:oV({hidden:c},[t,(0,m.X)("dark")]),transition:{y:{duration:.4},height:{duration:.1}}},n),d().createElement(nf.E,{color:"tertiary-invert",variant:"body-small"},"".concat(l," из ").concat(s)),d().createElement("div",{className:oV("controls")},d().createElement(C.owb,{className:oV("button"),color:i?"disabled":"primary",disabled:i,onClick:function(){return f(function(e){return e+1})},size:"m",tagName:"button"}),d().createElement(C.rIS,{className:oV("button"),color:a?"disabled":"primary",disabled:a,onClick:function(){return f(function(e){return e-1})},size:"m",tagName:"button"})))},oZ=function(e){var t=e.ref,n=e.callback,r=e.options,i=(0,ig._)(),a=(0,c.A)(i,2),o=a[0],s=a[1];return(0,l.useEffect)(function(){var e=null;return t&&(e=new IntersectionObserver(function(e){var t=(0,c.A)(e,1)[0];s.set(n(t))},r),t.current&&e.observe(t.current)),function(){e&&e.disconnect()}}),o},oF=["view","label","tagName","className"],oW=M("divider",{divider:"sNjtt",divider_view_accent:"ryjoe",divider_view_default:"sZRlv",divider__label:"s2IUq",divider__label_view_accent:"ZDV5C"}),oQ=function(e){return e.intersectionRatio>.9&&e.intersectionRatio<1},oq=(0,D.B)(function(e,t){var n=e.view,r=void 0===n?"accent":n,i=e.label,a=e.tagName,s=e.className,c=(0,u.A)(e,oF),f=(0,l.useRef)(null),g=oZ({ref:f,callback:oQ,options:{threshold:[.9,1]}});return d().createElement(void 0===a?"div":a,(0,o.A)({className:oW({view:r,visible:g},[s]),ref:(0,nc.k)([t,f])},c),d().createElement(nf.E,{className:oW("label",{view:r}),color:"default"===r?"tertiary":"secondary-invert",variant:"accent"===r?"caption-medium":"body-small"},i))}),oK=function(e){return e.popular="start_button",e.replies="script_button",e}({}),oJ=function(e){return e.captcha},oX=function(e){return oJ(e).retryCount},o$=function(e){return oJ(e).targetCaptchaData},o0=function(e){return oJ(e).queuedMessages},o1=function(e){return oJ(e).recreateCount},o4=function(e){return oJ(e).recreateProcess},o2=function(e){return oJ(e).captchaAccessToken},o6=function(e){(0,R.TV)({name:tp,value:e,maxAge:6e4})},o3=function(e,t,n){e["retry"===t?"retryCount":"recreateCount"]=n;var r="retry"===t?th:ty;0===n?(0,R.Yj)(r):(0,R.TV)({name:r,value:n})},o5=function(e){sessionStorage.setItem(tM,JSON.stringify(e))},o9=function(e){e&&(0,R.TV)({name:tE,value:null==e?void 0:e.toString()})},o8=function(e){sessionStorage.setItem(tA,JSON.stringify(e))},o7={retryCount:Number(null!==(i=(0,R.Ri)(th))&&void 0!==i?i:0),captchaAccessToken:function(){var e=(0,R.Ri)(tp);if(e)return e}(),validateStatus:ew.idle,createStatus:ew.idle,queuedMessages:[],recreateCount:Number(null!==(a=(0,R.Ri)(ty))&&void 0!==a?a:0),recreateProcess:[]},se=(0,P.Z0)({name:"captcha",initialState:o7,reducers:{setActiveCaptchaMessageId:function(e,t){e.activeCaptchaMessageId=t.payload,o9(t.payload)},setRetryCount:function(e,t){o3(e,"retry",t.payload)},setCaptchaData:function(e,t){e.targetCaptchaData=t.payload},addProcessId:function(e,t){e.recreateProcess.push(t.payload)},removeProcessId:function(e,t){e.recreateProcess=e.recreateProcess.filter(function(e){return e!==t.payload})},setCaptchaAccessToken:function(e,t){e.captchaAccessToken=t.payload,t.payload&&o6(t.payload)},addQueuedMessage:function(e,t){e.queuedMessages.push(t.payload),o8(e.queuedMessages)},clearQueuedMessages:function(e){e.queuedMessages=[],o8(e.queuedMessages)},setQueuedMessages:function(e,t){e.queuedMessages=t.payload,o8(e.queuedMessages)},removeQueuedMessage:function(e,t){e.queuedMessages=e.queuedMessages.filter(function(e){return e.messageId!==t.payload}),o8(e.queuedMessages)},setRecreateCount:function(e,t){o3(e,"recreate",t.payload)}},extraReducers:function(e){e.addCase(e0.pending,function(e){e.validateStatus=ew.loading}).addCase(e0.fulfilled,function(e,t){var n=t.payload.accessToken;e.captchaAccessToken=n,o6(n),o3(e,"retry",0),o3(e,"recreate",0),e.validateStatus=ew.fulfilled}).addCase(e0.rejected,function(e,t){var n=t.payload;(null==n?void 0:n.status)===401&&(null==n?void 0:n.message)!==tI&&o3(e,"retry",e.retryCount+1),e.validateStatus=ew.failed}).addCase(e1.pending,function(e){e.createStatus=ew.loading}).addCase(e1.fulfilled,function(e,t){e.targetCaptchaData=t.payload,o5(t.payload),e.createStatus=ew.fulfilled}).addCase(e1.rejected,function(e){e.createStatus=ew.failed,e.targetCaptchaData=void 0})}}),st=se.actions,sn=st.setCaptchaData,sr=st.setRetryCount,si=st.addQueuedMessage,sa=(st.clearQueuedMessages,st.setCaptchaAccessToken),so=st.setQueuedMessages,ss=st.addProcessId,sc=st.removeProcessId,su=st.setRecreateCount,sl=st.removeQueuedMessage,sd=st.setActiveCaptchaMessageId,sf={width:220,height:68},sg=function(e,t){var n,r,i=rN(),a=(0,id.V)(rC(o$)),o=(0,id.V)(rC(o1)),s=(0,l.useCallback)((0,eM.A)(eA().mark(function e(){var n,r;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(e1(sf));case 2:if(n=e.sent,!e1.fulfilled.match(n)){e.next=6;break}return rc(null===(r=t.authZoneConfig)||void 0===r?void 0:r.zoneType),e.abrupt("return",n.payload);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}},e)})),[t.authZoneConfig]),c=(0,l.useCallback)((n=(0,eM.A)(eA().mark(function n(r){var a,c,u,l;return eA().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r&&(i(ss(r)),i(sd(r))),n.next=4,s();case 4:i(sn(null!=(a=n.sent)?a:void 0)),r&&(a&&(i(sd(a.captchaId)),i(su(o.current+1))),e({id:r,messageId:null!==(c=null==a?void 0:a.captchaId)&&void 0!==c?c:r,captcha:null!==(u=null==a?void 0:a.image)&&void 0!==u?u:null}));case 7:return n.prev=7,rg(null===(l=t.authZoneConfig)||void 0===l?void 0:l.zoneType),r&&i(sc(r)),n.finish(7);case 11:case"end":return n.stop()}},n,null,[[0,,7,11]])})),function(e){return n.apply(this,arguments)}),[t.authZoneConfig]);return{createCaptcha:s,validateCaptcha:(0,l.useCallback)((r=(0,eM.A)(eA().mark(function e(t){var n,r;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.current){e.next=8;break}return n={captchaValue:t,captchaText:a.current.captchaText,cookieToken:a.current.captchaTokenValue,captchaId:a.current.captchaId},e.next=4,i(e0(n));case 4:if(r=e.sent,!e0.fulfilled.match(r)){e.next=7;break}return e.abrupt("return",{type:"success",data:r.payload});case 7:return e.abrupt("return",{type:"error",data:r.payload});case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[]),captchaUpdate:c}},sm=n(30524),sp=function(e,t){return e>0?t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]:t[1]},sv=function(e){return e.init="init",e.start="start",e.retry="retry",e.end="end",e.error="error",e.blocked="blocked",e.captcha="captcha",e.recaptcha="recaptcha",e}({}),sh=function(){var e=(0,R.Ri)(tb),t=new Date().getTime();return e&&Number(e)>t?Number(e)-t:0},sy="Возникла ошибка. Попробуйте еще раз или повторите позднее",sb=["попытка","попытки","попыток"],sw=["Осталась","Осталось","Осталось"],sM=["минуту","минуты","минут"],sE=function(e){var t=e.retry,n=void 0===t?0:t,r=e.timeout,i=void 0===r?sh():r,a=Math.ceil((null!=i?i:sh())/6e4),o=4-n;return{init:void 0,start:"Люди не любят капчу, но роботов она вообще выводит из себя — и из этого чата",retry:"Попробуйте ещё раз — вводите только цифры".concat(n>1?". ".concat(sp(o,sw)," ").concat(o," ").concat(sp(o,sb)):""),blocked:"Слишком много попыток — попробуйте через ".concat(a," ").concat(sp(a,sM)),end:"Спасибо, всё верно. Готов вам помочь",captcha:sy,recaptcha:"Мы уже уверены, что вы человек, но просим ввести символы ещё раз",error:sy}},sA=function(e,t){var n=e===sv.captcha||e===sv.recaptcha,r=sE(t)[e];return r?tl(r,{author:eD.Bot,messageType:n?ex.CAPTCHA:void 0,status:n?ej.sent:ej.delivered,id:"blocked"===e?tO:void 0,onlyClient:!0}):null};function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var sI=function(e){var t,n=e.updateMessage,r=e.addMessage,i=e.createCaptcha,a=iE(),o=a.options,c=a.stage,u=rN(),d=(0,id.V)(rC(oX)),f=iZ().scrollToBottom,g=(0,sm.$)(6e3,{onReached:function(){n({id:tO,message:{content:sE({}).blocked}})}}).createInterval;return(0,l.useEffect)(function(){c===il.BLOCKED&&g()},[c]),(0,l.useCallback)((t=(0,eM.A)(eA().mark(function e(t,a){var c,l;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=sA(t,{retry:d.current,timeout:o.blockedTimeout})){e.next=3;break}return e.abrupt("return");case 3:if(a?n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:a},c)):r(c),"captcha"!==t){e.next=15;break}return u(ss(c.messageId)),u(sd(c.messageId)),e.next=9,i();case 9:if(l=e.sent,u(sc(c.messageId)),l){e.next=13;break}return e.abrupt("return");case 13:u(sd(l.captchaId)),n({captcha:l.image,date:c.date,id:c.messageId,messageId:l.captchaId});case 15:f(0);case 16:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)}),[i])},sN=n(57e3),sC=function(e){var t;return e===il.BLOCKED?"blocked":null!==(t=(0,R.Ri)(tw))&&void 0!==t?t:"init"},sk=function(){var e=sessionStorage.getItem(tM);if(e)return JSON.parse(e)},sD=function(e){var t,n,r=e.config,i=e.reconnectCount,a=e.generateCaptchaMessage,o=e.validateCaptcha,s=e.setIsNoNAuthCaptchaStage,u=iE(),d=u.changeStage,f=u.stage,g=u.addReachedHandler,m=(0,l.useState)("init"),p=(0,c.A)(m,2),v=p[0],h=p[1],y=(0,sN.Z)(f),b=rN(),w=(null!==(n=r.authZoneConfig)&&void 0!==n?n:{}).zoneType,M=(0,id.V)(rC(oX)),E=function(e){h(e),(0,R.TV)({name:tw,value:e}),a(e),[sv.retry,sv.start,sv.recaptcha].includes(e)&&a("captcha")},A=(t=(0,eM.A)(eA().mark(function e(t){var n,r,i;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:if(n=e.sent){e.next=6;break}return a("error"),e.abrupt("return");case 6:if(r=n.data,"success"!==n.type){e.next=13;break}return d(il.CONNECTING),s(!1),E("end"),ru(w),e.abrupt("return");case 13:if(i=null==r?void 0:r.message,!(401===r.status&&i===tI)){e.next=18;break}return a("error"),a("captcha"),e.abrupt("return");case 18:M.current+1>4?(d(il.BLOCKED),E("blocked"),rf(w)):(E("retry"),rd(w));case 19:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),O=function(){b(sr(0)),a("captcha",tO)};(0,l.useEffect)(function(){g("captcha",O)},[]);var I=function(){b(sr(0)),b(su(0))},N=function(){I(),E(sv.recaptcha),rl(w)};return(0,l.useEffect)(function(){var e=i>10&&y===il.CONNECTING;if((y===il.LOAD_DATA||e)&&f===il.CAPTCHA_NEEDED){N();return}(f===il.ACTIVE||f===il.LOAD_DATA||f===il.CONNECTING)&&h("end")},[f]),(0,l.useEffect)(function(){var e=sC(f);h(e),b(sn(sk())),"init"===e&&I()},[]),(0,l.useEffect)(function(){b(sa((0,R.Ri)(tp))),b(sd((0,R.Ri)(tE)))},[]),{sendCaptchaMessage:A,handleChangeStage:E,generateCaptchaMessage:a,captchaStage:v}};function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s_=(0,l.createContext)({sendCaptchaMessage:function(){return new Promise(function(){})},createCaptcha:function(){return new Promise(function(){})},handleChangeStage:function(){return new Promise(function(){})},generateCaptchaMessage:function(){return new Promise(function(){})},captchaUpdate:function(){return new Promise(function(){})},captchaStage:"init"}),sj=function(e){var t=e.children,n=e.updateMessage,r=e.config,i=e.addMessage,a=e.reconnectCount,o=e.setIsNoNAuthCaptchaStage,s=sg(n,r),c=s.createCaptcha,u=s.validateCaptcha,f=s.captchaUpdate,g=sI({updateMessage:n,addMessage:i,createCaptcha:c}),m=sD({config:r,reconnectCount:void 0===a?0:a,generateCaptchaMessage:g,validateCaptcha:u,setIsNoNAuthCaptchaStage:o}),p=(0,l.useMemo)(function(){return sS(sS({},m),{},{createCaptcha:c,generateCaptchaMessage:g,captchaUpdate:f})},[m,g,c,f]);return d().createElement(s_.Provider,{value:p},t)},sx=function(){return(0,l.useContext)(s_)},sL=function(e){return e.NZStart="nz-start",e.PopularRequests="popular-request",e.QuickReplies="quick-replies",e.Hidden="",e}({}),sz=n(2543),sP=["className","title","link","isDeepLink","icon","children","onVisible"];function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var sU=M("quick-button",{"quick-button":"sCQlD","quick-button__icon-btn":"aZhu2","quick-button__text":"YDA7r"}),sY=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.title,i=e.link,a=(e.isDeepLink,e.icon),c=(e.children,e.onVisible),f=(0,u.A)(e,sP),g=(0,l.useRef)(null),m=oZ({ref:g,callback:function(e){return e.isIntersecting},options:{threshold:[.75]}}),p=null!=i&&i.trim()?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({href:i,target:"self"},f):f,v="string"==typeof a?(0,ng.Y)({url:a,ratio:1}):a,h=null!=i&&i.trim()?"a":"button";return(0,l.useEffect)(function(){null==c||c(m)},[m]),d().createElement(h,(0,o.A)({"aria-label":r,className:sU(null,[n]),form:"round",ref:(0,nc.k)([g,t]),role:"tab"},p),v&&d().createElement(v,{className:sU("icon-btn"),color:"primary-invert",size:"xs"}),d().createElement(nf.E,{className:sU("text"),color:"primary-invert",truncate:!0,variant:"body-small"},r))}),sB=M("quick-request",{"quick-request":"UlfpM"}),sH=function(e){var t=e.items,n=e.onItemClick,r=e.zoneType,i=e.className,a=it(),s=(0,l.useMemo)(function(){return(0,sz.flatten)(t)},[t]);return(0,l.useEffect)(function(){null!=s&&s.length&&rI(s.map(function(e){return e.title}),oK.popular,r)},[]),d().createElement("section",{className:sB(null,[i])},s.map(function(e,t){return d().createElement(sY,(0,o.A)({},e,{key:sB("item",{i:t}),onClick:function(){return n(e)},onVisible:function(t){return a(e.title,t)}}))}))},sV="еще варианты",sG=function(e){var t=e.items,n=e.slice,r=[],i=[];t.forEach(function(e){e.fixedButton?i.push(e):r.push(e)});var a=r.length>5;return{flexListByPage:a?r.slice(n,n+5):r,lengthFlexList:r.length,fixedList:i,isMoreVariant:a}},sZ=function(e,t,n){var r=(null==e?void 0:e.map(function(e){return null==e?void 0:e.text}))||[],i=(null==t?void 0:t.map(function(e){return null==e?void 0:e.text}))||[];return n&&r.push(sV),r.concat(i)},sF=function(e){var t=(0,l.useState)(0),n=(0,c.A)(t,2),r=n[0],i=n[1],a=(0,l.useRef)(-1),o=iZ().scrollToBottom,s=(0,l.useMemo)(function(){return sG({items:(0,sz.flatten)(e),slice:r})},[e,r]),u=s.flexListByPage,d=s.lengthFlexList,f=s.fixedList,g=s.isMoreVariant,m=d-r>5,p=(0,N.E)({icons:[C.gXA,C.H42]});return(0,l.useEffect)(function(){null!=e&&e.length&&a.current<r&&(rI(sZ(u,f,g),oK.replies,"authorized"),a.current=r)},[u,f]),{flexListByPage:u,fixedList:f,isMoreVariant:g,IconComponent:p,onClick:function(){var e=r+5;i(e>=d?0:e),rO(sV,oK.replies,"authorized"),o(100)},hasMoreVariants:m}},sW=M("quick-replies",{"quick-replies":"RBJQu","quick-replies__list":"vAY95"}),sQ=function(e){var t=e.item,n=e.onClick;return d().createElement(sY,{icon:t.imageUrl,isDeepLink:!!t.deepLink,link:t.deepLink||t.link,onClick:n,title:t.text})},sq=function(e){var t=e.items,n=e.onItemClick,r=e.className,i=sF(t),a=i.flexListByPage,o=i.fixedList,s=i.isMoreVariant,c=i.onClick,u=i.IconComponent,l=i.hasMoreVariants,f=function(e){return function(){return n(e)}};return d().createElement("section",{className:sW(null,[r])},!!(null!=a&&a.length)&&d().createElement(g.P.div,{className:sW("list")},a.map(function(e,t){return d().createElement(sQ,{item:e,key:sW("item",{i:t}),onClick:f(e)})}),s&&d().createElement(k.u,{activeIndex:l?0:1},d().createElement(sY,{className:sW("item-more"),icon:u,onClick:c,title:sV}))),!!(null!=o&&o.length)&&d().createElement("div",{className:sW("list")},o.map(function(e,t){return d().createElement(sQ,{item:e,key:sW("item",{i:t}),onClick:f(e)})})))},sK=(0,rW.Zz)((0,f.Ng)(function(e){var t=ef(e),n=em(e).zoneType;return{nzStartButtons:null!=t&&t.isEnabled?t.list:[],faqPopularRequests:aF(e),faqQuickReplies:aV(e).quickReplies,isLastSessionFinished:ao(e),zoneType:n,shouldRender:"authorized"===n?au(e)===ew.fulfilled:!!(null!=t&&t.isEnabled&&t.list.length)}},function(e){return{addQuickReplies:function(t){return e(r6(t))}}}))(function(e){var t=e.faqPopularRequests,n=e.faqQuickReplies,r=e.className,i=e.zoneType,a=e.nzStartButtons,o=e.addQuickReplies,s=e.isLastSessionFinished,c=(0,id.V)(a_().sendMessage),u=iE().stage,f=iX().sessions,g=sx().captchaStage,m=(0,l.useMemo)(function(){return"unauthorized"===i&&("init"===g&&u===il.CAPTCHA_NEEDED||s)&&null!=a&&a.length?sL.NZStart:"authorized"===i&&(s||!f.length)&&t.length?sL.PopularRequests:n.length&&!s?sL.QuickReplies:sL.Hidden},[s,f,t,g,n,i,a,u]),p=(0,l.useCallback)(function(e){var t=e.link,n=e.value,r=e.title;if(t&&m!==sL.QuickReplies)o([]);else{var a=n?{messageType:ex.Button,value:n}:void 0,s={messageType:ex.Link,link:t};c.current(r,void 0,void 0,t?s:a)}if(m===sL.QuickReplies){rO(r,oK.replies,i);return}nq(r),rO(r,oK.popular,i)},[m]);return m===sL.Hidden?null:m===sL.QuickReplies?d().createElement(sq,{className:r,items:n,onItemClick:function(e){return p({link:e.deepLink?e.deepLink:e.link,title:e.text,imageUrl:e.imageUrl,isDeepLink:!!e.deepLink,value:null==e?void 0:e.value})}}):d().createElement(sH,{className:r,items:m===sL.NZStart?a:t,onItemClick:p,zoneType:i})}),sJ=function(e){return e.user.apperList},sX=n(59496),s$=n(91046),s0=n(99606),s1=n(76153),s4=function(e){return e.PENDING="pending",e.SUBMITED="submited",e.READED="readed",e.UNKNOWN="unknown",e.REJECTED="rejected",e}({}),s2=function(e){var t=e.message,n=e.unreadedMessages;return t.messageStatus===ej.failed?s4.REJECTED:null!=n&&n.find(function(e){return e.messageId===t.messageId})?s4.SUBMITED:t.messageStatus===ej.sent?s4.PENDING:s4.UNKNOWN},s6=function(e,t,n,r){if(n&&!r)return!0;var i=new Date(e.date).toDateString();return!(null!=t&&t.date)&&r?new Date(r).toDateString()!==i:null!=t&&!!t.date&&!n&&i!==new Date(null==t?void 0:t.date).toDateString()},s3=function(e){var t=new Date(e);return(0,sX.A)(t)?"Сегодня":(0,s$.A)(t)?(0,s0.A)(t,"d MMMM",{locale:s1.A}):(0,s0.A)(t,"d MMMM yyyy",{locale:s1.A})},s5={animalID:1,codeName:aj.bee,animalName:"Базя",serviceSoc:"POWER4",link:"https://static.beeline.ru/upload/images/chat/avatar_bee.png"},s9=function(e,t){var n,r;return(e.type===eD.Operator||e.type===eD.External)&&e.name?e:{id:(r=null!==(n=null==t?void 0:t.find(function(t){return t.animalID===e.type}))&&void 0!==n?n:s5).animalID,name:r.animalName,image:r.link,type:r.animalID}},s8=function(e,t,n){if(n)for(var r=0;r<e.length;r+=1){var i=e[r].messages.find(function(e){return e.messageId===n});if(i)return{message:i,author:s9(i.author,t)}}},s7=function(e,t){return(null==t?void 0:t.author.type)!==(null==e?void 0:e.author.type)||(null==t?void 0:t.author.name)!==(null==e?void 0:e.author.name)},ce=function(){var e=rC(af),t=rC(sJ),n=iX().sessions;return(0,l.useMemo)(function(){var r=[],i=-1;return n.forEach(function(a,o){a.messages.forEach(function(s,c){var u=s.author.type===eD.Client?"main":"opposite",l=a.messages[c-1],d=a.messages[c+1],f=n[o-1],g=s6(s,l,0===c,null==f?void 0:f.updatetAt);(g||-1===i)&&(i+=1,r.push({date:s3(s.date),list:[]})),r[i].list.push({author:s9(s.author,t),side:u,message:s,stage:s2({message:s,unreadedMessages:e}),reply:s8(n,t,s.message.replyId),withUsername:g||s7(l,s),withAvatar:g||s7(s,d)})})}),r},[n,t,e])},ct=function(e,t){var n=t.deps,r=t.onStartScrolling,i=t.onStopScrolling,a=t.onScroll,o=t.scrollTimeout,s=(0,l.useRef)(null),c=(0,l.useRef)(!1),u=(0,id.V)(void 0===o?300:o),d=function(e){null==a||a(e),null!==s.current&&clearTimeout(s.current),s.current=setTimeout(function(){c.current=!1,null==i||i(e)},u.current),c.current||(null==r||r(e),c.current=!0)};(0,l.useEffect)(function(){var t;return null===(t=e.current)||void 0===t||t.addEventListener("scroll",d),function(){var t;null===(t=e.current)||void 0===t||t.removeEventListener("scroll",d)}},void 0===n?[]:n)},cn=function(e,t,n){if(!(null!=e&&e.current)||!(null!=t&&t.current))return!1;var r=e.current.scrollTop-(n?92:76);return r<t.current.offsetTop+t.current.offsetHeight&&r+e.current.offsetHeight>t.current.offsetTop},cr=function(e){var t=e.length,n=(0,iF.l)(t),r=(0,iF.l)(t),i=iZ().scrollRef,a=(0,l.useRef)(Array(t).fill(!1)),o=(0,p.sn)(),s=function(){i.current&&(a.current=r.map(function(e,t){var r;return cn(i,e,o)&&!!(r=n[t]).current&&!!e.current&&r.current.offsetTop-20>e.current.offsetTop}))},c=(0,l.useCallback)(function(e){return function(){a.current.forEach(function(t,r){var i=n[r];("stop"!==e||t)&&null!=i&&i.current&&(i.current.style.opacity="stop"===e?"0":"1")})}},[t]);return(0,l.useEffect)(s,[t]),ct(i,{onScroll:s,deps:[t],onStopScrolling:c("stop"),onStartScrolling:c("start")}),{dividerRefs:n,sessionSectionRefs:r}},ci=n(78167),ca=n.n(ci),co=n(45306);function cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cs(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cu={info:"var(--color-text-primary)",success:"var(--color-constant-02)",error:"var(--color-constant-02)",warning:"var(--color-constant-01)"},cl={info:.6,success:.6,error:.7,warning:.7},cd=function(e){return e.id},cf=function(e){return e.mode},cg=function(e){return e.title},cm=function(e){return e.subTitle},cp=function(e){return e.view},cv=n(47690),ch=n(38449),cy=n(28186),cb={info:"#E2E6ED",success:"#00C06D",error:"#FF6524",warning:"#FFD546"},cw=function(e){var t=e.onClose,n=e.autoCloseTime,r=e.mode,i=e.view,a=(0,cv.L)({endTime:0,startTime:n,timerType:ch.a.DECREMENTAL,onTimeOver:t});(0,cy.X)(cb[i]);var o=function(){"autoclose"===r&&a.start()};return(0,l.useEffect)(function(){o()},[r]),{pause:function(){"autoclose"===r&&a.pause()},play:o}},cM=["className","align","mode","view","position","title","subTitle","autoCloseTime","style","onClose","onMouseEnter","onMouseLeave"];function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cA=(0,I.G)("snackbar-item",{"snackbar-item":"nx2TR","snackbar-item_align_tabbar":"HQo0k","snackbar-item_withButton":"dFNZ1","snackbar-item_view_info":"aBsXC","snackbar-item_view_warning":"YJssG","snackbar-item_view_error":"u4ZBj","snackbar-item_view_success":"RvrF5","snackbar-item__wrapper":"REYjQ","snackbar-item__title":"Up1rl","snackbar-item__subtitle":"p401p","snackbar-item__button":"ckhCe"}),cO=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.align,i=e.mode,a=void 0===i?"autoclose":i,c=e.view,l=void 0===c?"info":c,f=(e.position,e.title),g=e.subTitle,m=e.autoCloseTime,p=e.style,v=e.onClose,h=e.onMouseEnter,y=e.onMouseLeave,b=(0,u.A)(e,cM),w=cw({mode:a,autoCloseTime:m,onClose:v,view:l}),M=w.pause,E=w.play;return d().createElement("div",(0,o.A)({className:cA({align:void 0===r?"default":r,view:l,withButton:"button"===a},[n]),onMouseEnter:function(e){null==h||h(e),M()},onMouseLeave:function(e){null==y||y(e),E()},ref:t,role:"presentation",style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,s.A)((0,s.A)({},"--snackbar-item-color",cu[l]),"--snackbar-item-sub-opacity",cl[l]),p)},b),d().createElement("div",{className:cA("wrapper")},f&&d().createElement(nf.E,{align:"center",className:cA("title"),variant:"body-small"},f),g&&d().createElement(nf.E,{align:"center",className:cA("subtitle"),variant:"body-small"},g)),"button"===a&&d().createElement("button",{"aria-label":"закрыть оповещение",className:cA("button"),onClick:v,type:"button"},d().createElement(C.maM,null)))}),cI=["getItemMode","getItemSubTitle","getItemTitle","align","getItemView","getItemId","container","position","autoCloseTime","offset","items","theme","onCloseTrigered","onItemClose","className","style","shouldRender"];function cN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cC=(0,I.G)("snackbar",{snackbar:"YReST",snackbar__item:"Mbng1",snackbar__item_align_tabbar:"tyZ7C",snackbar__item_align_default:"Biqmq",snackbar__item_align_default_position_topLeft:"axzB8",snackbar__item_align_default_position_topCenter:"aEX1P",snackbar__item_align_default_position_topRight:"HYeQm",snackbar__item_align_default_position_bottomLeft:"TrrcF",snackbar__item_align_default_position_bottomCenter:"nbVkV",snackbar__item_align_default_position_bottomRight:"USpkD",snackbar__item_animate_entered:"txdKe",snackbar__item_animate_entering:"r4LtR",snackbar__item_animate_exiting:"suAzi",snackbar__item_animate_exited:"eDMSX"}),ck=(0,co.g)((0,l.forwardRef)(function(e,t){var n=cc(cc({},e),{},{getItemId:e.getItemId||cd,getItemMode:e.getItemMode||cf,getItemTitle:e.getItemTitle||cg,getItemSubTitle:e.getItemSubTitle||cm,getItemView:e.getItemView||cp}),r=n.getItemMode,i=n.getItemSubTitle,a=n.getItemTitle,f=n.align,g=void 0===f?"default":f,p=n.getItemView,v=n.getItemId,h=n.container,y=void 0===h?window.document.body:h,b=n.position,w=void 0===b?"bottomCenter":b,M=n.autoCloseTime,E=void 0===M?3500:M,A=n.offset,O=void 0===A?24:A,I=n.items,N=void 0===I?[]:I,C=n.theme,k=n.onCloseTrigered,D=n.onItemClose,T=n.className,S=n.style,_=(n.shouldRender,(0,u.A)(n,cI)),j=(0,iF.l)(N.length),x=(0,l.useState)(),L=(0,c.A)(x,2),z=L[0],P=L[1];(0,l.useEffect)(function(){N.length&&P(N[0])},[N]);var R=function(e){null==k||k(e),setTimeout(function(){return null==D?void 0:D(e)},300)};return ca().createPortal(d().createElement("div",(0,o.A)({className:cC(null,[T,(0,m.X)(void 0===C?"light":C)]),ref:t,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cN(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,s.A)((0,s.A)({},"--snackbar-zindex",(null==S?void 0:S.zIndex)||10),"--snackbar-offset","number"==typeof O?"".concat(O,"px"):O),S)},_),N.map(function(e,t){return d().createElement(no.Ay,{appear:!0,in:!!z&&v(z)===v(e),key:cC("item",{index:v(e)}),nodeRef:j[t],timeout:300,unmountOnExit:!0},function(n){return d().createElement(cO,{align:g,autoCloseTime:E,className:cC("item",{align:g,animate:n,position:w,mode:r(e)}),mode:r(e),onClose:function(){return R(e)},ref:j[t],subTitle:i(e),title:a(e),view:p(e)})})})),y)})),cD=function(){var e=aU(),t=e.notifications,n=e.removeNotification,r=iZ().scrollRef;return d().createElement(ck,{align:"tabbar",autoCloseTime:5e3,container:r.current||void 0,getItemId:function(e){return e.key},getItemSubTitle:function(e){return e.subTitle},getItemTitle:function(e){return e.label},getItemView:function(e){return e.view},items:t,onItemClose:function(e){return n(e.key)}})},cT=function(){var e=(0,eM.A)(eA().mark(function e(t){var n;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=navigator)||void 0===n||null===(n=n.clipboard)||void 0===n?void 0:n.writeText(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),cS=((0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuNTE4MzQgNS41MTE1VjIuNDAwMzlMMS41NDA1NyA3LjU4NTU3TDYuMzEwOTMgMTIuNzcwOFY5LjY1OTY0QzYuMzEwOTMgOS42NTk2NCAxMS4yMjkyIDguNDc4MDQgMTQuMjg2OCAxMy41ODUyQzE0LjMwMDkgMTMuNjA4OSAxNC4zMzU5IDEzLjYwMzkgMTQuMzQwMSAxMy41NzY3QzE0LjM1ODEgMTMuNDU2NCAxNC4zODk3IDEzLjIwMDEgMTQuMzk3OSAxMi44NDU4QzE0LjQ4MjggOS4yMTIwNiAxMS43OTc3IDYuMTE5NDEgOC4yMzIxNSA1LjYyOTMxQzcuNjg1NjMgNS41NTQyMiA3LjE3OTU1IDUuNDkxMzggNi41MTgzNCA1LjUxMTVaIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuMyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTYgM0wyIDcuNUw2LjUgMTJWOS41SDhMMTEgMTBMMTQgMTIuNVYxMEwxMSA2LjVMNiA1VjNaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",ratio:1}),(0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDJDNS43OSAyIDQgMy43OSA0IDZWMTRDNCAxNi4yMSA1Ljc5IDE4IDggMThIMTJDMTQuMjEgMTggMTYgMTYuMjEgMTYgMTRWNkMxNiAzLjc5IDE0LjIxIDIgMTIgMkg4Wk0xMS44OCAyMS45MkMxMC4yIDIxLjkyIDguNzYgMjAuOTcgOC4xNyAxOS41SDEzLjQ4QzE1LjY5IDE5LjUgMTcuNDggMTcuNzEgMTcuNDggMTUuNVY2LjI4QzE4Ljk1IDYuODcgMjAgOC4zMSAyMCAxMFYxNy40NUMyMCAxOS4yNSAxNy45NyAyMS45MiAxNS4zNSAyMS45MkgxMS44OFoiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg==",ratio:1})),c_=(0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTUuNiAxMC42MDAzTDguNCA5LjkwMDI3QzguOSA5LjgwMDI3IDkuMSA5LjMwMDI3IDkgOC44MDAyN0M4LjkgOC4zMDAyNyA4LjQgOC4xMDAyNyA3LjkgOC4yMDAyN0w2LjQgOC42MDAyN0M3LjggNi4xMDAyNyAxMCA0LjcwMDI3IDEyLjUgNC44MDAyN0MxNS4xIDQuOTAwMjcgMTcuNCA2LjYwMDI3IDE4LjUgOS4zMDAyN0MxOC42IDkuNjAwMjcgMTkgOS45MDAyNyAxOS4zIDkuOTAwMjdDMTkuNCA5LjkwMDI3IDE5LjUgOS45MDAyNyAxOS42IDkuODAwMjdDMjAuMSA5LjYwMDI3IDIwLjMgOS4xMDAyNyAyMC4xIDguNzAwMjdDMTguOSA1LjMwMDI3IDE1LjkgMy4xMDAyNyAxMi42IDMuMDAwMjdDOS40IDIuOTAwMjcgNi43IDQuNjAwMjcgNC45IDcuNzAwMjdMNC43IDUuOTAwMjdDNC43IDUuNDAwMjcgNC4yIDUuMTAwMjcgMy43IDUuMTAwMjdDMy4zIDUuMTAwMjcgMyA1LjUwMDI3IDMgNi4wMDAyN0wzLjMgOC45MDAyN0MzLjMgOS41MDAyNyAzLjYgMTAuMDAwMyA0LjEgMTAuMzAwM0M0LjQgMTAuNTAwMyA0LjggMTAuNjAwMyA1LjEgMTAuNjAwM0M1LjMgMTAuNzAwMyA1LjUgMTAuNzAwMyA1LjYgMTAuNjAwM1oiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZD0iTTIxLjIgMTQuODAwM0MyMS4xIDE0LjIwMDMgMjAuOCAxMy43MDAzIDIwLjQgMTMuNDAwM0MyMCAxMy4xMDAzIDE5LjQgMTMuMDAwMyAxOC45IDEzLjEwMDNMMTYuMSAxMy44MDAzQzE1LjYgMTMuOTAwMyAxNS40IDE0LjQwMDMgMTUuNSAxNC45MDAzQzE1LjYgMTUuNDAwMyAxNi4xIDE1LjYwMDMgMTYuNiAxNS41MDAzTDE4LjEgMTUuMTAwM0MxNi43IDE3LjYwMDMgMTQuNSAxOS4wMDAzIDEyIDE4LjkwMDNDOS40IDE4LjgwMDMgNy4xIDE3LjEwMDMgNiAxNC40MDAzQzUuOCAxMy45MDAzIDUuMyAxMy43MDAzIDQuOSAxMy45MDAzQzQuNSAxNC4xMDAzIDQuMiAxNC42MDAzIDQuNCAxNS4wMDAzQzUuNyAxOC4zMDAzIDguNyAyMC41MDAzIDEyIDIwLjYwMDNDMTIuMSAyMC42MDAzIDEyLjIgMjAuNjAwMyAxMi4zIDIwLjYwMDNDMTUuMyAyMC42MDAzIDE4IDE4LjkwMDMgMTkuNyAxNS45MDAzTDE5LjkgMTcuNzAwM0MxOS45IDE4LjIwMDMgMjAuMyAxOC41MDAzIDIwLjggMTguNTAwM0gyMC45QzIxLjQgMTguNTAwMyAyMS43IDE4LjAwMDMgMjEuNyAxNy41MDAzTDIxLjIgMTQuODAwM1oiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg==",ratio:1}),cj=(0,ng.Y)({url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNy45MDk5IDVIMTYuODA5OUwxNi40Njk5IDMuOTdDMTYuMDc5OSAyLjc5IDE0Ljk3OTkgMiAxMy43Mzk5IDJIMTAuNjE5OUM5LjM3OTg3IDIgOC4yODk4NyAyLjc5IDcuODg5ODcgMy45N0w3LjU0OTg3IDVINi40NDk4N0M0LjM5OTg3IDUgMy4yNTk4NyA3LjM3IDQuNTM5ODcgOC45OEM1LjAzOTg3IDkuNiA1LjMwOTg3IDEwLjM3IDUuMzA5ODcgMTEuMTZWMTYuODhDNS4zMDk4NyAxOS41NyA3LjQ4OTg3IDIxLjc2IDEwLjE4OTkgMjEuNzZIMTQuMTg5OUMxNi44Nzk5IDIxLjc2IDE5LjA2OTkgMTkuNTggMTkuMDY5OSAxNi44OFYxMS4xNkMxOS4wNjk5IDEwLjM3IDE5LjMzOTkgOS42IDE5LjgzOTkgOC45OEMyMS4wOTk5IDcuMzcgMTkuOTU5OSA1IDE3LjkwOTkgNVpNMTEuMzg5OSAxNi4xNEMxMS4zODk5IDE2LjYyIDEwLjk5OTkgMTcuMDIgMTAuNTA5OSAxNy4wMkMxMC4wMjk5IDE3LjAyIDkuNjM5ODcgMTYuNjMgOS42Mzk4NyAxNi4xNFYxMC40NUM5LjYzOTg3IDkuOTcgMTAuMDI5OSA5LjU3IDEwLjUwOTkgOS41N0MxMC45ODk5IDkuNTcgMTEuMzg5OSA5Ljk2IDExLjM4OTkgMTAuNDVWMTYuMTRaTTE0LjY0OTkgMTYuMTRDMTQuNjQ5OSAxNi42MiAxNC4yNTk5IDE3LjAyIDEzLjc2OTkgMTcuMDJDMTMuMjg5OSAxNy4wMiAxMi44ODk5IDE2LjYzIDEyLjg4OTkgMTYuMTRWMTAuNDVDMTIuODg5OSA5Ljk3IDEzLjI3OTkgOS41NyAxMy43Njk5IDkuNTdDMTQuMjQ5OSA5LjU3IDE0LjY0OTkgOS45NiAxNC42NDk5IDEwLjQ1VjE2LjE0Wk05LjM4OTg3IDVMOS41NDk4NyA0LjUyQzkuNjk5ODcgNC4wNiAxMC4xMjk5IDMuNzUgMTAuNjE5OSAzLjc1SDEzLjczOTlDMTQuMjE5OSAzLjc1IDE0LjY0OTkgNC4wNiAxNC44MDk5IDQuNTJMMTQuOTY5OSA1SDkuMzg5ODdaIiBmaWxsPSIjMjgzMDNGIi8+Cjwvc3ZnPg==",ratio:1}),cx=function(e,t){var n=e.message,r=e.messageId,i=e.date,a=rN(),o=rC(eu).authZoneConfig.zoneType,s=a_(),c=s.resendMessage,u=s.resendImageMessage,d=s.sendFileMessage,f=function(){a(K(!1)),a(t1(void 0))},g=function(){var t=tD(e);t&&c(t,n.replyId,null==r?void 0:r.toString(),{value:null==n?void 0:n.value,messageType:n.type}),n.type===ex.FileDoc&&n.fileId&&(d(n.fileId,e,!0),rE(aL.FIlE,o)),n.type===ex.Img&&n.fileId&&n.filePreviewId&&(u({imageId:n.fileId,imagePreviewId:n.filePreviewId},e.messageId),rE(aL.IMAGE,o)),f(),ro(o,"отправить еще раз")},m=function(){a(t$({id:r,date:i})),f(),ro(o,"удалить")},p=function(){var t=tD(e);t&&cT(t),f()},v=(0,l.useMemo)(function(){var t=[{label:"отправить еще раз",onClick:g,icon:c_},{label:"удалить",status:"alert",onClick:m,icon:cj}],n=e.message.type===ex.Img&&!e.message.fileId&&!e.message.filePreviewId,r=e.message.type===ex.FileDoc&&!e.message.fileId;return(n||r)&&t.splice(0,1),t},[g]);return{menu:(0,l.useMemo)(function(){return[].concat((0,h.A)((s4.REJECTED,[])),[{icon:cS,label:"скопировать",onClick:p}])},[r,n.content,t]),rejectMenu:v}},cL=function(e,t,n){var r=(0,l.useState)(0),i=(0,c.A)(r,2),a=i[0],o=i[1],s=(0,l.useState)({top:0,left:0}),u=(0,c.A)(s,2),d=u[0],f=u[1],g=(0,p.sn)()?92:76,m=(0,l.useRef)(null),v=(0,l.useRef)(null),h=(0,l.useRef)(null),y=iZ(),b=y.containerRef,w=y.scrollRef,M=y.containerHeight,E=y.scrollHeight;return(0,l.useLayoutEffect)(function(){if(!e||!w.current||!b.current||!m.current){o(0);return}var r,i,a=m.current.offsetTop-w.current.scrollTop,s=m.current.offsetHeight+((null===(r=v.current)||void 0===r?void 0:r.offsetHeight)||0)+((null==t?void 0:t.reason)==="reply"?0:8)+16;o(w.current.offsetHeight-s-a-g);var c=(null===(i=h.current)||void 0===i?void 0:i.offsetLeft)||0;f({top:m.current.offsetHeight+8,left:"main"===n?Math.min(m.current.offsetWidth-c,m.current.offsetWidth-200):c})},[m,M,v,w,e,h,null==t?void 0:t.reason,E]),{menuOffset:d,messageRef:m,transform:a,menuRef:v,wrapperRef:h}},cz=n(89063),cP=n(19372),cR=["className"],cU=M("loader",{loader:"MNk7t"}),cY=function(e){var t=e.className,n=(0,u.A)(e,cR);return d().createElement("div",(0,o.A)({className:cU(null,[t])},n),d().createElement(cP.Z,{color:"contentPlaceholder",size:"m"}))},cB=function(e){var t=iX().refs,n=iZ().scrollRef;return(0,l.useCallback)(function(){if(e){var r=t[e.message.messageId];r.current&&n.current&&n.current.scrollTo({top:r.current.offsetTop-n.current.offsetHeight+r.current.offsetHeight+16,behavior:"smooth"})}},[e,t])};function cH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cV=(0,P.zD)("file/generateFile",function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r,i,a,o,s,c;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.message,a=n.dispatch,o=n.rejectWithValue,e.prev=2,e.next=5,eJ(r);case 5:return s=e.sent,c=URL.createObjectURL(s),a(tJ({id:i.messageId,date:i.date,messageStatus:ej.delivered,message:{fileUrl:c}})),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",o(eK(e.t0)));case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}()),cG=(0,P.zD)("file/generateFile",function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r,i,a,o,c,u,l,d,f,g;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.url,a=t.message,o=n.dispatch,c=n.rejectWithValue,u=null===(r=a.message)||void 0===r?void 0:r.filePreviewUrl,e.prev=3,o(tJ({id:a.messageId,date:a.date,messageStatus:ej.download})),e.next=7,eJ(i);case 7:return l=e.sent,e.next=10,ak(l);case 10:return d=e.sent,f=URL.createObjectURL(l),g=u?"fileUrl":"filePreviewUrl",o(tJ({id:a.messageId,date:a.date,messageStatus:ej.delivered,message:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cH(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,s.A)({},g,f),u?{imageSettings:d}:{})})),e.abrupt("return",f);case 17:return e.prev=17,e.t0=e.catch(3),o(tJ({id:a.messageId,date:a.date,messageStatus:u?ej.failed:ej.refresh})),e.abrupt("return",c(eK(e.t0)));case 21:case"end":return e.stop()}},e,null,[[3,17]])}));return function(t,n){return e.apply(this,arguments)}}()),cZ=(0,l.createContext)(function(){}),cF=function(e){var t=e.children,n=rN(),r=(0,id.V)(rC(af).map(function(e){return e.messageId})),i=(0,l.useCallback)(function(e){r.current.includes(e)&&n(t9(e))},[]);return d().createElement(cZ.Provider,{value:i},t)},cW=["className","onClick","buttonLabel"],cQ=M("refresh-button",{"refresh-button":"qQf7m"}),cq=function(e){var t=e.className,n=e.onClick,r=e.buttonLabel,i=(0,u.A)(e,cW),a=(0,ig._)(),s=(0,c.A)(a,2),l=s[0],f=s[1];return d().createElement(c_,(0,o.A)({},i,{"aria-label":r,className:cQ(null,[t]),color:l?"secondary-invert":"primary-invert",onClick:n,onMouseEnter:f.on,onMouseLeave:f.off,tagName:"button",type:"button"}))},cK=(0,ng.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDNDNyAzIDMgNyAzIDEyQzMgMTcgNyAyMSAxMiAyMUMxNyAyMSAyMSAxNyAyMSAxMkMyMSA3IDE3IDMgMTIgM1pNMTIgMTkuM0M4IDE5LjMgNC44IDE2IDQuOCAxMkM0LjggOCA4IDQuOCAxMiA0LjhDMTYgNC44IDE5LjMgOC4xIDE5LjMgMTIuMUMxOS4zIDE2IDE2IDE5LjMgMTIgMTkuM1oiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZD0iTTE1IDExLjFIMTIuOVY3QzEyLjkgNi41IDEyLjUgNi4xIDEyIDYuMUMxMS41IDYuMSAxMS4xIDYuNSAxMS4xIDdWMTEuOEMxMS4xIDEyLjQgMTEuNiAxMi45IDEyLjIgMTIuOUgxNUMxNS41IDEyLjkgMTUuOSAxMi41IDE1LjkgMTJDMTUuOSAxMS41IDE1LjUgMTEuMSAxNSAxMS4xWiIgZmlsbD0iIzI4MzAzRiIvPgo8L3N2Zz4K"}),cJ=(0,ng.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS4zOTk4IDYuMzEwMzFDMTUuMDA5OCA2LjAyMDMxIDE0LjQ1OTggNi4xMDAzMSAxNC4xNjk4IDYuNDgwMzFMNi40ODk4MyAxNi42NTAzTDYuMzA5ODMgMTYuNjcwM0wzLjQyOTgzIDE0LjMzMDNDMy4wNDk4MyAxNC4wMjAzIDIuNDk5ODMgMTQuMDgwMyAyLjE5OTgzIDE0LjQ1MDNDMS44OTk4MyAxNC44MjAzIDEuOTQ5ODMgMTUuMzgwMyAyLjMyOTgzIDE1LjY4MDNMNS4yMTk4MyAxOC4wMzAzQzUuNTU5ODMgMTguMzEwMyA1Ljk2OTgzIDE4LjQ1MDMgNi4zOTk4MyAxOC40NTAzQzYuNDc5ODMgMTguNDUwMyA2LjU0OTgzIDE4LjQ1MDMgNi42Mjk4MyAxOC40NDAzQzcuMTM5ODMgMTguMzgwMyA3LjU4OTgzIDE4LjEyMDMgNy44OTk4MyAxNy43MTAzTDE1LjU3OTggNy41NDAzMUMxNS44NTk4IDcuMTUwMzEgMTUuNzg5OCA2LjYwMDMxIDE1LjM5OTggNi4zMTAzMVoiIGZpbGw9IiMyODMwM0YiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMi41NDk4IDYuMTkwMzFDMjIuMTY5OCA1Ljg5MDMxIDIxLjYxOTggNS45NTAzMSAyMS4zMTk4IDYuMzIwMzFMMTMuMzM5OCAxNi4yMzAzQzEzLjI5OTggMTYuMjgwMyAxMy4yMTk4IDE2LjI5MDMgMTMuMTU5OCAxNi4yNTAzTDExLjY0OTggMTUuMDIwM0wxMC41NDk4IDE2LjM4MDNMMTIuMDU5OCAxNy42MTAzQzEyLjg2OTggMTguMjcwMyAxNC4wNDk4IDE4LjE0MDMgMTQuNjk5OCAxNy4zMzAzTDIyLjY3OTggNy40MjAzMUMyMi45ODk4IDcuMDUwMzEgMjIuOTI5OCA2LjUwMDMxIDIyLjU0OTggNi4xOTAzMVoiIGZpbGw9IiMyODMwM0YiLz4KPC9zdmc+Cg=="}),cX=["date","className","withIcon","view","side","stage"],c$=M("date-block",{"date-block":"U64Z4","date-block_side_main":"n55jq","date-block_view_block":"saL1c","date-block_view_img-block":"QjGu9"}),c0=(0,s.A)((0,s.A)((0,s.A)((0,s.A)((0,s.A)({},s4.PENDING,cK),s4.READED,cK),s4.SUBMITED,cJ),s4.UNKNOWN,null),s4.REJECTED,null),c1=function(e){var t=e.date,n=e.className,r=e.withIcon,i=e.view,a=e.side,s=void 0===a?"main":a,c=e.stage,f=void 0===c?s4.UNKNOWN:c,g=(0,u.A)(e,cX),m=c0[f],p=(0,l.useMemo)(function(){return t?(0,s0.A)(new Date(t),"HH:mm"):null},[t]);return d().createElement(nf.E,(0,o.A)({align:"right",className:c$({view:void 0===i?"inside":i,side:s},[n]),color:"main"===s?"primary":"tertiary",tagName:"time",variant:"caption-medium"},g),p,(void 0===r||r)&&m&&d().createElement(m,{color:"main"===s?"primary":"tertiary",size:"xs"}))},c4=["className","reply","onReplyClick","onClick","side"],c2=M("reply",{reply:"ZOqV6",reply_side_main:"pikDd",reply_side_opposite:"bwLnx",reply__text:"WgXaC"}),c6=function(e){var t,n=e.className,r=e.reply,i=e.onReplyClick,a=e.onClick,s=e.side,c=(0,u.A)(e,c4),l=r.author,f=r.message;return d().createElement("div",(0,o.A)({className:c2({side:s},[n]),onClick:function(e){null==a||a(e),null==i||i(e)}},c),(null==l?void 0:l.name)&&d().createElement(nf.E,{className:c2("name"),color:"primary-invert",variant:"body-accent-small"},l.name),d().createElement(nf.E,{className:c2("text"),color:"primary-invert",variant:"body-small"},null===(t=tD(f))||void 0===t?void 0:t.replace(/<[^>]*>?/gm," ")))},c3=["className","messageId","zoneType"],c5=M("reload-indicator",{"reload-indicator":"ifewg"}),c9=(0,ng.Y)({ratio:1,url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41NCAxNS4yMDI1TDE1LjM3IDUuMTQyNUMxNC44MiA0LjA3MjUgMTMuODcgMy4zMjI1IDEyLjc2IDMuMDgyNUMxMi4yNiAyLjk3MjUgMTEuNzUgMi45NzI1IDExLjI1IDMuMDgyNUMxMC4xNCAzLjMyMjUgOS4xOCA0LjA3MjUgOC42MyA1LjE0MjVMMy40NiAxNS4yMDI1QzMuMTYgMTUuNzgyNSAzIDE2LjQzMjUgMyAxNy4wOTI1QzMgMTkuMjUyNSA0LjYyIDIxLjAwMjUgNi42MiAyMS4wMDI1SDE3LjM4QzE5LjM4IDIxLjAwMjUgMjEgMTkuMjUyNSAyMSAxNy4wOTI1QzIxIDE2LjQzMjUgMjAuODQgMTUuNzgyNSAyMC41NCAxNS4yMDI1Wk0xMi44OCAxNy4zMDI1QzEyLjg4IDE3Ljc4MjUgMTIuNDkgMTguMTgyNSAxMiAxOC4xODI1QzExLjUxIDE4LjE4MjUgMTEuMTIgMTcuNzkyNSAxMS4xMiAxNy4zMDI1VjE2LjgxMjVDMTEuMTIgMTYuMzMyNSAxMS41MSAxNS45MzI1IDEyIDE1LjkzMjVDMTIuNDkgMTUuOTMyNSAxMi44OCAxNi4zMjI1IDEyLjg4IDE2LjgxMjVWMTcuMzAyNVpNMTIuODggMTMuODkyNUMxMi44OCAxNC4zNzI1IDEyLjQ5IDE0Ljc3MjUgMTIgMTQuNzcyNUMxMS41MSAxNC43NzI1IDExLjEyIDE0LjM4MjUgMTEuMTIgMTMuODkyNVYxMC4wMDI1QzExLjEyIDkuNTIyNSAxMS41MSA5LjEyMjUgMTIgOS4xMjI1QzEyLjQ5IDkuMTIyNSAxMi44OCA5LjUyMjUgMTIuODggMTAuMDAyNVYxMy44OTI1WiIgZmlsbD0iIzI4MzAzRiIvPgo8L3N2Zz4K"}),c8=function(e){var t=e.className,n=e.messageId,r=e.zoneType,i=(0,u.A)(e,c3),a=rC(ab),s=rN();return(0,l.useEffect)(function(){n1(),rr(r)},[]),(0,l.useEffect)(function(){(null==a?void 0:a.id)===n&&(null==a?void 0:a.reason)==="error"&&ra(r)},[a]),d().createElement(c9,(0,o.A)({"aria-label":"Меню отправки сообщения",className:c5(null,[t]),color:"error",onClick:function(){s(t1({id:n,reason:"error"})),s(K(!0)),rn(r)},tagName:"button",type:"button"},i))},c7=["className","stage","side","date","reply","withDate","dateView","offset","isLoading","author","children","withUsername","additionalControls","bordered","zoneType","withBackground","message"],ue=M("wrapper",{wrapper:"kx8MD",wrapper_side_main:"YTvbi",wrapper_side_opposite:"jhYfR",wrapper__reply:"dxbXf",wrapper__username:"pMglA",wrapper__content:"AEfjo",wrapper__content_isLoading:"gwom4",wrapper__content_side_main:"py4Vv",wrapper__content_filled:"mlnoJ",wrapper__content_side_opposite:"TmRCj",wrapper__content_offset_small:"oe9dF",wrapper__content_offset_medium:"t5apH",wrapper__content_offset_none:"emR8X",wrapper__indicator:"C8fBy",wrapper__date:"bqK8L",wrapper__date_view_inside:"aVxjt",wrapper__date_view_block:"a0Hw2","wrapper__date_view_img-block":"aEYmH"}),ut=(0,l.forwardRef)(function(e,t){var n,r=e.className,i=e.stage,a=void 0===i?s4.UNKNOWN:i,s=e.side,c=void 0===s?"opposite":s,f=e.date,g=e.reply,m=e.withDate,p=e.dateView,v=void 0===p?"inside":p,h=e.offset,y=e.isLoading,b=e.author,w=e.children,M=e.withUsername,E=e.additionalControls,A=e.bordered,O=e.zoneType,I=e.withBackground,N=e.message,C=(0,u.A)(e,c7),k=(0,l.useRef)(null),D=(0,l.useRef)(null),T=(0,cz.W)(D),S=(0,l.useContext)(cZ);(0,l.useEffect)(function(){T&&S(N.messageId)},[T]);var _=cB(g),j=rN(),x=function(){j(K(!0)),j(t1({id:N.messageId,reason:"menu"}))},L=(n=(0,eM.A)(eA().mark(function e(){var t;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=tS(N).fileUrl)){e.next=6;break}return e.next=4,j(cG({url:t,message:N}));case 4:rA(N.message.type===ex.Img?aL.IMAGE:aL.FIlE);case 6:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),z="opposite"===c&&N.message.type!==ex.CAPTCHA&&M&&!!(null!=b&&b.name),P=N.messageStatus===ej.refresh&&tT(N.message.type);return d().createElement("div",{className:ue({side:c}),ref:(0,nc.k)([t,D])},d().createElement("div",(0,o.A)({className:ue("content",{offset:void 0===h?"small":h,side:c,bordered:void 0===A||A,filled:void 0===I||I,isLoading:y},[r]),onContextMenu:function(e){tT(N.message.type)||(e.preventDefault(),x())},onKeyDown:function(e){("Enter"===e.code||"Space"===e.code)&&(e.stopPropagation(),e.preventDefault(),x())},ref:k},C),z&&d().createElement(nf.E,{className:ue("username"),color:"tertiary",variant:"caption-medium"},b.name),y?d().createElement(cY,null):d().createElement(d().Fragment,null,g&&d().createElement(c6,{className:ue("reply"),onReplyClick:_,reply:g,side:c}),w,a!==s4.REJECTED&&(void 0===m||m)&&d().createElement(c1,{className:ue("date",{view:v}),date:f,side:c,stage:a,view:v}))),E,a===s4.REJECTED&&N.messageStatus!==ej.refresh&&d().createElement(c8,{className:ue("indicator"),messageId:N.messageId,zoneType:O}),P&&d().createElement(cq,{buttonLabel:"Повторить загрузку файла",onClick:L}))}),un=["side","stage","className","additionalControls","bordered","dateView","isLoading","message","withUsername","offset","withBackground","withDate","reply","zoneType","wrapperProps","author"],ur=function(e){var t=e.bordered,n=e.withDate,r=e.withBackground,i=e.dateView,a=e.offset,s=e.wrapperClassName,c=void 0===s?"":s;return function(e){return(0,l.forwardRef)(function(s,l){var f,g=s.side,m=void 0===g?"opposite":g,p=s.stage,v=s.className,h=s.additionalControls,y=s.bordered,b=s.dateView,w=s.isLoading,M=s.message,E=s.withUsername,A=s.offset,O=s.withBackground,I=s.withDate,N=s.reply,C=s.zoneType,k=s.wrapperProps,D=s.author,T=(0,u.A)(s,un);return d().createElement(ut,(0,o.A)({additionalControls:h,author:D,bordered:null!==(f="function"==typeof t?t(m):t)&&void 0!==f?f:y,className:[c,void 0===v?"":v].join(" "),date:M.date,dateView:i||b,isLoading:w,message:M,offset:a||A,ref:l,reply:N,side:m,stage:p,withBackground:null!=r?r:O,withDate:null!=n?n:I,withUsername:E,zoneType:C},void 0===k?{}:k),d().createElement(e,(0,o.A)({message:M,side:m,stage:p},T)))})}},ui=function(){return null},ua=M("cells",{cells:"uXrWS","cells__image-wrapper":"LENyK","cells__image-wrapper_isImage":"q6r20",cells__image:"rRLG",cells__text:"AWmgM"}),uo=ur({offset:"medium",wrapperClassName:ua()})(function(e){var t=e.items,n=e.description,r=tD(e.message);return d().createElement(d().Fragment,null,r&&d().createElement(nf.E,{className:ua("text"),variant:"body-small"},r),null==t?void 0:t.map(function(e,n){return d().createElement(ui,(0,o.A)({},e,{key:ua("item",{i:n}),withDivider:n!==t.length-1}))}),n&&d().createElement(nf.E,{className:ua("text"),color:"tertiary",variant:"body-paragraph-small"},n))}),us=ur({bordered:!0,dateView:"block",offset:"none",wrapperClassName:M("location",{location:"MxW2R"})()})(function(){return d().createElement("div",null)}),uc=n(65393),uu=function(e){var t,n,r=e.message,i=e.setImgUrl,a=e.setImgPreview,o=rN(),s=rC(eu).authZoneConfig.zoneType,c=r.messageStatus===ej.refresh,u=r.message,d=u.imageSettings,f=u.fileUrl,g=u.filePreviewUrl,m=r.messageStatus===ej.download||r.messageStatus===ej.sent,p=tS(r),v=(t=(0,eM.A)(eA().mark(function e(){var t,n;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g?null==p?void 0:p.filePreviewUrl:null==p?void 0:p.fileUrl){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,o(cG({url:t,message:r}));case 5:return n=e.sent,e.abrupt("return",n.payload);case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),h=(n=(0,eM.A)(eA().mark(function e(){var t;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:if(rw(aL.IMAGE,s),!(null!=p&&p.filePreviewUrl&&null!=p&&p.fileUrl&&(!f||!g))){e.next=10;break}return e.next=6,v();case 6:t=e.sent,i({fileUrl:f||!g&&t,filePreviewUrl:g||g&&t,imageSettings:d}),e.next=11;break;case 10:i({fileUrl:f,filePreviewUrl:g,imageSettings:d});case 11:g&&a({isImgPreviewOpen:!0,type:at.show});case 12:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)});return(0,l.useEffect)(function(){r.messageStatus===ej.download&&v()},[]),{filePreviewUrl:g,isLoading:m,isRefresh:c,handleCLick:h}},ul=M("image",{image__wrapper:"cuqo3",image__wrapper_loading:"LBKfK",image__empty_loading:"pHYUL",image__spinner:"aqpRM",image__image:"WLOit",image__image_loading:"YzIEO",image__empty:"n3IOR",image__empty_refresh:"lM8dz","loader-animation":"voQd5"}),ud=function(){return d().createElement(uc.y,{className:ul("spinner"),view:"yellow-white"})},uf=function(e){return e.isRefresh?d().createElement(nf.E,{align:"center",color:"secondary",size:"xs"},"не удалось<br/>загрузить фото"):d().createElement(C.xsz,{className:ul("empty_icon"),color:"primary-invert",size:"m"})},ug=(0,rW.Zz)((0,f.Ng)(null,function(e){return{setImgPreview:function(t){return e(t4(t))},setImgUrl:function(t){return e(r3(t))}}}),ur({bordered:!0,dateView:"img-block",offset:"none",wrapperClassName:ul()}))(function(e){var t=uu({message:e.message,setImgPreview:e.setImgPreview,setImgUrl:e.setImgUrl}),n=t.filePreviewUrl,r=t.handleCLick,i=t.isLoading,a=t.isRefresh;return d().createElement("div",{className:ul("wrapper",{loading:i}),onClick:r},i&&d().createElement(ud,null),n?d().createElement("img",{alt:"",className:ul("image",{loading:i}),src:n}):d().createElement("div",{className:ul("empty",{loading:i,refresh:a&&!!n})},!i&&d().createElement(uf,{isRefresh:a})))}),um=function(e){if(e)return"".concat(Math.ceil(e/1024)," Кб")},up=function(e){if(!e)return{name:"",type:""};var t=e.lastIndexOf(".");return{name:e.slice(0,t),type:e.slice(t+1)}},uv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.style.display="none",n.click(),n.remove()};function uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uh(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ub=function(e){var t,n=rN(),r=rC(eu).authZoneConfig.zoneType,i=tS(e),a=i.name,o=i.size,s=e.message.name||a,u=um(e.message.size||o),d=(0,l.useState)(!1),f=(0,c.A)(d,2),g=f[0],m=f[1],p=!e.message.fileUrl,v=e.messageStatus===ej.sent||g,h=e.message.fileUrl&&s?{download:a,href:e.message.fileUrl}:{},y=(t=(0,eM.A)(eA().mark(function t(){var i,a;return eA().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(rw(aL.FIlE,r),!e.message.fileUrl){t.next=4;break}return uv(e.message.fileUrl,s),t.abrupt("return");case 4:if(!((i=tS(e).fileUrl)&&!e.message.fileUrl)){t.next=12;break}return m(!0),t.next=9,n(cV({url:i,message:e}));case 9:a=t.sent,(cV.rejected.match(a)||cV.fulfilled.match(a))&&m(!1),cV.fulfilled.match(a)&&uv(a.payload,s);case 12:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)});return uy(uy({},up(s)),{},{size:u,isLoading:v,handleCLick:y,configDownload:h,isDownloadStep:p})},uw=M("file",{file__wrapper:"sUNNg",file__icon:"qC3hI",file__icon_loading:"wcH5U",file__info:"Q2hMw",file__text:"dIIY0",file__name:"IhhLi",file__size:"bVXxb","loader-animation":"c4IzR"}),uM=ur({bordered:!0,offset:"none",wrapperClassName:uw()})(function(e){var t=e.message,n=e.side,r=ub(t),i=r.name,a=r.size,o=r.type,s=r.isLoading,c=r.isDownloadStep,u=r.handleCLick;return d().createElement("div",{className:uw("wrapper"),onClick:u},d().createElement("div",{className:uw("icon",{loading:s})},s?d().createElement(uc.y,{view:"dark-white"}):c?d().createElement(C.xsz,null):d().createElement(C.Vdr,null)),d().createElement("div",{className:uw("info")},d().createElement("div",{className:uw("text")},d().createElement(nf.E,{className:uw("name"),color:"main"===n?"primary":"primary-invert",variant:"body-small"},i),d().createElement(nf.E,{color:"main"===n?"primary":"primary-invert",variant:"body-small"},".",o)),d().createElement(nf.E,{className:uw("size"),tagName:"span",variant:"body-small"},a)))}),uE=M("message-text",{"message-text":"Q5yDq","message-text_side_main":"RUSnV","message-text_side_opposite":"gWlLW","message-text__text":"nRseA"}),uA=ur({bordered:function(e){return"opposite"===e},withDate:!1})(function(e){var t=e.className,n=e.message,r=e.side,i=e.stage;return d().createElement("p",{className:uE({side:r},[t])},d().createElement(nf.E,{className:uE("text"),color:"main"===r?"primary":"primary-invert","data-is-text":!0,tagName:"span",variant:"body-small"},tD(n)),d().createElement(c1,{date:n.date,side:r,stage:i,view:"inside"}))}),uO=M("captcha",{captcha:"VDlHi"}),uI=["activeCaptchaMessageId","isValidating","message","recreateCount","processedCaptchas","targetCaptcha","onClick","className","dispatch"],uN=(0,f.Ng)(function(e){return{activeCaptchaMessageId:oJ(e).activeCaptchaMessageId,isValidating:oJ(e).validateStatus,recreateCount:o1(e),processedCaptchas:o4(e),targetCaptcha:o$(e)}})(function(e){var t=e.activeCaptchaMessageId,n=e.isValidating,r=e.message.messageId,i=e.recreateCount,a=e.processedCaptchas,s=e.targetCaptcha,c=e.onClick,l=(e.className,e.dispatch,(0,u.A)(e,uI)),f=a.includes(r),g=iE().stage,m=sx(),p=m.captchaStage,v=m.captchaUpdate,h=g===il.CAPTCHA_NEEDED&&"blocked"===p;return f||i>=5||n===ew.loading||r!==t||!h&&!("retry"===p||"start"===p)?null:d().createElement(cq,(0,o.A)({buttonLabel:"Отправить капчу повторно",onClick:function(e){null==c||c(e),v((null==s?void 0:s.captchaId)||r)}},l))}),uC=["message"],uk=["message","reply"],uD=ur({withDate:!1})(function(e){var t=e.message,n=t.message.content,r=t.captcha;return r?d().createElement("img",{alt:"Капча",className:uO(),src:r}):d().createElement(nf.E,{color:"primary-invert",variant:"body-small"},n)}),uT=function(e){var t=e.message,n=(0,u.A)(e,uC),r=rC(o4).includes(t.messageId);return d().createElement(uD,(0,o.A)({additionalControls:d().createElement(uN,{message:t}),isLoading:r,message:t,offset:r||!t.captcha?"small":"none"},n))},uS=function(e){var t=e.message,n=e.reply,r=(0,u.A)(e,uk),i=t.message.type;return i===ex.File?d().createElement(uo,(0,o.A)({message:t,reply:n},r)):i===ex.Geolocation?d().createElement(us,(0,o.A)({lat:0,lng:0,message:t,reply:n},r)):i===ex.CAPTCHA?d().createElement(uT,(0,o.A)({message:t},r)):i===ex.Img?d().createElement(ug,(0,o.A)({message:t,withDate:t.messageStatus!==ej.sent},r)):i===ex.FileDoc?d().createElement(uM,(0,o.A)({message:t},r)):d().createElement(uA,(0,o.A)({message:t,reply:n},r))},u_=["green","teal","blue","violet","magenta","red","orange","yellow"],uj=function(e){var t;return{image:null==e?void 0:e.image,name:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"Бот",color:(0,sz.isNil)(null==e?void 0:e.color)?null!=e&&e.name?u_[e.name.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0)%9]:void 0:u_[Number(e.color)]}},ux=["message","side","author","withRejectedMessage","rejectedMessage","stage","withAvatar","className","reply","withUsername"],uL=M("message",{message:"VckMM",message_leftOffset:"ZukdU",message__menu:"Ic6Xm",message__container:"BqIXG",message__image:"c87zA",message__image_view_default:"afuvz",message_side_main:"pCvrx",message_side_opposite:"YJGEc",message__wrapper:"qjiHG",message__wrapper_side_main:"wg8yR",message__wrapper_side_opposite:"aCiR7",message__wrapper_text:"mJAUV",message__username:"b2RYH",message__description:"ebxB1"}),uz=(0,l.forwardRef)(function(e,t){var n=e.message,r=e.side,i=void 0===r?"main":r,a=e.author,c=(e.withRejectedMessage,e.rejectedMessage,e.stage),l=void 0===c?s4.REJECTED:c,f=e.withAvatar,m=e.className,p=e.reply,v=e.withUsername,h=(0,u.A)(e,ux),y="opposite"===i&&f,b="opposite"===i&&!f,w=cx(n,l),M=rC(ab),E=(null==M?void 0:M.id)===n.messageId,A=cL(E,M,i),O=A.messageRef,I=A.transform,N=A.menuRef,C=A.menuOffset,k=A.wrapperRef,D=n.message.type!==ex.Img,T=uj(a);return d().createElement(g.P.div,(0,o.A)({animate:{y:I,zIndex:E?3:0,pointerEvents:E?"none":"all"},className:uL({side:i,leftOffset:b},[m]),ref:(0,nc.k)([t,O]),transition:{y:{duration:.2}}},h),y&&d().createElement(rY.e,(0,o.A)({className:uL("image",{view:T.color||"default"})},T)),d().createElement("div",{className:uL("wrapper",{side:i,text:D}),ref:k},d().createElement(uS,{author:a,message:n,reply:p,side:i,stage:l,withUsername:v})),E&&M.reason&&"reply"!==M.reason&&d().createElement("div",{className:uL("container")},d().createElement(rF,{className:uL("menu"),items:"error"===M.reason?w.rejectMenu:w.menu,ref:N,style:(0,s.A)((0,s.A)({},"--offset-top","".concat(C.top,"px")),"--offset-left","".concat(C.left,"px")),theme:"dark",view:"default"})))}),uP=["className","date","list","dividerRef"],uR=["message"],uU=M("message-group",{"message-group":"dfwxg","message-group__date":"vdnJx"}),uY=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.date,i=e.list,a=e.dividerRef,s=(0,u.A)(e,uP),c=iX().refs;return d().createElement("section",(0,o.A)({className:uU(null,[n]),ref:t},s),d().createElement(oq,{className:uU("date"),dateTime:r,label:r,ref:a,tagName:"time",view:"accent"}),i.map(function(e){var t=e.message,n=(0,u.A)(e,uR);return d().createElement(uz,(0,o.A)({key:t.messageId,message:t,ref:c[t.messageId]},n))}))}),uB=M("skeleton",{skeleton:"exo3g",skeleton_side_main:"WeaOR",skeleton_side_opposite:"hHRRl",skeleton__avatar:"USVwN","skeleton-animation":"c6119",skeleton__message:"ux6Ao",skeleton__message_side_main:"yBxKk",skeleton__message_side_opposite:"WQ1Av"}),uH=function(e){var t=e.side,n=void 0===t?"main":t;return d().createElement("div",{className:uB({side:n})},"opposite"===n&&d().createElement("div",{className:uB("avatar")}),d().createElement("div",{className:uB("message",{side:n}),style:(0,s.A)({},"--message-width","".concat(200+50*Math.random(),"px"))}))},uV=M("skeleton-list",{"skeleton-list":"tHyWH"}),uG=function(){return d().createElement("div",{className:uV()},Array.from({length:10}).map(function(e,t){return d().createElement(uH,{key:t,side:t%2==0?"main":"opposite"})}))},uZ=["className","isLoading","sortType","searchString","isEmptyPopularBtn","welcomeText","dispatch","isLastSessionFinished","systemProblems"],uF=M("message-list",{"message-list":"b3z05","message-list_empty":"QD3wA","message-list__button":"ABFcr","message-list__loader":"qjqCW","message-list__actions":"oS2Qj"}),uW=(0,f.Ng)(function(e){var t;return{isLoading:al(e),searchString:aE(e),sortType:aM(e),welcomeText:aZ(e),systemProblems:aG(e),isLastSessionFinished:ao(e),isEmptyPopularBtn:!(aF(e).length||null!==(t=eg(e))&&void 0!==t&&t.length)}})(function(e){var t=e.className,n=e.isLoading,r=(e.sortType,e.searchString),i=e.isEmptyPopularBtn,a=e.welcomeText,s=(e.dispatch,e.isLastSessionFinished),c=e.systemProblems,f=(0,u.A)(e,uZ),g=ce(),m=cr(g),p=m.dividerRefs,v=m.sessionSectionRefs,h=iZ(),y=h.containerRef,b=h.onListMount,w=aU(),M=w.addNotification,E=w.removeNotification,A=!n&&0===g.length&&!(null!=r&&r.trim()),O=s&&i&&A;return(0,l.useEffect)(function(){n||b()},[n]),(0,l.useEffect)(function(){s&&null!=c&&c.content?M({key:aB,label:c.content,mode:"button",view:"warning"}):E(aB)},[s,c]),d().createElement("section",(0,o.A)({className:uF({empty:O},[t]),ref:y},f),n?d().createElement(uG,null):d().createElement(d().Fragment,null,g.map(function(e,t){return d().createElement(uY,(0,o.A)({dividerRef:p[t],key:uF("group",{i:t}),ref:v[t]},e))}),A&&d().createElement(oq,{label:a||"В любой непонятной ситуации пишите сюда",view:"default"})),d().createElement(sK,{className:uF("actions")}),d().createElement(cD,null))}),uQ=n(26986),uq={reconnectCount:0,socketStatus:ia.idle},uK=(0,P.Z0)({name:"socket",initialState:uq,reducers:{setReconnectCount:function(e,t){e.reconnectCount=t.payload},setSocketStatus:function(e,t){e.socketStatus=t.payload}}}),uJ=uK.actions,uX=uJ.setReconnectCount,u$=uJ.setSocketStatus,u0=function(){var e=rC(eh),t=rC(ev),n=rC(em).zoneType,r=void 0===n?"unauthorized":n,i=sx(),a=i.captchaStage,o=i.handleChangeStage,s=ip(),c=rC(ey),u=iE().changeStage,d=rN(),f=(0,l.useCallback)(function(){if(d(en(c+1)),s){if(d(er()),e===V.CONTENT_LOAD||e===V.HISTORY_LOAD){d(et(!1)),u(il.LOAD_DATA);return}if(e===V.VALIDATE_CAPTCHA){u(il.CAPTCHA_NEEDED);return}if(e===V.REFRESH_TOKEN){o("start"),u(il.CAPTCHA_NEEDED);return}if(e===V.WEBSOCKET_CONNECTION){d(uX(0)),u(il.CONNECTING);return}"authorized"===r||"end"===a?(d(et(!1)),u(il.LOAD_DATA)):u(il.CAPTCHA_NEEDED)}},[e,a,r,s]);return(0,l.useEffect)(function(){c>=10&&(d($(H.BLOCK)),d(ee(V.UNKNOWN)))},[c]),(0,l.useMemo)(function(){var e;return{content:(e=c>=10?H.BLOCK:t)===H.LOAD||e===H.OFFLINE?{icon:C.HGy,title:"ничего не загрузилось —\nобновите чат",subTitle:"&nbsp;",isOnlyTitle:!0}:e===H.ERROR?{icon:C.HGy,title:"у нас что-то сломалось",subTitle:"обновите чат или возвращайтесь\nчерез 15 минут"}:{icon:C.HGy,title:"что-то пошло не так",subTitle:"это временно, скоро всё наладим —\nзайдите позже"},onUpdateClick:f}},[t,c,f])},u1=["className"],u4=(0,I.G)("error-screen",{"error-screen":"V0Ru7","error-screen__screen":"Vmk27","error-screen__screen_only-title":"rTuB0"}),u2=function(e){var t=e.className,n=(0,u.A)(e,u1),r=rC(eu).authZoneConfig,i=rC(ev);(0,l.useEffect)(function(){n0(),rt(r.zoneType)},[]);var a=u0(),s=a.content,c=a.onUpdateClick;return d().createElement("section",(0,o.A)({className:u4(null,[t])},n),d().createElement(uQ._,(0,o.A)({className:u4("screen",{"only-title":!!(null!=s&&s.isOnlyTitle)}),invert:!0},s),i!==H.BLOCK&&d().createElement(T.$,{className:(0,m.X)("dark"),onClick:c,size:"m",view:"tertiary"},"обновить")))},u6=["className","children"],u3=M("header",{header:"Z23u2",header__container:"RKNwX"}),u5={enter:function(e){return{x:"main"===e?1e3:-1e3,opacity:0}},center:{zIndex:1,x:0,opacity:1},exit:function(e){return{zIndex:0,x:"main"!==e?1e3:-1e3,opacity:0}}},u9=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.children,i=(0,u.A)(e,u6),a=rC(aA)?"main":"search";return d().createElement("header",(0,o.A)({className:u3(null,[n]),ref:t},i),d().createElement(iU.N,{custom:a,initial:!1},d().createElement(g.P.div,{animate:"center",className:u3("container"),custom:a,exit:"exit",initial:"enter",key:a,ref:t,transition:{x:{duration:.5},opacity:{duration:.2}},variants:u5},r)))}),u8=n(65006),u7=(0,P.Z0)({name:"filters",initialState:{isFiltersEnabled:!1,isFiltersVisible:!1,sortType:"none"},reducers:{setIsFiltersVisible:function(e,t){var n=t.payload;e.isFiltersVisible=n},setSortType:function(e,t){var n=t.payload;e.sortType=n},setSearch:function(e,t){var n=t.payload;e.search=n}},extraReducers:function(e){e.addCase(e$.fulfilled,function(e,t){var n,r,i=t.payload;e.isFiltersEnabled=null!==(n=null===(r=i.data)||void 0===r||null===(r=r.FeatureTogglesWeb)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.FeatureTogglesWebSearchEnabled)&&void 0!==n&&n})}}),le=u7.actions,lt=le.setSortType,ln=le.setSearch,lr=le.setIsFiltersVisible,li=function(e,t){var n=(0,id.V)(e),r=(0,l.useRef)(null),i=function(){r.current&&clearTimeout(r.current)};return(0,l.useEffect)(function(){return function(){i()}},[t]),(0,l.useCallback)(function(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];i(),r.current=setTimeout(function(){r.current=null,"function"==typeof n.current&&n.current.apply(n,a)},t)},[t])},la=["clearFilters","setSearchString","cancel","searchString","className"],lo=(0,I.G)("search",{search:"sZlDC",search__input:"s3N75",search__button:"pDpJn"}),ls=(0,rW.Zz)((0,f.Ng)(function(e){return{searchString:aE(e),shouldRender:aA(e)}},function(e){return{clearFilters:function(){e(lt("none")),e(ln(void 0))},cancel:function(){return e(lr(!1))},setSearchString:function(t){return e(ln(t))}}}),(0,rQ.t)())(function(e){var t=e.clearFilters,n=e.setSearchString,r=e.cancel,i=e.searchString,a=e.className,s=(0,u.A)(e,la),f=(0,l.useState)(),g=(0,c.A)(f,2),m=g[0],p=g[1],v=li(n,600);return(0,l.useEffect)(function(){v((null==m?void 0:m.trim())!==""?m:void 0)},[m]),(0,l.useEffect)(function(){i&&null!=m&&m.includes(i)||p(null!=i?i:"")},[i]),d().createElement("div",(0,o.A)({className:lo(null,[a])},s),d().createElement(u8.L,{autoFocus:!0,className:lo("input"),onChange:p,onClear:t,value:m}),d().createElement(T.$,{className:lo("button"),mode:"inline",onClick:r},"отмена"))}),lc=(0,rW.Zz)((0,f.Ng)(function(e){return{iconLeft:ah(e)?C.gu7:C.maM,onlyIcon:!0,size:"m",view:"tertiary-invert"}},{onClick:function(){return function(e){e(function(e){e(t4({isImgPreviewOpen:!1,type:null})),e(r3(null))})}}}),(0,rQ.t)())(z),lu=["setVisible","isFiltersEnabled","isFiltersVisible","onClick"],ll=(0,f.Ng)(function(e){return{isFiltersEnabled:aw(e).isFiltersEnabled,isFiltersVisible:aA(e)}},function(e){return{setVisible:function(t){return e(lr(t))}}})(function(e){var t=e.setVisible,n=e.isFiltersEnabled,r=e.isFiltersVisible,i=e.onClick,a=(0,u.A)(e,lu);return n?d().createElement(z,(0,o.A)({},a,{"aria-label":"Открыть панель сортировки",form:"round",iconLeft:C.sAH,onClick:function(e){null==i||i(e),t(!r)},onlyIcon:!0,size:"m",view:"tertiary-invert"})):null}),ld=["title","className","children"],lf=(0,I.G)("title",{title:"GcRcs",title__title:"WpDYV",title__side:"rnEzR"}),lg=(0,I.G)("header-title",{"header-title_reverse":"pW7VP"}),lm=(0,rW.Zz)((0,f.Ng)(function(e,t){var n=av(e),r=am(e);return{children:t.children,title:r?"фото":"чат с поддержкой",className:"".concat(lg("",{reverse:n})),shouldRender:!aA(e)}}),rQ.t)(function(e){var t=e.title,n=e.className,r=e.children,i=(0,u.A)(e,ld);return d().createElement("div",(0,o.A)({className:lf(null,[n])},i),d().createElement("div",{className:lf("side")},r),d().createElement("div",{className:lf("title")},d().createElement(nf.E,{className:lf("header"),color:"primary-invert",variant:"body-medium"},t)),d().createElement("div",{className:lf("side")},d().createElement(ll,null)))}),lp=(0,I.G)("chat-header",{"chat-header":"o89TC","chat-header_preview":"ZblrV"}),lv=(0,f.Ng)(function(e){return{isImgPreviewOpen:am(e)}})(function(e){var t=e.isImgPreviewOpen;return d().createElement(u9,{className:lp("",{preview:t})},d().createElement(lm,null,d().createElement(d().Fragment,null,d().createElement(lc,{shouldRender:t}),d().createElement(rJ,{shouldRender:!t}))),d().createElement(ls,null))}),lh=["className","onChatOpen","dispatch","sessions","sortType","search"],ly=M("chat-window",{"chat-window":"D7m60","chat-window__container":"YrVlD","chat-window__container_windowBlocked":"JbLCX","chat-window__error":"BqoRb","chat-window__overlay":"aORG9","chat-window__form":"ISklv"}),lb=function(e){var t,n,r=e.children,i=e.lockScroll,a=iZ().scrollRef,o=rN(),c=rC(ed);return d().createElement("div",{className:ly("container",{windowBlocked:c||i}),ref:a},d().createElement(lv,null),r,d().createElement(oR,{className:ly("scroll")}),d().createElement(iU.N,{custom:c,initial:!1,mode:"wait"},c&&d().createElement(g.P.div,{animate:{opacity:1},"aria-hidden":"true",className:ly("overlay"),exit:{opacity:0},initial:{opacity:0},onClick:function(){o(K(!1)),o(t1(void 0))},style:(0,s.A)({},"--overlay-top","".concat(null!==(t=null===(n=a.current)||void 0===n?void 0:n.scrollTop)&&void 0!==t?t:0,"px"))})))},lw=(0,l.forwardRef)(function(e,t){var n=e.className,r=e.onChatOpen,i=e.dispatch,a=e.sessions,s=e.sortType,c=e.search,f=(0,u.A)(e,lh);(0,l.useEffect)(function(){return t_(r),function(){i(t5(ew.idle))}},[]);var g=iE().stage;return d().createElement("section",(0,o.A)({className:ly(null,[n]),ref:t},f),d().createElement(iJ,{search:c,sessions:a,sortType:s},d().createElement(cF,null,g===il.ERROR&&d().createElement(u2,{className:ly("error")}),d().createElement(lb,{lockScroll:g===il.ERROR},d().createElement(uW,null)),d().createElement(oj,{className:ly("form")}),d().createElement(oG,null))))}),lM=(0,f.Ng)(function(e){return{search:aE(e),sortType:aM(e),sessions:ai(e)}})(lw),lE=(0,l.createContext)([!1,function(){},!1]),lA=function(e){var t=(0,l.useContext)(lE),n=(0,c.A)(t,3),r=n[0],i=n[1],a=n[2],o=rC(eo),s=rN(),u=function(e){return s(q(e))};(0,l.useEffect)(function(){i(o)},[o]),(0,l.useEffect)(function(){a&&u(r)},[r]),(0,l.useEffect)(function(){"boolean"==typeof e&&(null==i||i(e),u(e))},[e])},lO=n(57349),lI={lock:function(e){setTimeout(function(){document.body.style.position="fixed",document.body.style.top="-".concat(e,"px")},200)},unlock:function(e){document.body.style.position="",document.body.style.top="",window.scrollTo(0,e||0)}},lN=function(e,t){var n=(0,lO.O)(),r=(0,l.useState)(!0),i=(0,c.A)(r,2),a=i[0],o=i[1],s=t&&n===nh.ios;(0,l.useEffect)(function(){var t=document.documentElement.scrollTop;return s&&(e?(lI.lock(t),o(!1)):a||lI.unlock(t)),function(){lI.unlock(t||0)}},[e,t,s])},lC=function(e){var t=e.socketRef,n=e.socketStatus,r=e.connect,i=e.config,a=rN(),o=ip(),s=iE(),c=s.stage,u=s.changeStage,d=a_(),f=d.resendMessage,g=d.resendImageMessage,m=d.sendFileMessage,p=rC(ic)||0,v=(0,id.V)(rC(as)),h=function(e){var t,n,r=e.message,a=e.messageId,o=tD(e);o&&f(o,r.replyId,null==a?void 0:a.toString(),{value:null==r?void 0:r.value,messageType:r.type}),r.type===ex.FileDoc&&r.fileId&&(m(r.fileId,e,!0),rE(aL.FIlE,null===(t=i.authZoneConfig)||void 0===t?void 0:t.zoneType)),r.type===ex.Img&&r.fileId&&r.filePreviewId&&(g({imageId:r.fileId,imagePreviewId:r.filePreviewId},e.messageId),rE(aL.IMAGE,null===(n=i.authZoneConfig)||void 0===n?void 0:n.zoneType))},y=function(){v.current.forEach(h)};return(0,l.useEffect)(function(){var e;return o&&c===il.CONNECTING&&(n===ia.idle&&r({onSuccess:y}),n===ia.closed&&p<=10&&(a(uX(p+1)),e=setTimeout(r,1e3*Number(!!p)))),function(){return clearTimeout(e)}},[n,o,c]),(0,l.useEffect)(function(){if(!o){var e;null===(e=t.current)||void 0===e||e.close()}return function(){var e;null===(e=t.current)||void 0===e||e.close()}},[o]),(0,l.useEffect)(function(){if(p>10){var e;(null===(e=i.authZoneConfig)||void 0===e?void 0:e.zoneType)==="unauthorized"?u(il.CAPTCHA_NEEDED):u(il.RECONNECT)}},[p]),e},lk=n(8764),lD=function(){return(0,lk.G)({method:"post",baseURL:void 0,url:eC.tokenAuthZone.gettoken,withCredentials:!0})},lT=function(){var e=(0,eM.A)(eA().mark(function e(){var t,n,r,i=arguments;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>0&&void 0!==i[0]&&i[0]){e.next=7;break}return e.next=4,eI.post(eC.captcha.refresh,{},eL);case 4:return n=e.sent.data,e.abrupt("return",null==n?void 0:n.accessToken);case 7:return e.next=9,lD();case 9:return r=e.sent,e.abrupt("return",null==r||null===(t=r.View)||void 0===t?void 0:t.token);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),lS=(0,l.createContext)([void 0,function(){}]),l_=function(e){var t=e.children,n=e.value;return d().createElement(lS.Provider,{value:n},t)},lj=["open","close","error","message"],lx=function(e,t){var n,r,i=e.baseUrl,a=e.authType,o=e.authZoneConfig,s=(0,l.useState)(ia.idle),u=(0,c.A)(s,2),d=u[0],f=u[1],g=rN(),m=(0,l.useRef)({open:[],close:[],message:[],error:[]}),p=(0,l.useRef)(null),v=(0,l.useContext)(lS),h=(0,c.A)(v,2),y=(h[0],h[1]),b=eq({baseUrl:eQ(i).ws,token:t,authType:a}),w=function(e){f(e),g(u$(e))},M=(0,l.useCallback)(function(e){return new Promise(function(t,n){try{w(ia.connecting);var r,i,a=new WebSocket(b);lj.forEach(function(e){a.addEventListener(e,function(t){("open"===e||"close"===e)&&w("open"===e?ia.open:ia.closed),m.current[e].forEach(function(e){return e(t)})})}),t(a),null==e||null===(i=e.onSuccess)||void 0===i||i.call(e)}catch(t){null==e||null===(r=e.onFailure)||void 0===r||r.call(e),n(t)}})},[b]),E=function(){var e;null===(e=p.current)||void 0===e||e.close(),g(uX(0)),M().catch(console.error)},A=(0,l.useCallback)((n=(0,eM.A)(eA().mark(function e(t){var n,r,i,a,s;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==o?void 0:o.zoneType)!=="authorized"){e.next=16;break}return e.prev=1,e.next=4,lD();case 4:(a=null==(i=e.sent)||null===(n=i.View)||void 0===n?void 0:n.token)&&y&&(y(a),E()),null==t||null===(r=t.onSuccess)||void 0===r||r.call(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),null==t||null===(s=t.onFailure)||void 0===s||s.call(t),console.error(e.t0);case 14:e.next=17;break;case 16:E();case 17:case"end":return e.stop()}},e,null,[[1,10]])})),function(e){return n.apply(this,arguments)}),[o]),O=(0,l.useCallback)(function(e,t){m.current[e].push(t)},[]),I=(0,l.useCallback)((r=(0,eM.A)(eA().mark(function e(t){return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:p.current=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),w(ia.closed),console.error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return r.apply(this,arguments)}),[M]);return(0,l.useMemo)(function(){return{addEventHandler:O,socketRef:p,reconnect:A,setStatus:w,connect:I,socketStatus:d,config:e}},[d,A,e,I])},lL=(0,l.createContext)({socketRef:{current:null},addEventHandler:function(){},socketStatus:ia.idle,reconnect:function(){},setStatus:function(){}}),lz=function(e){var t=e.children,n=e.token,r=lC(lx(e.config,n));return d().createElement(lL.Provider,{value:r},t)},lP=function(){return(0,l.useContext)(lL)},lR=function(){var e=lP(),t=e.socketRef,n=e.socketStatus,r=(0,id.V)(n),i=rN(),a=function(){return!!t.current&&r.current===ia.open};return{submitToSocket:(0,l.useCallback)(function(e){var n=function(){if(a()){var n;null===(n=t.current)||void 0===n||n.send(JSON.stringify(e))}};a()?n():setTimeout(n,1e3)},[n]),checkMessageStatus:function(e){setTimeout(function(){i(t2(e))},1e4)}}},lU=function(){var e=sx().captchaStage,t=iE().stage,n=rC(eu),r=n.authZoneConfig,i=n.welcomeMessage,a=r||{},o=a.showMessageBeforeInput,s=a.zoneType,c=a.startMessage,u=rN(),d=(tk(rC(ar))||{messages:[]}).messages;(0,l.useEffect)(function(){if(i){var n=tm(null!=i?i:c),r=null==d?void 0:d.find(function(e){return e.messageId===n.messageId});"unauthorized"===s&&t===il.CAPTCHA_NEEDED&&"init"===e&&!r&&o&&u(tq(n))}},[t,e,d.length,i,s])},lY=function(){var e=(0,eM.A)(eA().mark(function e(t,n){var r,i,a;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t(t5(ew.loading)),"authorized"!==n){e.next=9;break}return e.next=4,t(eX());case 4:return r=e.sent,e.next=7,t(e$());case 7:return i=e.sent,e.abrupt("return",[r,i]);case 9:return e.next=11,t(eX());case 11:return a=e.sent,e.abrupt("return",[a,null]);case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),lB=function(e){var t,n=e.sendMessage,r=e.sendSocketMessage,i=rN(),a=rC(o0),o=rC(ec),s=rC(eu),u=s.authType,d=s.userData,f=s.authZoneConfig.zoneType,g=(0,id.V)(n),m=rC(o2),p=lP(),v=p.reconnect,h=p.socketStatus,y=p.setStatus,b=sx().captchaStage,w=iE(),M=w.stage,E=w.changeStage,A="authorized"===f?!!(null!=d&&d.token)&&!!u:!!m,O=h===ia.open,I=ip(),N=(t=(0,eM.A)(eA().mark(function e(){var t,n,r,a;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(et(!0)),e.next=3,lY(i,f);case 3:t=e.sent,r=(n=(0,c.A)(t,2))[0],a=n[1],eX.fulfilled.match(r)&&(!a||e$.fulfilled.match(a))&&E(il.CONNECTING);case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),C=(0,l.useCallback)(function(){a.forEach(function(e){var t,n=td(null!==(t=tD(e))&&void 0!==t?t:"",{id:e.messageId,replyId:e.message.replyId}),i=n.historyMessage;r(n.socketMessage,i)})},[a]),k=function(){E(il.ERROR),i($(H.ERROR)),i(ee(V.WEBSOCKET_CONNECTION))};(0,l.useEffect)(function(){var e=function(e){g.current(e.detail,void 0)};return window.addEventListener(iN,e),function(){i(et(!1)),window.removeEventListener(iN,e)}},[]),(0,l.useEffect)(function(){I&&A&&!o&&M===il.LOAD_DATA&&N(),M===il.CAPTCHA_NEEDED&&"unauthorized"===f&&i(r6([]))},[A,M,I]),(0,l.useEffect)(function(){M===il.ACTIVE&&O&&"end"===b&&C(),M===il.RECONNECT&&"authorized"===f&&v({onFailure:k}),h===ia.closed&&M===il.CAPTCHA_NEEDED&&y(ia.idle)},[M,f,O]),lU()},lH=function(e){var t=rN(),n=sx(),r=n.sendCaptchaMessage,i=n.handleChangeStage,a=n.generateCaptchaMessage,o=n.captchaStage,s=(0,id.V)(rC(o$));return(0,l.useCallback)(function(n,c){if("init"===o){t(ne(!0)),t(si(c)),i("start"),rs(e);return}if(!s.current){t(si(c)),a("captcha");return}n&&r(n.data.message.text)},[e,o])};function lV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lV(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lZ=function(){var e=rN(),t=iZ().scrollToBottom,n=sx().captchaStage,r=rC(ac),i=rC(aW),a=rC(eu).authZoneConfig.zoneType,o=ip(),s=(0,id.V)(o),c=iE().stage,u=(0,id.V)(c),d=lR(),f=d.submitToSocket,g=d.checkMessageStatus,m=lH(a),p=(0,l.useCallback)(function(t,o){if(!s.current){g(o);return}var c="unauthorized"===a&&u.current===il.CAPTCHA_NEEDED;o.message.type!==ex.Link&&(e(tX({id:o.messageId,status:c?ej.delivered:ej.sent})),e(t0(void 0)));var l="authorized"===a&&r&&i;if((c&&"init"===n||l)&&ri(a),c){m(t,o);return}f(t),o.message.type!==ex.Link&&g(o)},[f,c,a,m,r]),v=(0,l.useCallback)(function(t,n,r,i){var a=td(t,{id:r,replyId:n,messageType:null==i?void 0:i.messageType,value:null==i?void 0:i.value}),o=a.socketMessage,s=a.historyMessage;e(tX({id:s.messageId,status:ej.sent})),p(o,s)},[f]),h=(0,l.useCallback)(function(n,r,i,o){if(n.trim()){var c,l,d=td(n,lG({replyId:r,status:(c=u.current,l=s.current,"unauthorized"===a&&c===il.CAPTCHA_NEEDED&&l?ej.delivered:ej.sent),onlyClient:"unauthorized"===a&&u.current===il.CAPTCHA_NEEDED},o||{})),f=d.socketMessage,g=d.historyMessage;(null==o?void 0:o.messageType)!==ex.Link&&(e(tq(g)),e(r6([]))),p(f,g),t_(i),t(100)}},[p,c,a]),y=(0,l.useCallback)(function(t,n,r,i){var a=tc(t,{id:n});f(a),e(tJ({id:n,messageStatus:ej.sent,message:{fileId:t.imageId,filePreviewId:t.imagePreviewId,imageSettings:t.imageSettings}})),r&&i&&(f(ts(r,{id:i})),e(tX({id:i,status:ej.delivered}))),g(lG(lG({},a.data),{},{messageId:a.data.requestId}))},[f]);return lB({sendMessage:h,sendSocketMessage:p}),{sendMessage:h,resendMessage:v,resendImageMessage:function(t,n){var r=tc(t,{id:n});f(r),e(tX({id:n,status:ej.sent})),g(lG(lG({},r.data),{},{messageId:r.data.requestId}))},sendImgMessage:y,sendFileMessage:function(t,n,r){f(tu(t,{id:n.messageId})),r?e(tX({id:n.messageId,status:ej.sent})):e(tJ({id:n.messageId,message:{fileId:t}})),g(n)}}},lF=function(e){var t=e.children,n=lZ();return d().createElement(aS,n,t)},lW=["children"],lQ=(0,f.Ng)(function(e){return{reconnectCount:ic(e),config:eu(e)}},function(e){return{addMessage:function(t){return e(tq(t))},updateMessage:function(t){return e(tJ(t))},setIsNoNAuthCaptchaStage:function(t){return e(ne(t))}}})(function(e){var t=e.children,n=(0,u.A)(e,lW);return d().createElement(sj,n,t)}),lq=function(e,t){(0,l.useEffect)(function(){var n,r=new MutationObserver(function(){var n;null!==(n=document)&&void 0!==n&&n.title.includes(e)||t(document.title)}),i=null===(n=document)||void 0===n?void 0:n.querySelector("title");return i&&r.observe(i,{childList:!0}),function(){r.disconnect()}},[])},lK=function(){var e;return null===(e=document)||void 0===e?void 0:e.querySelectorAll("link[rel~='icon']")},lJ=function(e){var t,n=e.isActive,r=e.title,i=void 0===r?"Новое сообщение":r,a=e.interval,o=void 0===a?1500:a,s=e.count,c=e.favicon,u=(0,l.useRef)([]),d=(0,l.useRef)([]),f=(0,l.useRef)(null===(t=document)||void 0===t?void 0:t.title),g=(0,l.useRef)(i),m=function(e){d.current.forEach(function(t){var n=t.originalLink;t.element.href=e?n:e?n:null!=c?c:n})};lq(i,function(e){f.current=e}),(0,l.useEffect)(function(){g.current="".concat(s||""," ").concat(i).trim()},[s,i]),(0,l.useEffect)(function(){var e=[];lK().forEach(function(t){e.push({element:t,originalLink:t.href})}),d.current=e},[]),(0,l.useEffect)(function(){if(!n)return function(){};var e=!1,t=u.current,r=f.current,i=setInterval(function(){u.current&&c&&m(!e),document.title=e?g.current:f.current,e=!e},o);return function(){clearInterval(i),t&&m(!0),document.title=r}},[n])},lX=function(){var e;return(null===(e=window)||void 0===e||null===(e=e.Notification)||void 0===e?void 0:e.permission)==="granted"},l$=function(){var e;return null!==(e=window)&&void 0!==e&&!!e.Notification&&window.Notification.requestPermission()},l0=function(){var e,t=(0,l.useState)(lX()),n=(0,c.A)(t,2),r=n[0],i=n[1],a=(e=(0,eM.A)(eA().mark(function e(){return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l$();case 2:i("granted"===e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)});return(0,l.useEffect)(function(){r||a()},[]),r};function l1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l1(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var l2="https://static.beeline.ru/upload/images/icons/18161-img-1.png",l6=function(e){l0();var t,n=null!==(t=rC(af))&&void 0!==t?t:[],r=(0,l.useState)(!0),i=(0,c.A)(r,2),a=i[0],o=i[1],s=rN(),u=(0,l.useCallback)(function(t,n){if("remove"===n.type)return t.filter(function(e){if(e.id===n.id){var t;return null===(t=e.notification)||void 0===t||t.close(),!1}return!0});if("add"===n.type){var r,i;return lX()&&"visible"!==document.visibilityState&&(r=new Notification(null!=e?e:"Новое сообщение",{body:null===(i=tD(n.item.message))||void 0===i?void 0:i.replace(/<[^>]*>?/gm," "),vibrate:1,silent:!1,image:l2,icon:l2})),[].concat((0,h.A)(t),[l4(l4({},n.item),{},{notification:r})])}return"clear"===n.type?(t.forEach(function(e){var t;return null===(t=e.notification)||void 0===t?void 0:t.close()}),[]):t},[]),d=(0,l.useReducer)(u,[]),f=(0,c.A)(d,2),g=f[0],m=f[1];return lJ({isActive:!a&&!!g.length&&!!n.length,favicon:"https://static.beeline.ru/upload/images/icons/18161-img-2.png",title:sp(n.length,["новый ответ","новых ответа","новых ответов"]),count:n.length}),(0,l.useEffect)(function(){var e=function(){return o("visible"===document.visibilityState)};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[]),(0,l.useEffect)(function(){a&&(m({type:"clear"}),s(t7()))},[a]),{addNotification:function(e){m({type:"add",item:{message:e,id:e8()}})},closeNotification:function(e){m({type:"remove",id:e})}}},l3=(0,P.Z0)({name:"user",initialState:{apperList:[]},reducers:{setCurrentApper:function(e,t){e.currentApper=t.payload},setApperData:function(e,t){e.apperData=t.payload},setApperList:function(e,t){e.apperList=t.payload}},extraReducers:function(e){e.addCase(e$.fulfilled,function(e,t){var n,r,i=t.payload;e.apperList=null!==(n=null===(r=i.data.AnimalWeb)||void 0===r?void 0:r.content)&&void 0!==n?n:[]})}}),l5=l3.actions,l9=(l5.setApperData,l5.setCurrentApper);l5.setApperList;var l8=function(){var e=lP().addEventHandler,t=rN(),n=rC(eu).authZoneConfig,r=(0,id.V)(iZ()),i=iE().changeStage,a=l6("Новый ответ в чате поддержки").addNotification,o=(0,id.V)(rC(o0)),s=(0,id.V)(ip()),c=function(){return i(il.ACTIVE)},u=function(){s.current&&i(il.CONNECTING)},d=function(e){var i=JSON.parse(e.data);if(i.type===tr.SocketConnectionResult&&t(l9(i.data.assistantCodeName||aj.fluffy)),i.type===tr.OperationResult){var s=i.data.text;s===io.sessionInitialized&&(nP(nE.WebChatStart),t(t3(i)));var c=i.data;if(s===io.messageSent||s===io.fileMessageSent){o.current.find(function(e){return e.messageId===c.requestId})&&t(sl(c.requestId));var u=i.data.code===e_.success&&1===i.data.action?ej.delivered:ej.failed;t(tJ({id:c.requestId,date:c.timestamp,messageStatus:s===io.fileMessageSent?u:ej.delivered}))}}if(i.type===tr.IncomingMessage||i.type===tr.OutgoingMessage){var l=tg(i),d=l.historyMessage,f=l.quickReplies,g=i.data.message.text;g&&t(tq(d)),r.current.isScrollButtonVisible||r.current.scrollToBottom(0),i.type===tr.IncomingMessage&&(a(d),t(t8(d)),t(r6(f)),g&&rh(g,null==n?void 0:n.zoneType))}};(0,l.useEffect)(function(){e("close",u),e("open",c),e("message",function(e){return d(e)})},[])},l7=function(e){var t=e.children;return l8(),t},de=function(e){var t,n=sessionStorage.getItem(tv);return n?(t=JSON.parse(n)).filter(function(e,n){return t.findIndex(function(t){return t.messageId===e.messageId})===n}).filter(function(t){var n=t.messageId;return!(null!=e&&e.messages.find(function(e){return e.messageId===n}))}):null},dt=function(){var e=sessionStorage.getItem(tA);return e?JSON.parse(e):[]},dn=[tv,tM,tA],dr=[tw,tE,th],di=function(){dn.forEach(function(e){return sessionStorage.removeItem(e)}),dr.forEach(function(e){return(0,R.Yj)(e)})},da=function(e){sessionStorage.setItem(eB,aI(e))},ds=["children","config","addMessages","setIsNoNAuthStage","captchaToken","setQueuedMessages","lastSession","isOpen"],dc=(0,f.Ng)(function(e){return{config:eu(e),isOpen:eo(e),lastSession:aa(e),loadingStatus:au(e),isHistoryEmpty:!ai(e).length,captchaToken:o2(e)}},function(e){return{addMessages:function(t){return e(tK(t))},setIsNoNAuthStage:function(t){return e(ne(t))},setQueuedMessages:function(t){return e(so(t))}}})(function(e){var t,n,r=e.children,i=e.config,a=e.addMessages,s=e.setIsNoNAuthStage,c=e.captchaToken,f=e.setQueuedMessages,g=e.lastSession,m=(e.isOpen,(0,u.A)(e,ds)),p=(null===(t=i.authZoneConfig)||void 0===t?void 0:t.zoneType)||"unauthorized",v=iE().stage;return(0,l.useEffect)(function(){var e=de(g),t=dt(),n=sessionStorage.getItem(eB);f(t),s(v===il.BLOCKED||v===il.CAPTCHA_NEEDED),e&&n===p?a(e):p&&(di(),da(p))},[]),d().createElement(aY,null,d().createElement(iG,(0,o.A)({zoneType:p},m),d().createElement(lQ,null,d().createElement(lz,{config:i,token:"authorized"===p?null===(n=i.userData)||void 0===n?void 0:n.token:c},d().createElement(l7,null,d().createElement(lF,null,r))))))}),du=M("img-preview",{"img-preview":"qEYaB","img-preview_upload":"G9Ahr","img-preview__img":"kOlVD","img-preview__img_orientation_horizontal":"czaI4","img-preview__img_orientation_vertical":"dNJaF"}),dl=(0,rW.Zz)((0,f.Ng)(function(e){return{dynamicFormHeight:aV(e).dynamicFormHeight,imageUrlGroup:aQ(e),isTypeUpload:ah(e),shouldRender:am(e)}}),rQ.t)(function(e){var t=e.imageUrlGroup,n=e.dynamicFormHeight,r=e.isTypeUpload,i=(0,p.Eo)(),a=t||{},o=a.filePreviewUrl,c=a.fileUrl,u=a.imageSettings,l=!r&&c?c:o;return d().createElement("div",{className:du({upload:r}),style:(0,s.A)((0,s.A)({},"--img-top-margin","".concat(i?76:92,"px")),"--img-bottom-margin","".concat(r?n:0,"px"))},l&&d().createElement("img",{alt:"прикрепленное фото",className:du("img",{orientation:((null==u?void 0:u.ratio)||1)>=1?"horizontal":"vertical"}),src:l}))}),dd=function(e){var t=e.children;return iR(e.enableQueriesParams),t},df=(0,l.forwardRef)(function(e,t){var n=e.isOpen,r=e.callOfflineScreen,i=e.errorScreenType,a=e.enableQueriesParams,o=e.onChatOpen,s=e.isChatOpen;lA(n),lN(s,(0,p.Eo)());var c=iE().changeStage,u=ip();return(0,l.useEffect)(function(){i!==H.UNKNOWN&&c(il.ERROR)},[i]),(0,l.useEffect)(function(){u||(r(),c(il.ERROR))},[u]),d().createElement(dc,null,d().createElement(dd,{enableQueriesParams:void 0===a||a},d().createElement(dl,null),d().createElement(lM,{onChatOpen:o,ref:t})))}),dg=(0,f.Ng)(function(e){var t=eu(e);return{isMenuOpen:es(e),isChatOpen:eo(e),messengers:t.messengers,errorScreenType:ev(e),zoneType:t.authZoneConfig.zoneType}},function(e){return{closeChat:function(){return e(q(!1))},callOfflineScreen:function(){e(ee(V.OFFLINE)),e($(H.OFFLINE))}}})(df),dm=["isOpen","isChatOpen","isMenuOpen","enableQueriesParams","onChatWidgetClick","onChatOpen","className","messengers","closeWidget","zoneType"];function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var dv=M("chat-widget",{"chat-widget__wrapper":"dTj3h","chat-widget__button":"o1U1Q","chat-widget__overlay":"ptwP2","chat-widget__overlay_isOpen":"FxaRt","chat-widget__window":"aQ1QM","chat-widget__window_view_block":"bMvz3","chat-widget__content":"hM3Db","chat-widget__content_view_block":"GuxVg"}),dh=(0,l.forwardRef)(function(e,t){var n=e.isOpen,r=e.isChatOpen,i=e.isMenuOpen,a=e.enableQueriesParams,f=void 0===a||a,h=e.onChatWidgetClick,y=e.onChatOpen,b=e.className,w=e.messengers,M=void 0===w?[]:w,E=e.closeWidget,A=e.zoneType,I=(0,u.A)(e,dm),N=(0,l.useRef)(null),C=(0,p.Gu)(),k=(0,c.A)(C,1)[0],D=O();ir({isChatOpen:r,isMenuOpen:i,messengers:M,zoneType:A}),iP(f);var T=r||i,S=(0,l.useMemo)(function(){return k===v.e.TABLET?i?"block":"fullscreen":k===v.e.DESKTOP?"block":"fullscreen"},[k,i]);return d().createElement("section",(0,o.A)({className:dv("wrapper",[b,(0,m.X)("light")]),id:"chat-widget",onClick:h,ref:t,style:{zIndex:D}},I),d().createElement(na,{className:dv("button"),ref:N}),d().createElement("div",{"aria-hidden":"true",className:dv("overlay",{isOpen:T})}),d().createElement(nd,{anchorRef:N,className:dv("window",{view:S}),"data-portal-type":"widgetChat",direction:"leftStartDown",isOpen:T,offsetHorizontal:8,onClickOutside:E,position:"fixed",style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}((0,s.A)({},"--chat-zindex",D+1),"block"===S?(0,s.A)((0,s.A)({},"--popover-top","auto"),"--popover-bottom","".concat(N.current?window.innerHeight-N.current.getBoundingClientRect().y-N.current.offsetHeight:0,"px")):{})},d().createElement(g.P.div,{className:dv("content",{view:S}),layout:!0},(r||M.length<2)&&d().createElement(dg,{anchorRef:N,enableQueriesParams:f,isOpen:n,onChatOpen:y}),i&&d().createElement(r0,{messengers:M,title:"ответим везде"}))))}),dy=(0,f.Ng)(function(e){return{isChatOpen:eo(e),isMenuOpen:es(e),messengers:eu(e).messengers,zoneType:eu(e).authZoneConfig.zoneType}},function(e){return{closeWidget:function(){e(q(!1)),e(J(!1)),e(t4({isImgPreviewOpen:!1,type:null})),e(r3(null))}}})(dh),db=(0,n(75249).HY)({socket:uK.reducer,user:l3.reducer,settings:W.reducer,filters:u7.reducer,message:tW.reducer,captcha:se.reducer,content:r4.reducer}),dw=(0,P.U1)({reducer:db}),dM=[eC.file.download,eC.file.sent],dE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"V5",n=eC.chat.history(t);return!e||[].concat(dM,[n]).every(function(t){return!e.includes(t)})},dA=function(e,t){var n=e.authZoneConfig;return(null==n?void 0:n.zoneType)==="authorized"||eR.AuthScheme in t.headers||Number((0,R.Ri)("isAuthorized"))?"authorized":"unauthorized"},dO=function(e,t){var n,r,i=t.authZoneConfig,a=t.apiSettings,o=eC.chat.history((null==a?void 0:a.apiHistoryVersion)||"V5"),s=null===(n=e.config)||void 0===n?void 0:n.url,c=(null===(r=e.response)||void 0===r?void 0:r.status)||200;return(null!=s&&s.includes(o)||null!=s&&s.includes(ek((null==a?void 0:a.apiContentVersion)||"v1")))&&c>=400&&401!==c?[!0,H.LOAD,null!=s&&s.includes(o)?V.HISTORY_LOAD:V.CONTENT_LOAD]:(null==i?void 0:i.zoneType)==="authorized"?[!1,void 0,void 0]:null!=s&&s.includes(eC.captcha.validate)&&c>=400&&401!==c?[!0,H.ERROR,V.VALIDATE_CAPTCHA]:null!=s&&s.includes(eC.captcha.refresh)&&c>=400&&401!==c?[!0,H.LOAD,V.REFRESH_TOKEN]:[!1,void 0,void 0]};function dI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(n),!0).forEach(function(t){(0,s.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dI(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var dC=function(){var e=rN(),t=iE().changeStage,n=rC(o2),r=rC(eu),i=rC(eo),a=(0,id.V)(r),o=(0,id.V)(n),s=function(e){var t=a.current,n=t.userData,r=t.authType,i=t.authZoneConfig;return dN(dN({},eW({token:null!=e?e:"unauthorized"===i.zoneType?o.current:null==n?void 0:n.token,authType:r,zoneType:null==i?void 0:i.zoneType})),eF())},c=function(t,n){n?e(X(dN(dN({},a.current),{},{userData:{token:t}}))):e(sa(t))};(0,l.useEffect)(function(){var n,r;eI.interceptors.request.use((n=(0,eM.A)(eA().mark(function e(t){var n,r,i,o;return eA().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(null===(n=t.url)||void 0===n?void 0:n.includes(eC.tokenAuthZone.gettoken))?window.location.origin:eQ(a.current.baseUrl).http,t.baseURL=i,null!==(r=t.url)&&void 0!==r&&r.includes(eC.file.download)&&t.url&&(o=new URL(t.url),t.url="".concat(i).concat(o.pathname).concat(o.search||"")),t.headers=s(),e.abrupt("return",t);case 6:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)}),function(e){return Promise.reject(e)}),eI.defaults.headers=s(),eI.defaults.baseURL=eQ(a.current.baseUrl).http,eI.interceptors.response.use(function(e){return e},(r=(0,eM.A)(eA().mark(function n(r){var i,o,u,l,d,f,g,m;return eA().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l="authorized"===dA(a.current,r.config),d=r.config,f=dO(r,a.current),null!==(i=r.config.url)&&void 0!==i&&i.includes(eC.captcha.refresh)&&(0,R.Yj)(tp),!f[0]){n.next=10;break}return t(il.ERROR),e($(f[1])),e(ee(f[2])),n.abrupt("return",Promise.reject(r));case 10:if(!((null==r||null===(o=r.response)||void 0===o?void 0:o.status)!==401||d._retry||dE(r.config.url,null===(u=a.current)||void 0===u||null===(u=u.apiSettings)||void 0===u?void 0:u.apiHistoryVersion))){n.next=12;break}return n.abrupt("return",Promise.reject(r));case 12:return d._retry=!0,n.prev=13,n.next=16,lT(l);case 16:if(!(g=n.sent)){n.next=23;break}return d.headers=dN(dN({},d.headers),s(g)),c(g,l),n.next=22,(0,eO.A)(d);case 22:return n.abrupt("return",n.sent);case 23:throw Error("token is undefined");case 26:n.prev=26,n.t0=n.catch(13),l?(t(il.ERROR),e($(H.LOAD)),e(ee(V.HISTORY_LOAD))):(m=dO(n.t0,a.current))[0]?(t(il.ERROR),e($(m[1])),e(ee(m[2]))):t(il.CAPTCHA_NEEDED);case 29:return n.abrupt("return",Promise.reject(r));case 30:case"end":return n.stop()}},n,null,[[13,26]])})),function(e){return r.apply(this,arguments)}))},[i,r.authZoneConfig,r.authType,n,r.userData])},dk=function(e){var t=rN(),n=ik(),r=function(e){var r=e.detail,i=r.flag,a=r.initialMessage;t(q(i)),t(J(!1)),n(a)},i=function(n){var r=n.detail.flag,i=e.length>1;t(q(!i&&r)),t(J(i&&r))};(0,l.useEffect)(function(){return window.addEventListener(iO,r),window.addEventListener(iI,i),function(){window.removeEventListener(iO,r),window.removeEventListener(iI,i)}},[])},dD=function(e){var t=e.children;return dC(),t},dT=function(e){var t=e.children;return dk(e.messengers),t},dS=(0,f.Ng)(function(e){return{isOpen:eo(e)}},function(e){return{setConfig:function(t){return e(X(t))},setOperatorWelcomeMessage:function(t){return e(t6(t))}}})(function(e){var t=e.children,n=e.authType,r=e.authZoneConfig,i=void 0===r?B:r,a=e.attachmentsConfig,o=e.baseUrl,s=e.charsLimit,u=void 0===s?6e3:s,f=e.enableQueriesParams,g=void 0===f||f,m=e.messengers,p=void 0===m?[]:m,v=e.startButtonsConfig,h=e.userData,y=e.isOpen,b=e.welcomeMessage,w=e.setConfig,M=e.setOperatorWelcomeMessage,E=e.apiSettings,A=(0,l.useState)(null==h?void 0:h.token),O=(0,c.A)(A,2),I=O[0],N=O[1];return(0,l.useEffect)(function(){!I&&null!=h&&h.token&&N(h.token)},[null==h?void 0:h.token]),(0,l.useEffect)(function(){w({authType:n,authZoneConfig:i,baseUrl:o,charsLimit:u,enableQueriesParams:g,messengers:p,startButtonsConfig:v,userData:{token:I},attachmentsConfig:a,apiSettings:E,welcomeMessage:b}),M(b)},[n,i,o,u,g,p,I,a,E,v]),d().createElement(iM,{baseUrl:o,isOpen:y,zoneType:i.zoneType||"unauthorized"},d().createElement(dT,{messengers:p},d().createElement(dD,null,d().createElement(l_,{value:[I,N]},void 0===t?null:t))))}),d_=function(e){return(0,l.forwardRef)(function(t,n){return d().createElement(f.Kq,{store:dw},d().createElement(dS,t,d().createElement(e,{enableQueriesParams:t.enableQueriesParams,isOpen:t.isOpen,onChatOpen:t.onChatOpen,ref:n})))})};d_(dy),d_(dg);let dj=d_(dy)},77232:(e,t,n)=>{var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",f="name",g="type",m="vendor",p="version",v="architecture",h="console",y="mobile",b="tablet",w="smarttv",M="wearable",E="embedded",A="Amazon",O="Apple",I="ASUS",N="BlackBerry",C="Browser",k="Chrome",D="Firefox",T="Google",S="Huawei",_="Microsoft",j="Motorola",x="Opera",L="Samsung",z="Sharp",P="Sony",R="Xiaomi",U="Zebra",Y="Facebook",B="Chromium OS",H="Mac OS",V=function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},G=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Z=function(e,t){return typeof e===u&&-1!==F(t).indexOf(F(e))},F=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===s?e:e.substring(0,500)},Q=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var f=t[d],g=t[d+1];for(n=r=0;n<f.length&&!u&&f[n];)if(u=f[n++].exec(e))for(i=0;i<g.length;i++)l=u[++r],typeof(s=g[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):void 0:this[s[0]]=l?s[1].call(this,l,s[2]):void 0:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):void 0):this[s]=l||a;d+=2}},q=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Z(t[n][r],e))return"?"===n?a:n}else if(Z(t[n],e))return"?"===n?a:n;return e},K={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,p],[/opios[\/ ]+([\w\.]+)/i],[p,[f,x+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[f,x]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[f,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[f,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+C],p],[/\bfocus\/([\w\.]+)/i],[p,[f,D+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[f,x+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[f,x+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[f,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[p,[f,D]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+C]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+C],p],[/samsungbrowser\/([\w\.]+)/i],[p,[f,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,Y],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[f,k+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,k+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[f,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[p,q,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[f,D+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,p],[/(cobalt)\/([\w\.]+)/i],[f,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,F]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",F]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,F]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[m,L],[g,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[m,L],[g,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[m,O],[g,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[m,O],[g,b]],[/(macintosh);/i],[d,[m,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[m,z],[g,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[m,S],[g,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[m,S],[g,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[m,R],[g,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[m,R],[g,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[m,"OPPO"],[g,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[m,"Vivo"],[g,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[m,"Realme"],[g,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[m,j],[g,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[m,j],[g,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[m,"LG"],[g,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[m,"LG"],[g,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[m,"Lenovo"],[g,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[m,"Nokia"],[g,y]],[/(pixel c)\b/i],[d,[m,T],[g,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[m,T],[g,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[m,P],[g,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[m,P],[g,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[m,"OnePlus"],[g,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[m,A],[g,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[m,A],[g,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,m,[g,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[m,N],[g,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[m,I],[g,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[m,I],[g,y]],[/(nexus 9)/i],[d,[m,"HTC"],[g,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[d,/_/g," "],[g,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[m,"Acer"],[g,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[m,"Meizu"],[g,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[m,"Ulefone"],[g,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,d,[g,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,d,[g,b]],[/(surface duo)/i],[d,[m,_],[g,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[m,"Fairphone"],[g,y]],[/(u304aa)/i],[d,[m,"AT&T"],[g,y]],[/\bsie-(\w*)/i],[d,[m,"Siemens"],[g,y]],[/\b(rct\w+) b/i],[d,[m,"RCA"],[g,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[m,"Dell"],[g,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[m,"Verizon"],[g,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[m,"Barnes & Noble"],[g,b]],[/\b(tm\d{3}\w+) b/i],[d,[m,"NuVision"],[g,b]],[/\b(k88) b/i],[d,[m,"ZTE"],[g,b]],[/\b(nx\d{3}j) b/i],[d,[m,"ZTE"],[g,y]],[/\b(gen\d{3}) b.+49h/i],[d,[m,"Swiss"],[g,y]],[/\b(zur\d{3}) b/i],[d,[m,"Swiss"],[g,b]],[/\b((zeki)?tb.*\b) b/i],[d,[m,"Zeki"],[g,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],d,[g,b]],[/\b(ns-?\w{0,9}) b/i],[d,[m,"Insignia"],[g,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[m,"NextBook"],[g,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],d,[g,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],d,[g,y]],[/\b(ph-1) /i],[d,[m,"Essential"],[g,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[m,"Envizen"],[g,b]],[/\b(trio[-\w\. ]+) b/i],[d,[m,"MachSpeed"],[g,b]],[/\btu_(1491) b/i],[d,[m,"Rotor"],[g,b]],[/(shield[\w ]+) b/i],[d,[m,"Nvidia"],[g,b]],[/(sprint) (\w+)/i],[m,d,[g,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[m,_],[g,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[m,U],[g,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[m,U],[g,y]],[/smart-tv.+(samsung)/i],[m,[g,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[m,L],[g,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,"LG"],[g,w]],[/(apple) ?tv/i],[m,[d,O+" TV"],[g,w]],[/crkey/i],[[d,k+"cast"],[m,T],[g,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[m,A],[g,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[m,z],[g,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[m,P],[g,w]],[/(mitv-\w{5}) bui/i],[d,[m,R],[g,w]],[/Hbbtv.*(technisat) (.*);/i],[m,d,[g,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,W],[d,W],[g,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,d,[g,h]],[/droid.+; (shield) bui/i],[d,[m,"Nvidia"],[g,h]],[/(playstation [345portablevi]+)/i],[d,[m,P],[g,h]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[m,_],[g,h]],[/((pebble))app/i],[m,d,[g,M]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[m,O],[g,M]],[/droid.+; (glass) \d/i],[d,[m,T],[g,M]],[/droid.+; (wt63?0{2,3})\)/i],[d,[m,U],[g,M]],[/(quest( 2| pro)?)/i],[d,[m,Y],[g,M]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[g,E]],[/(aeobc)\b/i],[d,[m,A],[g,E]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[g,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[g,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[g,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[p,q,K]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,q,K],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,H],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,p],[/\(bb(10);/i],[p,[f,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[f,D+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[f,k+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,B],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,p],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,p]]},X=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof X))return new X(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),h=n&&n.userAgentData?n.userAgentData:a,w=t?V(J,t):J,M=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[f]=a,t[p]=a,Q.call(t,r,w.browser),t[l]=typeof(e=t[p])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a,M&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[v]=a,Q.call(e,r,w.cpu),e},this.getDevice=function(){var e={};return e[m]=a,e[d]=a,e[g]=a,Q.call(e,r,w.device),M&&!e[g]&&h&&h.mobile&&(e[g]=y),M&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[g]=b),e},this.getEngine=function(){var e={};return e[f]=a,e[p]=a,Q.call(e,r,w.engine),e},this.getOS=function(){var e={};return e[f]=a,e[p]=a,Q.call(e,r,w.os),M&&!e[f]&&h&&"Unknown"!=h.platform&&(e[f]=h.platform.replace(/chrome os/i,B).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>500?W(e,500):e,this},this.setUA(r),this};X.VERSION="1.0.37",X.BROWSER=G([f,p,l]),X.CPU=G([v]),X.DEVICE=G([d,m,g,h,y,w,b,M,E]),X.ENGINE=X.OS=G([f,p]),typeof t!==s?(e.exports&&(t=e.exports=X),t.UAParser=X):n.amdO?a!==(r=(function(){return X}).call(t,n,t,e))&&(e.exports=r):typeof i!==s&&(i.UAParser=X);var $=typeof i!==s&&(i.jQuery||i.Zepto);if($&&!$.ua){var ee=new X;$.ua=ee.getResult(),$.ua.get=function(){return ee.getUA()},$.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)$.ua[n]=t[n]}}}(window)},90852:(e,t,n)=>{"use strict";n.d(t,{u:()=>o,w:()=>a});var r=n(19727),i=n.n(r),a=(0,r.createContext)(0),o=function(e){return i().createElement(a.Provider,{value:e.activeIndex||0},e.children)}}}]);
//# sourceMappingURL=9321.8b2e93b.js.map