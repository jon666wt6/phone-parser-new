import {S as St,P as Pt,B as Be,o as oi}from'./chunk-KL_7g2ew.js';import'./chunk-xhbyzJP2.js';import'./chunk-Cv7U9r_j.js';import'./chunk-D5Jyejdx.js';import'./chunk-hnem0I9a.js';import'./chunk-Bq2asBIt.js';import'./chunk-DDZ0q6Wq.js';import'./chunk-DUkbUbKr.js';import'./chunk-DKWUOuB5.js';import'./chunk-CKkREEv9.js';import {j,I,c4 as ze,i as i$1,bt as Gh,o as Vu,cO as $,al as kR,l as lO,W as Ww,_ as _I,c as kI,e as iE,b as kp,g as DE,P as Pp}from'./main-GV3FATOT.js';import'./chunk-QusFOk1N.js';import'./chunk-jiUUNBhR.js';import'./chunk-BWgEt2Gw.js';import'./chunk-DpEvSBvS.js';import'./chunk-CNoCOKQ_.js';import'./chunk-DmLImK7O.js';import'./chunk-tXvZU7AU.js';function O(n,M){n&1&&(kp(0,"div",1),DE(1,"yota-select-number-dialog"),Pp());}var Z=(()=>{class n extends j{constructor(){super(...arguments),this._selectNumberDialogService=I(St),this._cartService=I(Pt),this._regionService=I(ze),this._orderApiService=I(Be),this.selectedRegion=this._regionService.getRegion();}setSettings(r){if(this.settings=i$1.parse(r),!this.settings)return;let{expirationLockDate:e,lockId:o,msisdn:t,regionCodeCcm:c}=this._cartService.device||{};c&&c!==this.selectedRegion?.regionCodeCcm&&t&&(t.length=0,this._updateCart()),this._selectNumberDialogService.init({title:this.settings.title||"",cartTitle:"\u0412\u044B\u0431\u0440\u0430\u043D\u043E",cartEmptyDescription:"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043D\u043E\u043C\u0435\u0440\u043E\u0432",selectedNumbersMaxCount:this.settings.maxNumbers||5,selectedNumbers:t||[],region:this.selectedRegion?.regionCodeCcm||"2082",lockId:o,expirationLockDate:e?new Date(e):null,expiredNumbers:[],isDialog:false,buttonOrder:this.settings.button,expandMoreText:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0441\u0435",fetch$:i=>this._orderApiService.getBeautifulNumbers$(i),lock$:i=>this._orderApiService.lockBeautifulNumber$(i),cancel$:i=>this._orderApiService.cancelBeautifulNumber$(i),captcha$:()=>this._orderApiService.getNumbersCaptcha$(),captchaCheck$:i=>this._orderApiService.checkNumbersCaptcha$(i)}),Gh([this._selectNumberDialogService.selectedPhoneNumbers$,this._selectNumberDialogService.expirationLockDate$,this._selectNumberDialogService.lockId$]).pipe(Vu(this._onDestroy$)).subscribe(([i,I,$])=>{this._updateCart(i,I,$);});}_updateCart(r=[],e=null,o=null){let t={msisdn:[],expirationLockDate:null,lockId:null,fiasid:null,regionCodeCcm:null},c=new Date;r.length&&e&&o&&this.selectedRegion?.regionCodeCcm&&c<e&&(t.msisdn=r,t.expirationLockDate=$(e),t.lockId=o,t.regionCodeCcm=this.selectedRegion.regionCodeCcm),this._cartService.setInfo(t);}static{this.\u0275fac=(()=>{let r;return function(o){return (r||(r=kR(n)))(o||n)}})();}static{this.\u0275cmp=lO({type:n,selectors:[["yota-number-selection"]],features:[_I],decls:1,vars:1,consts:[["class","number-selection g-layout-section",4,"ngIf"],[1,"number-selection","g-layout-section"]],template:function(e,o){e&1&&kI(0,O,2,0,"div",0),e&2&&iE("ngIf",o.settings);},dependencies:[Ww,oi],styles:["[_nghost-%COMP%]{display:flex;margin-block:64px 100px}@media (max-width: 1248px){[_nghost-%COMP%]{margin-block:40px 80px}}@media (max-width: 992px){[_nghost-%COMP%]{margin-block:40px 60px}}.number-selection[_ngcontent-%COMP%]{position:relative;max-width:1240px}@media (max-width: 1440px){.number-selection[_ngcontent-%COMP%]{max-width:1208px}}"],changeDetection:0});}}return n})();export{Z as NumberSelectionComponent};