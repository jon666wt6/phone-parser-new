import {w as wt,bz as ye,aO as K,aP as R,a0 as at,az as X,r as Hu,k,av as Je,h as hO,a9 as Gw,Z as Zw,aJ as Jw,_ as zt,P as Pp,v as FE,L as LI,b as Lp,aq as vO,c as aE,dN as zO,e as eO,z as Pc,l as EE,f as MO,b0 as bE,Y as YR,dO as xo,dP as ai,dQ as Yn,dR as Ce,aj as dr}from'./main-4LN5YMRF.js';var q=(n,h,e)=>[n,h,e];function Z(n,h){if(n&1&&EE(0,"y-icon",5),n&2){let e=MO();aE("svgIcon",e.svgIcon);}}function L(n,h){if(n&1&&bE(0,6),n&2){let e=MO();aE("ngTemplateOutlet",e.template)("ngTemplateOutletContext",e.templateContext);}}function G(n,h){if(n&1&&EE(0,"span",7),n&2){let e=MO();aE("innerHtml",e.text,YR);}}var Y=(()=>{class n{get getHostTransition(){let e="linear";return this.animation==="cubic"&&(e=this.cubicBezierFunctionIn),`all ${e} ${this.animationDuration}ms`}get getZIndex(){return this.zIndex?.toString()||"1"}get getCursor(){return this.closeByMouseUp?"pointer":"default"}constructor(e){this.elementRef=e,this.templateContext={},this.theme="default",this.animation="cubic",this.animationDuration=900,this.animationHideDuration=900,this.timeout=3e3,this.parentSelector=null,this.closeByMouseUp=true,this.remove=new at,this.distanceToPageTop=0,this.cubicBezierFunctionIn="cubic-bezier(0, 1.82, 0.46, 0.84)",this.cubicBezierFunctionOut="cubic-bezier(0.42, -0.65, 0.27, 0.93)",this._close$=new X;}ngOnInit(){this.timeout&&ye(this.timeout).pipe(Hu(this._close$)).subscribe(()=>{this._startHideAnimation();});}ngOnDestroy(){this.dynamicComponent&&this.dynamicComponent.destroy(),this.remove.emit(),this._close$.complete();}onMouseUp(){this.closeByMouseUp&&this.close();}close(){this.zIndex=999,this._close$.next(),this._startHideAnimation();}updateDistanceTop(){this.distanceToPageTop=this._getDistanceFromBottomToPageTop(this.elementRef.nativeElement);}_startHideAnimation(){this.updateDistanceTop(),this.hideAnimation=`${this.animation}-out`,this.remove.emit();}_getDistanceFromBottomToPageTop(e){return e.getBoundingClientRect().bottom}static{this.\u0275fac=function(o){return new(o||n)(k(Je))};}static{this.\u0275cmp=hO({type:n,selectors:[["yota-popup"]],hostVars:6,hostBindings:function(o,t){o&2&&Pc("transition",t.getHostTransition)("z-index",t.getZIndex)("cursor",t.getCursor);},inputs:{text:"text",svgIcon:"svgIcon",template:"template",templateContext:"templateContext",theme:"theme",animation:"animation",animationDuration:"animationDuration",animationHideDuration:"animationHideDuration",timeout:"timeout",parentSelector:"parentSelector",closeByMouseUp:"closeByMouseUp",customClass:"customClass",customWrapperClass:"customWrapperClass",zIndex:"zIndex"},outputs:{remove:"remove"},decls:5,vars:11,consts:[[1,"popup",3,"mouseup","ngClass"],[1,"popup__content",3,"ngClass"],["class","popup__content-icon",3,"svgIcon",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"innerHtml",4,"ngIf"],[1,"popup__content-icon",3,"svgIcon"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHtml"]],template:function(o,t){o&1&&(Pp(0,"div",0),FE("mouseup",function(){return t.onMouseUp()}),Pp(1,"div",1),LI(2,Z,1,1,"y-icon",2)(3,L,1,2,"ng-container",3)(4,G,1,1,"span",4),Lp()()),o&2&&(vO("--animationDuration:"+t.animationDuration+"ms;--cubicFunctionIn:"+t.cubicBezierFunctionIn+";--cubicFunctionOut:"+t.cubicBezierFunctionOut+";--distanceToPageTop:"+t.distanceToPageTop+"px;"),aE("ngClass",zO(7,q,t.animation,t.hideAnimation?t.hideAnimation:"",t.customClass?t.customClass:"")),eO(),aE("ngClass","popup__content-"+t.theme),eO(),aE("ngIf",t.svgIcon),eO(),aE("ngIf",t.template),eO(),aE("ngIf",t.text&&!t.template));},dependencies:[Gw,Zw,Jw,zt],styles:["[_nghost-%COMP%]{display:flex;width:fit-content;max-width:540px;position:absolute;top:0;left:0;right:0;margin-inline:auto;justify-content:center;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}@media (max-width: 767px){[_nghost-%COMP%]{margin-inline:16px;width:auto;max-width:initial}}@media (max-width: 480px){[_nghost-%COMP%]{width:100%}}[_nghost-%COMP%]     .popup__content-warning .y-icon svg path{fill:#00aeef}[_nghost-%COMP%]     .popup__content-error .y-icon svg path{fill:#f65252}[_nghost-%COMP%]     .popup__content-light .y-icon svg path{fill:#00aeef}.popup[_ngcontent-%COMP%]{width:auto;max-width:fit-content}.popup__content[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:8px;padding:12px 16px;border-radius:16px;background:#fff;box-shadow:0 4px 12px #04040414;width:fit-content;font-size:16px;line-height:30px;font-weight:400}.popup__content-icon[_ngcontent-%COMP%]{width:24px;height:24px;min-width:24px;min-height:24px}.popup__content-warning[_ngcontent-%COMP%], .popup__content-error[_ngcontent-%COMP%]{background:#fff3d1;box-shadow:0 4px 12px #8f701614}.popup__content-success[_ngcontent-%COMP%]{background:#e9f1df;box-shadow:0 4px 12px #4a862e14}.popup__content-light[_ngcontent-%COMP%]{background:#edf9ff;box-shadow:0 8px 28px #00000014}@media (max-width: 992px){.popup__content[_ngcontent-%COMP%]{color:#434c5d;background:#fff;box-shadow:0 4px 12px #04040414;font-size:14px;line-height:18px;font-weight:500}.popup__content-light[_ngcontent-%COMP%]{background:#edf9ff;box-shadow:0 8px 28px #00000014}}@media (max-width: 480px){.popup[_ngcontent-%COMP%]{width:100%;max-width:initial}.popup__content[_ngcontent-%COMP%]{width:100%}}.slide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromRight var(--animationDuration) forwards ease-in}.slide-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutToRight var(--animationDuration) forwards ease-out}.cubic[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromTop var(--animationDuration) forwards var(--cubicFunctionIn)}.cubic-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutToTop var(--animationDuration) forwards var(--cubicFunctionOut)}.fade[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn var(--animationDuration) forwards linear}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut var(--animationDuration) forwards linear}@keyframes _ngcontent-%COMP%_slideInFromTop{0%{transform:translateY(calc(-200% - var(--distanceToPageTop)))}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideOutToTop{0%{transform:translateY(0)}to{transform:translateY(calc(-200% - var(--distanceToPageTop)))}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{transform:translate(110%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOutToRight{0%{transform:translate(0)}to{transform:translate(110%)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}"]});}}return n})();var pt=(()=>{class n{constructor(e,o,t,i,a){this._componentFactoryResolver=o,this._appRef=t,this._injector=i,this._document=a,this._zIndexCounter=1e3,this._wrapper=null,this._popups=[],this._removingPopupIds=new Set,this._renderer=e.createRenderer(null,null);}openPopup(e){if(this._popups.length||(this._wrapper&&this._renderer.removeChild(this._document.body,this._wrapper),this._wrapper=null),!this._wrapper){this._wrapper=this._renderer.createElement("div"),this._renderer.addClass(this._wrapper,"popups-wrapper"),this._customWrapperClass=e.customWrapperClass,this._customWrapperClass&&this._renderer.addClass(this._wrapper,this._customWrapperClass);let s=this._document.body;if(e.parentSelector){let r=this._document.querySelector(e.parentSelector);r&&(s=r);}this._renderer.appendChild(s,this._wrapper);}let t=this._componentFactoryResolver.resolveComponentFactory(Y).create(this._injector);t.instance.text=e.text,t.instance.svgIcon=e.svgIcon,t.instance.template=e.template,t.instance.customClass=e.customClass,t.instance.customWrapperClass=e.customWrapperClass,t.instance.zIndex=++this._zIndexCounter,t.instance.id=this._zIndexCounter,t.instance.theme=e.theme||t.instance.theme,t.instance.templateContext=e.templateContext||t.instance.templateContext,t.instance.animation=e.animation||t.instance.animation,t.instance.timeout=e.timeout===null?null:e.timeout||t.instance.timeout,t.instance.parentSelector=e.parentSelector||t.instance.parentSelector,t.instance.animationDuration=e.animationDuration||t.instance.animationDuration,t.instance.closeByMouseUp=e.closeByMouseUp===void 0?t.instance.closeByMouseUp:e.closeByMouseUp,t.instance.remove.pipe(wt(1)).subscribe(()=>{this.removePopup(t.instance);}),this._appRef.attachView(t.hostView);let i=t.hostView.rootNodes[0];e.component&&this._addDynamicComponent(e,t.instance),this._renderer.appendChild(this._wrapper,i);let a=this._popups.filter(s=>!s.hideAnimation);return a.forEach((s,r)=>{let c=a.filter((x,f)=>f<r).reduce((x,f)=>x+f.elementRef.nativeElement.clientHeight,0);setTimeout(()=>{this._renderer.setStyle(s.elementRef.nativeElement,"transform",`translateY(calc(${c+t.instance.elementRef.nativeElement.clientHeight}px + ${12*(r+1)}px))`);},0),s.updateDistanceTop();}),this._popups.unshift(t.instance),t.instance}removePopup(e){let o=this._popups.findIndex(t=>t.id===e.id);o<0||(this._removingPopupIds.add(e.id),ye(e.animationDuration/4).pipe(wt(1)).subscribe(()=>{let t=this._popups.filter(i=>!this._removingPopupIds.has(i.id));for(let i=o;i<t.length;i++){let a=t[i],s=t.filter((r,c)=>c<i).reduce((r,c)=>r+c.elementRef.nativeElement.clientHeight,0);this._renderer.setStyle(a.elementRef.nativeElement,"transform",`translateY(calc(${s}px + ${12*i}px))`);}this._popups=this._popups.filter(i=>i.id!==e.id);}),ye(e.animationDuration).pipe(wt(1)).subscribe(()=>{this._renderer.removeChild(parent,e.elementRef.nativeElement),this._removingPopupIds.delete(e.id),!this._popups.length&&this._wrapper&&!this._removingPopupIds.size&&(this._renderer.removeChild(this._document.body,this._wrapper),this._wrapper=null);}));}clearAll(){this._wrapper&&this._renderer.removeChild(this._document.body,this._wrapper),this._popups.length=0;}_addDynamicComponent(e,o){if(!e.component)return;let i=this._componentFactoryResolver.resolveComponentFactory(e.component.type).create(this._injector);e.component.inputs&&Object.keys(e.component.inputs).forEach(c=>{i.instance[c]=e.component.inputs[c];}),this._appRef.attachView(i.hostView);let a=i.hostView.rootNodes[0],s=o.elementRef.nativeElement,r=s.querySelector(".popup__content");r?this._renderer.appendChild(r,a):this._renderer.appendChild(s,a),o.dynamicComponent=i;}static{this.\u0275fac=function(o){return new(o||n)(K(xo),K(ai),K(Yn),K(Ce),K(dr))};}static{this.\u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"});}}return n})();export{pt as p};