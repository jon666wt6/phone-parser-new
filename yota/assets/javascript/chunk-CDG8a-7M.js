import {d}from'./chunk-BtfZXCte.js';import {D as De,R as Rt,L as Le,e as yi}from'./chunk-DUFA63pu.js';import'./chunk-DmWUUKq1.js';import'./chunk-D9sMjN11.js';import'./chunk-BqdQpYiq.js';import'./chunk-OwHDLoDr.js';import'./chunk-DDZ0q6Wq.js';import'./chunk-DUkbUbKr.js';import'./chunk-DKWUOuB5.js';import'./chunk-CKkREEv9.js';import {j,D,c4 as ze,i as i$1,bt as Zh,r as Hu,cN as $,al as jR,h as hO,a as MI,L as LI,ao as EO,P as Pp,l as EE,b as Lp}from'./main-4LN5YMRF.js';import'./chunk-D7oc2sSD.js';import'./chunk-Dy7C0KFS.js';import'./chunk-DjGbTwFD.js';import'./chunk-DMiT3hhT.js';import'./chunk-CNoCOKQ_.js';import'./chunk-BNK4z9tR.js';import'./chunk-CxyxnPw1.js';function k(r,y){r&1&&(Pp(0,"div",0),EE(1,"yota-select-number-dialog"),Lp());}var W=(()=>{class r extends j{constructor(){super(...arguments),this._selectNumberDialogService=D(De),this._orderStorage=D(d),this._cartService=D(Rt),this._regionService=D(ze),this._orderApiService=D(Le),this.selectedRegion=this._regionService.getRegion();}setSettings(i){if(this.settings=i$1.parse(i),!this.settings)return;let{expirationLockDate:t,lockId:o,msisdn:e,regionCodeCcm:s}=this._cartService.device||{};s&&s!==this.selectedRegion?.regionCodeCcm&&e&&(e.length=0,this._updateCart()),this._selectNumberDialogService.init({title:this.settings.title||"",cartTitle:"\u0412\u044B\u0431\u0440\u0430\u043D\u043E",cartEmptyDescription:"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043D\u043E\u043C\u0435\u0440\u043E\u0432",selectedNumbersMaxCount:this.settings.maxNumbers||5,selectedNumbers:e||[],region:this.selectedRegion?.regionCodeCcm||"2082",lockId:o,expirationLockDate:t?new Date(t):null,expiredNumbers:[],isDialog:false,buttonOrder:this.settings.button,expandMoreText:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0441\u0435",fetch$:n=>this._orderApiService.getBeautifulNumbers$(n),lock$:n=>this._orderApiService.lockBeautifulNumber$(n),cancel$:n=>this._orderApiService.cancelBeautifulNumber$(n),captcha$:()=>this._orderApiService.getNumbersCaptcha$(),captchaCheck$:n=>this._orderApiService.checkNumbersCaptcha$(n)}),Zh([this._selectNumberDialogService.selectedPhoneNumbers$,this._selectNumberDialogService.expirationLockDate$,this._selectNumberDialogService.lockId$]).pipe(Hu(this._onDestroy$)).subscribe(([n,w,D])=>{this._updateCart(n,w,D);});}_updateCart(i=[],t=null,o=null){let e={msisdn:[],expirationLockDate:null,lockId:null,fiasid:null,regionCodeCcm:null},s=new Date;i.length&&t&&o&&this.selectedRegion?.regionCodeCcm&&s<t&&(e.msisdn=i,e.expirationLockDate=$(t),e.lockId=o,e.regionCodeCcm=this.selectedRegion.regionCodeCcm),this._cartService.setInfo(e),this._orderStorage.setNumbers(e),this._orderStorage.setLocation({regionCodeCcm:e.regionCodeCcm});}static{this.\u0275fac=(()=>{let i;return function(o){return (i||(i=jR(r)))(o||r)}})();}static{this.\u0275cmp=hO({type:r,selectors:[["yota-number-selection"]],features:[MI],decls:1,vars:1,consts:[[1,"number-selection","g-layout-section"]],template:function(t,o){t&1&&LI(0,k,2,0,"div",0),t&2&&EO(o.settings?0:-1);},dependencies:[yi],styles:['[_nghost-%COMP%]{display:flex;margin-block:64px 100px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog{row-gap:40px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls{grid-template-areas:"title" "content";grid-template-columns:1fr;grid-template-rows:1fr minmax(452px,auto)}@media (max-width: 576px){[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls{grid-template-rows:1fr minmax(480px,auto)}}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls .select-number-error{padding:0}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls .select-number-error__image{margin-bottom:8px;width:224px;height:224px;min-width:224px;min-height:224px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls .select-number-dialog__content{background-color:transparent;padding-top:0}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__title{text-align:center;font-size:56px;line-height:62px;font-weight:600}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__content{max-height:596px!important}@media (max-width: 1248px){[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]{margin-block:40px 80px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog{width:100%}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__title{font-size:44px;line-height:50px;font-weight:600}}@media (max-width: 992px){[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]{margin-block:40px 60px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog{border-radius:20px;padding:40px 42px;background:var(--base4);row-gap:12px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog.hide-controls{display:grid}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__title{margin-bottom:28px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-cart{padding:24px;margin-bottom:0}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-cart .select-number-confirm{margin-block:20px 0}}@media (max-width: 767px){[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog{padding:24px 12px;row-gap:16px}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__title{margin-bottom:0;font-size:32px;line-height:40px;font-weight:600}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-dialog__content{max-height:656px!important}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-cart{padding:12px 16px 20px;grid-template-areas:"title price" "numbers price" "order order"!important}[_nghost-%COMP%]   .number-selection[_ngcontent-%COMP%]     .select-number-dialog .select-number-cart.expandable{grid-template-areas:"title price" "numbers price" "more price" "order order"!important}}.number-selection[_ngcontent-%COMP%]{position:relative;max-width:1240px}@media (max-width: 1440px){.number-selection[_ngcontent-%COMP%]{max-width:1208px}}'],changeDetection:0});}}return r})();export{W as NumberSelectionComponent};